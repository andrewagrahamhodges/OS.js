{"version":3,"sources":["webpack://osjsClient/webpack/universalModuleDefinition","webpack://osjsClient/webpack/bootstrap","webpack://osjsClient/./node_modules/@babel/runtime/helpers/defineProperty.js","webpack://osjsClient/./node_modules/@babel/runtime/helpers/classCallCheck.js","webpack://osjsClient/./node_modules/@babel/runtime/helpers/createClass.js","webpack://osjsClient/./node_modules/@babel/runtime/helpers/getPrototypeOf.js","webpack://osjsClient/./node_modules/@babel/runtime/helpers/inherits.js","webpack://osjsClient/./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js","webpack://osjsClient/./node_modules/@babel/runtime/helpers/toConsumableArray.js","webpack://osjsClient/osjsEventEmitter/webpack/universalModuleDefinition","webpack://osjsClient/osjsEventEmitter/webpack/bootstrap","webpack://osjsClient/osjsEventEmitter/node_modules/@babel/runtime/helpers/classCallCheck.js","webpack://osjsClient/osjsEventEmitter/node_modules/@babel/runtime/helpers/createClass.js","webpack://osjsClient/osjsEventEmitter/index.js","webpack://osjsClient//webpack/bootstrap","webpack://osjsClient//osjsEventEmitter/webpack/universalModuleDefinition","webpack://osjsClient//osjsEventEmitter/webpack/bootstrap","webpack://osjsClient//osjsEventEmitter/node_modules/@babel/runtime/helpers/classCallCheck.js","webpack://osjsClient//osjsEventEmitter/node_modules/@babel/runtime/helpers/createClass.js","webpack://osjsClient//osjsEventEmitter/index.js","webpack://osjsClient//node_modules/@babel/runtime/helpers/classCallCheck.js","webpack://osjsClient//node_modules/@babel/runtime/helpers/createClass.js","webpack://osjsClient//node_modules/@babel/runtime/helpers/getPrototypeOf.js","webpack://osjsClient//node_modules/deepmerge/dist/cjs.js","webpack://osjsClient//node_modules/@babel/runtime/helpers/assertThisInitialized.js","webpack://osjsClient//node_modules/@babel/runtime/helpers/toConsumableArray.js","webpack://osjsClient//src/library.ts","webpack://osjsClient//node_modules/@babel/runtime/regenerator/index.js","webpack://osjsClient//node_modules/isobject/index.js","webpack://osjsClient//node_modules/@babel/runtime/helpers/possibleConstructorReturn.js","webpack://osjsClient//node_modules/@babel/runtime/helpers/get.js","webpack://osjsClient//node_modules/@babel/runtime/helpers/inherits.js","webpack://osjsClient//node_modules/omit-deep/index.js","webpack://osjsClient//node_modules/@babel/runtime/helpers/asyncToGenerator.js","webpack://osjsClient//node_modules/@babel/runtime/helpers/typeof.js","webpack://osjsClient//node_modules/@babel/runtime/helpers/superPropBase.js","webpack://osjsClient//node_modules/@babel/runtime/helpers/setPrototypeOf.js","webpack://osjsClient//node_modules/@babel/runtime/helpers/arrayWithoutHoles.js","webpack://osjsClient//node_modules/@babel/runtime/helpers/iterableToArray.js","webpack://osjsClient//node_modules/@babel/runtime/helpers/nonIterableSpread.js","webpack://osjsClient//src/graph.ts","webpack://osjsClient//src/mutex.ts","webpack://osjsClient//node_modules/is-plain-object/index.js","webpack://osjsClient//node_modules/unset-value/index.js","webpack://osjsClient//node_modules/has-value/index.js","webpack://osjsClient//node_modules/has-value/node_modules/isobject/index.js","webpack://osjsClient//node_modules/isarray/index.js","webpack://osjsClient//node_modules/has-values/index.js","webpack://osjsClient//node_modules/get-value/index.js","webpack://osjsClient//node_modules/regenerator-runtime/runtime.js","webpack://osjsClient//src/core.js","webpack://osjsClient//src/utils.js","webpack://osjsClient//src/service-provider.js","webpack://osjsClient//index.js","webpack://osjsClient/./node_modules/@babel/runtime/helpers/get.js","webpack://osjsClient/./node_modules/@babel/runtime/helpers/assertThisInitialized.js","webpack://osjsClient/./node_modules/@babel/runtime/helpers/slicedToArray.js","webpack://osjsClient/./node_modules/deepmerge/dist/cjs.js","webpack://osjsClient/./node_modules/@babel/runtime/helpers/construct.js","webpack://osjsClient/./node_modules/@babel/runtime/helpers/typeof.js","webpack://osjsClient/./node_modules/simplejsonconf/dist/main.js","webpack://osjsClient/./node_modules/@babel/runtime/helpers/arrayLikeToArray.js","webpack://osjsClient/./node_modules/@babel/runtime/helpers/unsupportedIterableToArray.js","webpack://osjsClient/./node_modules/@babel/runtime/helpers/setPrototypeOf.js","webpack://osjsClient/(webpack)/buildin/global.js","webpack://osjsClient/./node_modules/css-mediaquery/index.js","webpack://osjsClient/./node_modules/dateformat/lib/dateformat.js","webpack://osjsClient/./node_modules/@babel/runtime/helpers/arrayWithoutHoles.js","webpack://osjsClient/./node_modules/@babel/runtime/helpers/iterableToArray.js","webpack://osjsClient/./node_modules/@babel/runtime/helpers/nonIterableSpread.js","webpack://osjsClient/./node_modules/@babel/runtime/helpers/superPropBase.js","webpack://osjsClient/./node_modules/@babel/runtime/helpers/arrayWithHoles.js","webpack://osjsClient/./node_modules/@babel/runtime/helpers/iterableToArrayLimit.js","webpack://osjsClient/./node_modules/@babel/runtime/helpers/nonIterableRest.js","webpack://osjsClient/./node_modules/@babel/runtime/helpers/isNativeReflectConstruct.js","webpack://osjsClient/./src/logger.js","webpack://osjsClient/./src/websocket.js","webpack://osjsClient/./src/utils/dnd.js","webpack://osjsClient/./src/utils/dom.js","webpack://osjsClient/./src/styles/logo-blue-32x32.png","webpack://osjsClient/./src/utils/windows.js","webpack://osjsClient/./src/window.js","webpack://osjsClient/./src/application.js","webpack://osjsClient/./src/utils/locale.js","webpack://osjsClient/./src/splash.js","webpack://osjsClient/./src/styles/wallpaper.png","webpack://osjsClient/./src/config.js","webpack://osjsClient/./src/utils/fetch.js","webpack://osjsClient/./src/utils/url.js","webpack://osjsClient/./src/core.js","webpack://osjsClient/./src/utils/input.js","webpack://osjsClient/./node_modules/hyperapp/src/index.js","webpack://osjsClient/./src/utils/vfs.js","webpack://osjsClient/./src/adapters/ui/iconview.js","webpack://osjsClient/./src/utils/colors.js","webpack://osjsClient/./src/adapters/ui/search.js","webpack://osjsClient/./src/search.js","webpack://osjsClient/./src/desktop.js","webpack://osjsClient/./src/notification.js","webpack://osjsClient/./src/notifications.js","webpack://osjsClient/./src/window-behavior.js","webpack://osjsClient/./src/adapters/ui/login.js","webpack://osjsClient/./src/login.js","webpack://osjsClient/./src/adapters/auth/server.js","webpack://osjsClient/./src/adapters/auth/localstorage.js","webpack://osjsClient/./src/auth.js","webpack://osjsClient/./src/session.js","webpack://osjsClient/./src/utils/preloader.js","webpack://osjsClient/./src/packages.js","webpack://osjsClient/./src/tray.js","webpack://osjsClient/./src/clipboard.js","webpack://osjsClient/./src/locale/en_EN.js","webpack://osjsClient/./src/locale/fr_FR.js","webpack://osjsClient/./src/locale/nb_NO.js","webpack://osjsClient/./src/locale/sl_SI.js","webpack://osjsClient/./src/locale/vi_VN.js","webpack://osjsClient/./src/locale/de_DE.js","webpack://osjsClient/./src/locale/zh_CN.js","webpack://osjsClient/./src/locale/fa_FA.js","webpack://osjsClient/./src/locale/pt_BR.js","webpack://osjsClient/./src/basic-application.js","webpack://osjsClient/./src/providers/core.js","webpack://osjsClient/./src/providers/desktop.js","webpack://osjsClient/./src/providers/notifications.js","webpack://osjsClient/./src/vfs.js","webpack://osjsClient/./src/adapters/vfs/null.js","webpack://osjsClient/./src/adapters/vfs/system.js","webpack://osjsClient/./src/adapters/vfs/apps.js","webpack://osjsClient/./src/filesystem.js","webpack://osjsClient/./src/providers/vfs.js","webpack://osjsClient/./src/providers/auth.js","webpack://osjsClient/./src/adapters/settings/localstorage.js","webpack://osjsClient/./src/settings.js","webpack://osjsClient/./src/adapters/settings/server.js","webpack://osjsClient/./src/providers/settings.js"],"names":["root","factory","exports","module","define","amd","window","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","obj","configurable","writable","instance","Constructor","TypeError","_defineProperties","target","props","length","descriptor","protoProps","staticProps","_getPrototypeOf","setPrototypeOf","getPrototypeOf","__proto__","subClass","superClass","constructor","_typeof","assertThisInitialized","self","arrayWithoutHoles","iterableToArray","unsupportedIterableToArray","nonIterableSpread","arr","getEventNames","Array","String","replace","split","EventEmitter","this","events","e","callback","options","forEach","_this","push","on","once","force","filter","_this2","ev","persist","splice","args","_this3","apply","console","warn","isMergeableObject","stringValue","toString","$$typeof","REACT_ELEMENT_TYPE","for","cloneUnlessOtherwiseSpecified","clone","deepmerge","val","isArray","defaultArrayMerge","source","concat","map","element","getKeys","keys","getOwnPropertySymbols","symbol","propertyIsEnumerable","propertyIsOnObject","_","arrayMerge","sourceIsArray","destination","customMerge","getMergeFunction","mergeObject","all","array","Error","reduce","prev","next","deepmerge_1","ReferenceError","require","superPropBase","_get","receiver","Reflect","base","desc","getOwnPropertyDescriptor","isObject","unset","omitDeep","j","asyncGeneratorStep","gen","resolve","reject","_next","_throw","arg","info","error","done","Promise","then","fn","arguments","err","iterator","_setPrototypeOf","arr2","iter","from","mutex","isObjectObject","ctor","prot","has","prop","segs","last","pop","slice","shift","hasValues","noZero","join","a","b","len","runtime","Op","hasOwn","$Symbol","iteratorSymbol","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","wrap","innerFn","outerFn","tryLocsList","protoGenerator","Generator","generator","context","Context","_invoke","state","method","delegate","delegateResult","maybeInvokeDelegate","ContinueSentinel","sent","_sent","dispatchException","abrupt","record","tryCatch","type","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","getProto","NativeIteratorPrototype","values","Gp","defineIteratorMethods","AsyncIterator","previousPromise","callInvokeWithMethodAndArg","invoke","result","__await","unwrapped","resultName","nextLoc","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","resetTryEntry","completion","reset","iterable","iteratorMethod","isNaN","doneResult","displayName","isGeneratorFunction","genFun","mark","awrap","async","reverse","skipTempReset","charAt","stop","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","thrown","delegateYield","regeneratorRuntime","accidentalStrictMode","Function","CoreBase","defaultConfiguration","configuration","merger","merge","omitted","omit","logger","booted","started","destroyed","providers","core","instances","registry","createGraph","list","graph","Graph","provides","provider","addNode","Node","wants","dependsOptions","depends","dependsInstance","dindex","findIndex","some","indexOf","addDependency","traverse","register","ref","init","before","singleton","make","found","find","destroy","providerHandler","promises","defaultValue","tree","assign","ServiceProvider","arrayWithHoles","iterableToArrayLimit","nonIterableRest","isNonNullObject","isReactElement","isSpecial","getEnumerableOwnPropertySymbols","propertyIsUnsafe","isNativeReflectConstruct","_construct","Parent","Class","construct","default","u","f","JSON","parse","stringify","y","set","remove","return","arrayLikeToArray","minLen","test","g","match","mediaQuery","parseQuery","query","inverse","typeMatch","expressionsMatch","expressions","every","expression","feature","modifier","expValue","toLowerCase","toPx","toDpi","toDecimal","parseInt","RE_MEDIA_QUERY","RE_MQ_EXPRESSION","RE_MQ_FEATURE","RE_LENGTH_UNIT","RE_RESOLUTION_UNIT","captures","trim","parsed","ratio","numbers","decimal","Number","resolution","parseFloat","global","token","timezone","timezoneClip","dateFormat","date","mask","utc","gmt","kindOf","undefined","Date","maskSlice","masks","D","H","M","L","getTimezoneOffset","W","getWeek","N","getDayOfWeek","flags","dd","pad","ddd","i18n","dayNames","dddd","mm","mmm","monthNames","mmmm","yy","yyyy","h","hh","HH","MM","ss","Math","round","timeNames","tt","T","TT","Z","floor","abs","S","targetThursday","getFullYear","getMonth","getDate","setDate","getDay","firstThursday","ds","setHours","getHours","weekDiff","dow","_arr","_n","_d","_e","_s","_i","sham","Proxy","methods","middleware","input","current","bindMethod","log","thisArg","assignMethods","addMiddleware","clearMiddleware","eventNames","Websocket","uri","debug","closed","connected","connecting","reconnecting","connectfailed","reconnect","interval","open","connection","_attachEvents","clearInterval","reconnected","emit","_destroyConnection","setInterval","WebSocket","send","close","retval","getDataTransfer","data","files","dataTransfer","transfer","getData","setDataTransfer","effect","setDragImage","hasDragImage","transferData","el","effectAllowed","setData","draggable","ondragstart","ondragend","setter","dragstart","setAttribute","dragend","removeAttribute","removeEventListener","classList","addEventListener","add","droppable","ondragenter","ondragover","ondragleave","ondrop","dragenter","dragleave","dragover","preventDefault","contains","stopPropagation","dropEffect","drop","supported","supportsNativeNotification","style","src","document","createElement","onload","onerror","appendChild","script","onreadystatechange","readyState","createCssText","k","supportsPassive","opts","playSound","volume","audio","Audio","voule","play","supportsTransition","createAttributes","attrs","classNames","modal","ontop","gravity","moveable","resizable","focusable","maximizable","minimizable","sessionable","closeable","header","controls","visibility","shadowDOM","clamp","mediaQueries","small","medium","big","minDimension","width","height","maxDimension","createState","title","id","icon","defaultIcon","media","moving","resizing","loading","focused","maximized","minimized","zIndex","styles","position","left","top","dimension","max","clampPosition","rect","maxLeft","maxTop","min","renderCallback","win","attributes","$content","attachShadow","resizer","maxPosition","clamper","directions","getAttribute","going","dir","xDir","yDir","diffX","diffY","getMediaQueryName","orientation","screen","matchMedia","$element","offsetWidth","offsetHeight","windows","windowCount","nextZindex","lastWindow","TEMPLATE","Window","parent","template","ondestroy","wid","children","rendered","$header","$icon","$title","_preventDefaultPosition","_loadingDebounce","_template","_ondestroy","w","foundIndex","inited","_initTemplate","_initBehavior","tpl","config","innerHTML","querySelector","transform","attr","isInteger","transformVectors","getRect","behavior","buttonmap","action","display","querySelectorAll","setState","focus","_setClassNames","_updateButtons","_updateDOM","_checkModal","gravitate","clampToViewport","$root","setNextZindex","setTimeout","_toggleState","_focus","blur","activeElement","ae","getActiveElement","_maximize","toggle","container","firstChild","innerBox","parentNode","getBoundingClientRect","outerBox","ceil","topHeight","dimensionFromElement","setDimension","update","_checkNextZindex","setZindex","_setState","clearTimeout","hasVertical","hasHorizontal","positionFromGravity","setPosition","oldValue","eventName","windexes","text","div","cssText","textContent","backgroundImage","lang","applications","applicationCount","getSettingsKey","metadata","Application","defaultSettings","settings","pid","windowAutoFocus","workers","requestOptions","sockets","ws","worker","terminate","getSession","run","forcePreload","restore","path","url","resource","request","socket","params","filename","Worker","credentials","msg","translate","minimize","maximize","defaultFilter","proc","filterFn","service","save","Splash","$loading","className","createTextNode","show","prefixMap","nb","sprintfRegex","sprintfMatcher","getLocale","defaultLocale","getDefaultLocale","userLocale","getUserLocale","getFromList","ul","dl","fallbackList","localizedList","fmt","translatableFlat","translatable","format","useFormat","dateformat","clientLocale","nav","browserLanguage","userLanguage","language","toUpperCase","langs","languages","str","browserLocale","navigator","acceptedLocales","lenght","createUri","pathname","location","href","en_EN","nb_NO","vi_VN","fr_FR","de_DE","sl_SI","zh_CN","fa_FA","pt_BR","development","process","standalone","http","ping","public","connectInterval","disabled","packages","manifest","application","pinned","autostart","categories","label","science","games","graphics","network","multimedia","office","system","utilities","other","auth","ui","login","username","password","lock","defaults","search","enabled","notifications","native","desktop","contextmenu","font","theme","sounds","icons","animations","panels","items","widgets","keybindings","background","defaultWallpaper","color","iconview","fontColorStyle","fontColor","locale","rtl","shortDate","mediumDate","longDate","fullDate","shortTime","longTime","lofi","mobile","moveKeybinding","vfs","watch","defaultPath","defaultAdapter","adapters","mountpoints","adapter","readOnly","globalBlacklist","globalWhitelist","bodyTypes","ArrayBuffer","ArrayBufferView","Blob","File","URLSearchParams","FormData","createFetchOptions","fetchOptions","headers","body","encodeURIComponent","hasBody","stringBody","fetch","createErrorRejection","response","status","statusText","ok","contentType","json","urlResolver","endpoint","prefix","Core","splash","$resourceRoot","resourceRoot","user","groups","protocol","host","destroyAll","groupEnd","start","group","load","_createListeners","_createConnection","getApplications","pingTime","cookie","maxAge","cb","wasConnected","message","launch","file","mime","app","compatible","getCompatiblePackages","_openApplicationDialog","useDefault","choices","forceDialog","btn","choice","checked","pkg","apps","modifierNames","matchKeyCombo","combo","checkKeys","keyName","getEvent","clientX","clientY","touch","touches","changedTouches","rest","node","nodeName","actions","view","skipRender","rootElement","oldNode","recycleElement","childNodes","nodeType","nodeValue","lifecycle","isRecycling","globalState","wiredActions","wireStateToActions","getPartialState","scheduleRender","setPartialState","resolveNode","render","patch","isSvg","newElement","createElementNS","oncreate","updateAttribute","insertBefore","removeElement","oldAttributes","onupdate","updateElement","oldKeyed","newKeyed","oldElements","oldChildren","oldKey","getKey","newKey","keyedNode","out","eventListener","event","currentTarget","setProperty","removeChild","removeChildren","onremove","parentDirectory","item","index","pathJoin","sortString","localeCompare","sortDate","sortDefault","sortFn","sortMap","size","mtime","ctime","atime","createSpecials","specials","isDirectory","isFile","stat","createFileReader","ab","FileReader","onloadend","humanFileSize","bytes","si","thresh","units","toFixed","transformReaddir","showHiddenFiles","sortBy","sortDir","filterHidden","substr","sorter","modify","humanSize","sortedSpecial","sort","sortedDirectories","sortedFiles","transformArrayBuffer","getFileIcon","re","RegExp","createFileIter","parent_id","basename","parseMontpointPrefix","filterMountByGroups","userGroups","mountGroups","strict","tapper","timer","timeout","tapped","doubleTap","validVfsDrop","onDropAction","shortcut","addEntry","uploadEntries","isRootElement","DesktopIconView","bottom","right","oldRoot","reload","_render","fileIcon","themeIcon","copy","readdir","readfile","writefile","unlink","mkdir","shortcuts","read","contents","write","createShortcuts","results","readDesktopFolder","selected","entries","setEntries","openDropContextMenu","createDropContextMenu","openContextMenu","createFileContextMenu","createRootContextMenu","openEntry","selectEntry","dest","removeEntry","class","oncontextmenu","onclick","shiftKey","ontouchstart","ondblclick","applySettings","menu","hex","backgroundColor","invert","custom","fs","resultView","scrollIntoView","visible","placeholder","onblur","oninput","setQuery","onkeydown","keyCode","setPreviousIndex","setNextIndex","resetIndex","hide","onkeypress","createView","ee","hyperapp","setError","setResults","Search","focusLastWindow","createUI","pattern","mount","lists","createPanelSubtraction","panel","subtraction","isVisible","getState","Desktop","$theme","$icons","$styles","contextmenuEntries","keyboardContext","subtract","_removeIcons","_removeTheme","initConnectionEvents","initUIEvents","initDragEvents","initKeyboardEvents","initGlobalKeyboardEvents","initMouseEvents","initBaseEvents","initLocales","initDeveloperTray","_updateCSS","getWindows","_updateIconview","tray","onDeveloperMenu","isWithin","isWithinWindow","isWithinContext","forwardKeyEvent","selectionStart","selectionEnd","tagName","isInput","substring","onContextMenu","moved","onmousemove","onmouseup","resizeDebounce","history","pushState","URL","rtls","checkRTL","isRtl","resize","isMobile","newSettings","lockSettings","userSettings","applyOverlays","removeAll","fontFamily","backgroundRepeat","backgroundPosition","backgroundSize","applyBackgroundStyles","applyTheme","applyIcons","applyIconView","off","_applyTheme","elements","errors","v","storageItems","clear","relaunch","extras","hasIconview","useDefaults","__","themes","getPackages","defaultItems","_applySettingsByKey","provided","ctx","Notification","defaultLabel","sound","renderCustom","Notif","notification","permission","requestPermission","createNativeNotification","Notifications","setElementStyles","createElementStyles","defaultPosition","carry","isPassive","touchArg","passive","actionMap","WindowBehavior","lastAction","$lofi","mousedown","onmousedown","click","dblclick","onicondblclick","iconDblclick","oniconclick","iconClick","ontrasitionend","pos","startX","startY","newX","CASCADE_DISTANCE","getCascadePosition","raise","actionCallback","attributeSet","checkMove","move","mover","mousemove","transformedEvent","posX","posY","mouseup","createFields","fields","field","autocapitalize","autocomplete","logo","createSide","side","formFields","stamp","onsubmit","submit","hidden","startHidden","$container","setLoading","Login","serverAuth","logout","localStorageAuth","Auth","defaultUi","defaultAdapters","server","localStorage","autologin","shutdown","Session","session","fresh","Preloader","loaded","cached","success","_load","successes","res","failed","Packages","_running","preloader","_autostart","addPackages","_launchTheme","_launchApplication","signaled","foundApp","_launch","preloads","dialog","alert","stack","fail","meta","configured","append","getUser","strictGroups","blacklist","mimeType","mimes","Tray","handler","defaultTitle","Clipboard","clipboard","ERR_REQUEST_STANDALONE","ERR_REQUEST_NOT_OK","ERR_VFS_MOUNT_NOT_FOUND","ERR_VFS_MOUNT_NOT_FOUND_FOR","ERR_VFS_MOUNT_NOT_MOUNTED","ERR_VFS_MOUNT_ALREADY_MOUNTED","ERR_VFS_PATH_FORMAT_INVALID","ERR_PACKAGE_NOT_FOUND","ERR_PACKAGE_LOAD","ERR_PACKAGE_NO_RUNTIME","ERR_PACKAGE_NO_METADATA","ERR_PACKAGE_EXCEPTION","ERR_WINDOW_ID_EXISTS","ERR_INVALID_LOCALE","LBL_CONNECTION_LOST","LBL_CONNECTION_LOST_MESSAGE","LBL_CONNECTION_RESTORED","LBL_CONNECTION_RESTORED_MESSAGE","LBL_CONNECTION_FAILED","LBL_CONNECTION_FAILED_MESSAGE","LBL_APP_CAT_DEVELOPMENT","LBL_APP_CAT_SCIENCE","LBL_APP_CAT_GAMES","LBL_APP_CAT_GRAPHICS","LBL_APP_CAT_NETWORK","LBL_APP_CAT_MULTIMEDIA","LBL_APP_CAT_OFFICE","LBL_APP_CAT_SYSTEM","LBL_APP_CAT_UTILITIES","LBL_APP_CAT_OTHER","LBL_LAUNCH_SELECT","LBL_LAUNCH_SELECT_MESSAGE","LBL_DESKTOP_SELECT_WALLPAPER","LBL_DESKTOP_SELECT_THEME","LBL_SEARCH_TOOLTOP","LBL_SEARCH_PLACEHOLDER","LBL_SEARCH_WAIT","LBL_SEARCH_RESULT","LBL_FS_B","LBL_FS_M","LBL_FS_G","LBL_FS_KIB","LBL_FS_MIB","LBL_FS_GIB","LBL_TOP","LBL_LEFT","LBL_RIGHT","LBL_BOTTOM","LBL_MENU","LBL_ERROR","LBL_INFO","LBL_MESSAGE","LBL_WARNINIG","LBL_SUCCESS","LBL_FAILURE","LBL_WINDOW","LBL_WINDOWS","LBL_NOTIFICATION","LBL_NOTIFICATIONS","LBL_TRAY","LBL_NAME","LBL_TYPE","LBL_SIZE","LBL_FILE","LBL_NEW","LBL_OPEN","LBL_OPEN_WITH","LBL_SAVE","LBL_SAVEAS","LBL_OK","LBL_ABORT","LBL_CANCEL","LBL_CLOSE","LBL_QUIT","LBL_YES","LBL_NO","LBL_GO","LBL_MKDIR","LBL_MKFILE","LBL_COPY","LBL_PASTE","LBL_CUT","LBL_MOVE","LBL_RENAME","LBL_DELETE","LBL_DOWNLOAD","LBL_REFRESH","LBL_RELOAD","LBL_HOME","LBL_VIEW","LBL_HELP","LBL_ABOUT","LBL_APPLICATION","LBL_APPLICATIONS","LBL_KILL","LBL_KILL_ALL","LBL_MINIMIZE","LBL_MAXIMIZE","LBL_RESTORE","LBL_RAISE","LBL_SHADE","LBL_UNSHADE","LBL_ONTOP","LBL_RESIZE","LBL_BACK","LBL_FORWARD","LBL_UPLOAD","LBL_IMAGE","LBL_CREATE_SHORTCUT","LBL_REMOVE_SHORTCUT","LBL_EDIT","BasicApplication","mimeTypes","loadMimeTypes","saveMimeTypes","defaultFilename","currentFile","_createTitle","setTitle","getDialogOptions","_setFile","updateWindowTitle","createDialog","resourceResolver","elem","canPlayType","mp3","mp4","oga","video","ogv","getThemeName","defaultTheme","getSoundThemeName","themeResource","soundResource","soundsEnabled","CoreServiceProvider","pm","OSjs","createGlobalApi","initBaseProviders","initResourceProviders","translations","setLocale","dnd","windowBehavior","absoluteSrc","freeze","blacklisted","notWhitelisted","onDistChanged","onPackageChanged","DesktopServiceProvider","setKeyboardContext","addContextMenuEntries","addContextMenu","NotificationServiceProvider","pathToObject","handleDirectoryList","binary","to","rename","exists","download","createObjectURL","revokeObjectURL","searchable","nullAdapter","unmount","getters","arrayBuffer","requester","passthrough","formData","pkgs","Filesystem","mounts","systemAdapter","appsAdapter","proxy","VFS","_request","stopOnError","createMountpoint","_mountpointAction","_mountAction","mountpoint","coreEventName","_adapter","mounted","srcMount","getMountpointFromPath","destMount","sameAdapter","local","mg","ms","VFSServiceProvider","iconMap","utils","getMounts","mountAll","AuthServiceProvider","localStorageSettings","removeItem","setItem","getItem","Settings","debounce","promise","simplejsonconf","sjc","SettingsServiceProvider"],"mappings":"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","file":"main.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"osjsClient\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"osjsClient\"] = factory();\n\telse\n\t\troot[\"osjsClient\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 22);\n","function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nmodule.exports = _defineProperty;","function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nmodule.exports = _classCallCheck;","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nmodule.exports = _createClass;","function _getPrototypeOf(o) {\n  module.exports = _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nmodule.exports = _getPrototypeOf;","var setPrototypeOf = require(\"./setPrototypeOf\");\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}\n\nmodule.exports = _inherits;","var _typeof = require(\"../helpers/typeof\");\n\nvar assertThisInitialized = require(\"./assertThisInitialized\");\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return assertThisInitialized(self);\n}\n\nmodule.exports = _possibleConstructorReturn;","var arrayWithoutHoles = require(\"./arrayWithoutHoles\");\n\nvar iterableToArray = require(\"./iterableToArray\");\n\nvar unsupportedIterableToArray = require(\"./unsupportedIterableToArray\");\n\nvar nonIterableSpread = require(\"./nonIterableSpread\");\n\nfunction _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}\n\nmodule.exports = _toConsumableArray;","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"osjsEventEmitter\"] = factory();\n\telse\n\t\troot[\"osjsEventEmitter\"] = factory();\n})(global, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 2);\n","function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nmodule.exports = _classCallCheck;","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nmodule.exports = _createClass;","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2019, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\n/*\n * Gets an array of event names based in input,\n * be it array or a comma separated string.\n */\nconst getEventNames = name => (name instanceof Array)\n  ? name\n  : String(name).replace(/\\s+/g, '').split(',');\n\n/**\n * Event Emitter\n *\n * @desc A standards compatible event handler (observer) with some sugar.\n */\nexport class EventEmitter {\n\n  /**\n   * Create Event Handler\n   * @param {string} [name] A name for logging\n   */\n  constructor(name = 'undefined') {\n    /**\n     * The name of the handler\n     * @type {string}\n     */\n    this.name = name;\n\n    /**\n     * Registered events\n     * @type {object}\n     */\n    this.events = {};\n  }\n\n  /**\n   * Destroys all events\n   */\n  destroy() {\n    this.events = {};\n  }\n\n  /**\n   * Add an event handler\n   *\n   * You can supply an array of event names or a comma separated list with a string\n   *\n   * @param {string|string[]} name Event name\n   * @param {Function} callback Callback function\n   * @param {object} [options] Options\n   * @param {boolean} [options.persist] This even handler cannot be removed unless forced\n   * @param {boolean} [options.once] Fire only once\n   * @return {EventEmitter} Returns current instance\n   */\n  on(name, callback, options = {}) {\n    options = options || {};\n\n    if (typeof callback !== 'function') {\n      throw new TypeError('Invalid callback');\n    }\n\n    getEventNames(name).forEach(n => {\n      if (!this.events[n]) {\n        this.events[n] = [];\n      }\n\n      this.events[n].push({callback, options});\n    });\n\n    return this;\n  }\n\n  /**\n   * Adds an event handler that only fires once\n   * @return {EventEmitter} Returns current instance\n   */\n  once(name, callback) {\n    return this.on(name, callback, {once: true});\n  }\n\n  /**\n   * Removes an event handler\n   *\n   * If no callback is provided, all events bound to given name will be removed.\n   *\n   * You can supply an array of event names or a comma separated list with a string\n   *\n   * @param {string|string[]} name Event name\n   * @param {Function} [callback] Callback function\n   * @param {boolean} [force=false] Forces removal even if set to persis\n   * @return {EventEmitter} Returns current instance\n   */\n  off(name, callback = null, force = false) {\n    getEventNames(name)\n      .filter(n => !!this.events[n])\n      .forEach(n => {\n        if (callback) {\n          let i = this.events[n].length;\n          while (i--) {\n            const ev = this.events[n][i];\n            const removable = !ev.options.persist || force;\n            if (removable && ev.callback === callback) {\n              this.events[n].splice(i, 1);\n            }\n          }\n        } else {\n          this.events[n] = force\n            ? []\n            : this.events[n].filter(({options}) => options.persist === true);\n        }\n      });\n\n    return this;\n  }\n\n  /**\n   * Emits an event\n   *\n   * You can supply an array of event names or a comma separated list with a string\n   *\n   * @param {string|string[]} name Event name\n   * @param {*} [args] Arguments\n   * @return {EventEmitter} Returns current instance\n   */\n  emit(name, ...args) {\n    getEventNames(name).forEach(n => {\n      if (this.events[n]) {\n        let i = this.events[n].length;\n        while (i--) {\n          const {options, callback} = this.events[n][i];\n\n          try {\n            callback(...args);\n          } catch (e) {\n            console.warn(e);\n          }\n\n          if (options && options.once) {\n            this.events[n].splice(i, 1);\n          }\n        }\n      }\n    });\n\n    return this;\n  }\n\n}\n"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 15);\n","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"osjsEventEmitter\"] = factory();\n\telse\n\t\troot[\"osjsEventEmitter\"] = factory();\n})(global, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 2);\n","function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nmodule.exports = _classCallCheck;","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nmodule.exports = _createClass;","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2019, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\n/*\n * Gets an array of event names based in input,\n * be it array or a comma separated string.\n */\nconst getEventNames = name => (name instanceof Array)\n  ? name\n  : String(name).replace(/\\s+/g, '').split(',');\n\n/**\n * Event Emitter\n *\n * @desc A standards compatible event handler (observer) with some sugar.\n */\nexport class EventEmitter {\n\n  /**\n   * Create Event Handler\n   * @param {string} [name] A name for logging\n   */\n  constructor(name = 'undefined') {\n    /**\n     * The name of the handler\n     * @type {string}\n     */\n    this.name = name;\n\n    /**\n     * Registered events\n     * @type {object}\n     */\n    this.events = {};\n  }\n\n  /**\n   * Destroys all events\n   */\n  destroy() {\n    this.events = {};\n  }\n\n  /**\n   * Add an event handler\n   *\n   * You can supply an array of event names or a comma separated list with a string\n   *\n   * @param {string|string[]} name Event name\n   * @param {Function} callback Callback function\n   * @param {object} [options] Options\n   * @param {boolean} [options.persist] This even handler cannot be removed unless forced\n   * @param {boolean} [options.once] Fire only once\n   * @return {EventEmitter} Returns current instance\n   */\n  on(name, callback, options = {}) {\n    options = options || {};\n\n    if (typeof callback !== 'function') {\n      throw new TypeError('Invalid callback');\n    }\n\n    getEventNames(name).forEach(n => {\n      if (!this.events[n]) {\n        this.events[n] = [];\n      }\n\n      this.events[n].push({callback, options});\n    });\n\n    return this;\n  }\n\n  /**\n   * Adds an event handler that only fires once\n   * @return {EventEmitter} Returns current instance\n   */\n  once(name, callback) {\n    return this.on(name, callback, {once: true});\n  }\n\n  /**\n   * Removes an event handler\n   *\n   * If no callback is provided, all events bound to given name will be removed.\n   *\n   * You can supply an array of event names or a comma separated list with a string\n   *\n   * @param {string|string[]} name Event name\n   * @param {Function} [callback] Callback function\n   * @param {boolean} [force=false] Forces removal even if set to persis\n   * @return {EventEmitter} Returns current instance\n   */\n  off(name, callback = null, force = false) {\n    getEventNames(name)\n      .filter(n => !!this.events[n])\n      .forEach(n => {\n        if (callback) {\n          let i = this.events[n].length;\n          while (i--) {\n            const ev = this.events[n][i];\n            const removable = !ev.options.persist || force;\n            if (removable && ev.callback === callback) {\n              this.events[n].splice(i, 1);\n            }\n          }\n        } else {\n          this.events[n] = force\n            ? []\n            : this.events[n].filter(({options}) => options.persist === true);\n        }\n      });\n\n    return this;\n  }\n\n  /**\n   * Emits an event\n   *\n   * You can supply an array of event names or a comma separated list with a string\n   *\n   * @param {string|string[]} name Event name\n   * @param {*} [args] Arguments\n   * @return {EventEmitter} Returns current instance\n   */\n  emit(name, ...args) {\n    getEventNames(name).forEach(n => {\n      if (this.events[n]) {\n        let i = this.events[n].length;\n        while (i--) {\n          const {options, callback} = this.events[n][i];\n\n          try {\n            callback(...args);\n          } catch (e) {\n            console.warn(e);\n          }\n\n          if (options && options.once) {\n            this.events[n].splice(i, 1);\n          }\n        }\n      }\n    });\n\n    return this;\n  }\n\n}\n","function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nmodule.exports = _classCallCheck;","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nmodule.exports = _createClass;","function _getPrototypeOf(o) {\n  module.exports = _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nmodule.exports = _getPrototypeOf;","'use strict';\n\nvar isMergeableObject = function isMergeableObject(value) {\n\treturn isNonNullObject(value)\n\t\t&& !isSpecial(value)\n};\n\nfunction isNonNullObject(value) {\n\treturn !!value && typeof value === 'object'\n}\n\nfunction isSpecial(value) {\n\tvar stringValue = Object.prototype.toString.call(value);\n\n\treturn stringValue === '[object RegExp]'\n\t\t|| stringValue === '[object Date]'\n\t\t|| isReactElement(value)\n}\n\n// see https://github.com/facebook/react/blob/b5ac963fb791d1298e7f396236383bc955f916c1/src/isomorphic/classic/element/ReactElement.js#L21-L25\nvar canUseSymbol = typeof Symbol === 'function' && Symbol.for;\nvar REACT_ELEMENT_TYPE = canUseSymbol ? Symbol.for('react.element') : 0xeac7;\n\nfunction isReactElement(value) {\n\treturn value.$$typeof === REACT_ELEMENT_TYPE\n}\n\nfunction emptyTarget(val) {\n\treturn Array.isArray(val) ? [] : {}\n}\n\nfunction cloneUnlessOtherwiseSpecified(value, options) {\n\treturn (options.clone !== false && options.isMergeableObject(value))\n\t\t? deepmerge(emptyTarget(value), value, options)\n\t\t: value\n}\n\nfunction defaultArrayMerge(target, source, options) {\n\treturn target.concat(source).map(function(element) {\n\t\treturn cloneUnlessOtherwiseSpecified(element, options)\n\t})\n}\n\nfunction getMergeFunction(key, options) {\n\tif (!options.customMerge) {\n\t\treturn deepmerge\n\t}\n\tvar customMerge = options.customMerge(key);\n\treturn typeof customMerge === 'function' ? customMerge : deepmerge\n}\n\nfunction getEnumerableOwnPropertySymbols(target) {\n\treturn Object.getOwnPropertySymbols\n\t\t? Object.getOwnPropertySymbols(target).filter(function(symbol) {\n\t\t\treturn target.propertyIsEnumerable(symbol)\n\t\t})\n\t\t: []\n}\n\nfunction getKeys(target) {\n\treturn Object.keys(target).concat(getEnumerableOwnPropertySymbols(target))\n}\n\nfunction propertyIsOnObject(object, property) {\n\ttry {\n\t\treturn property in object\n\t} catch(_) {\n\t\treturn false\n\t}\n}\n\n// Protects from prototype poisoning and unexpected merging up the prototype chain.\nfunction propertyIsUnsafe(target, key) {\n\treturn propertyIsOnObject(target, key) // Properties are safe to merge if they don't exist in the target yet,\n\t\t&& !(Object.hasOwnProperty.call(target, key) // unsafe if they exist up the prototype chain,\n\t\t\t&& Object.propertyIsEnumerable.call(target, key)) // and also unsafe if they're nonenumerable.\n}\n\nfunction mergeObject(target, source, options) {\n\tvar destination = {};\n\tif (options.isMergeableObject(target)) {\n\t\tgetKeys(target).forEach(function(key) {\n\t\t\tdestination[key] = cloneUnlessOtherwiseSpecified(target[key], options);\n\t\t});\n\t}\n\tgetKeys(source).forEach(function(key) {\n\t\tif (propertyIsUnsafe(target, key)) {\n\t\t\treturn\n\t\t}\n\n\t\tif (propertyIsOnObject(target, key) && options.isMergeableObject(source[key])) {\n\t\t\tdestination[key] = getMergeFunction(key, options)(target[key], source[key], options);\n\t\t} else {\n\t\t\tdestination[key] = cloneUnlessOtherwiseSpecified(source[key], options);\n\t\t}\n\t});\n\treturn destination\n}\n\nfunction deepmerge(target, source, options) {\n\toptions = options || {};\n\toptions.arrayMerge = options.arrayMerge || defaultArrayMerge;\n\toptions.isMergeableObject = options.isMergeableObject || isMergeableObject;\n\t// cloneUnlessOtherwiseSpecified is added to `options` so that custom arrayMerge()\n\t// implementations can use it. The caller may not replace it.\n\toptions.cloneUnlessOtherwiseSpecified = cloneUnlessOtherwiseSpecified;\n\n\tvar sourceIsArray = Array.isArray(source);\n\tvar targetIsArray = Array.isArray(target);\n\tvar sourceAndTargetTypesMatch = sourceIsArray === targetIsArray;\n\n\tif (!sourceAndTargetTypesMatch) {\n\t\treturn cloneUnlessOtherwiseSpecified(source, options)\n\t} else if (sourceIsArray) {\n\t\treturn options.arrayMerge(target, source, options)\n\t} else {\n\t\treturn mergeObject(target, source, options)\n\t}\n}\n\ndeepmerge.all = function deepmergeAll(array, options) {\n\tif (!Array.isArray(array)) {\n\t\tthrow new Error('first argument should be an array')\n\t}\n\n\treturn array.reduce(function(prev, next) {\n\t\treturn deepmerge(prev, next, options)\n\t}, {})\n};\n\nvar deepmerge_1 = deepmerge;\n\nmodule.exports = deepmerge_1;\n","function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nmodule.exports = _assertThisInitialized;","var arrayWithoutHoles = require(\"./arrayWithoutHoles\");\n\nvar iterableToArray = require(\"./iterableToArray\");\n\nvar nonIterableSpread = require(\"./nonIterableSpread\");\n\nfunction _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || nonIterableSpread();\n}\n\nmodule.exports = _toConsumableArray;","\"use strict\";\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__export(require(\"./graph\"));\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibGlicmFyeS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uL3NyYy9saWJyYXJ5LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7O0FBQUEsNkJBQXdCIn0=","module.exports = require(\"regenerator-runtime\");\n","/*!\n * isobject <https://github.com/jonschlinkert/isobject>\n *\n * Copyright (c) 2014-2017, Jon Schlinkert.\n * Released under the MIT License.\n */\n\n'use strict';\n\nmodule.exports = function isObject(val) {\n  return val != null && typeof val === 'object' && Array.isArray(val) === false;\n};\n","var _typeof = require(\"../helpers/typeof\");\n\nvar assertThisInitialized = require(\"./assertThisInitialized\");\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return assertThisInitialized(self);\n}\n\nmodule.exports = _possibleConstructorReturn;","var superPropBase = require(\"./superPropBase\");\n\nfunction _get(target, property, receiver) {\n  if (typeof Reflect !== \"undefined\" && Reflect.get) {\n    module.exports = _get = Reflect.get;\n  } else {\n    module.exports = _get = function _get(target, property, receiver) {\n      var base = superPropBase(target, property);\n      if (!base) return;\n      var desc = Object.getOwnPropertyDescriptor(base, property);\n\n      if (desc.get) {\n        return desc.get.call(receiver);\n      }\n\n      return desc.value;\n    };\n  }\n\n  return _get(target, property, receiver || target);\n}\n\nmodule.exports = _get;","var setPrototypeOf = require(\"./setPrototypeOf\");\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}\n\nmodule.exports = _inherits;","'use strict';\n\nvar isObject = require('is-plain-object');\nvar unset = require('unset-value');\n\nmodule.exports = function omitDeep(value, keys) {\n  if (typeof value === 'undefined') {\n    return {};\n  }\n\n  if (Array.isArray(value)) {\n    for (var i = 0; i < value.length; i++) {\n      value[i] = omitDeep(value[i], keys);\n    }\n    return value;\n  }\n\n  if (!isObject(value)) {\n    return value;\n  }\n\n  if (typeof keys === 'string') {\n    keys = [keys];\n  }\n\n  if (!Array.isArray(keys)) {\n    return value;\n  }\n\n  for (var j = 0; j < keys.length; j++) {\n    unset(value, keys[j]);\n  }\n\n  for (var key in value) {\n    if (value.hasOwnProperty(key)) {\n      value[key] = omitDeep(value[key], keys);\n    }\n  }\n\n  return value;\n};\n","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nfunction _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}\n\nmodule.exports = _asyncToGenerator;","function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    module.exports = _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    module.exports = _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nmodule.exports = _typeof;","var getPrototypeOf = require(\"./getPrototypeOf\");\n\nfunction _superPropBase(object, property) {\n  while (!Object.prototype.hasOwnProperty.call(object, property)) {\n    object = getPrototypeOf(object);\n    if (object === null) break;\n  }\n\n  return object;\n}\n\nmodule.exports = _superPropBase;","function _setPrototypeOf(o, p) {\n  module.exports = _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nmodule.exports = _setPrototypeOf;","function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  }\n}\n\nmodule.exports = _arrayWithoutHoles;","function _iterableToArray(iter) {\n  if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter);\n}\n\nmodule.exports = _iterableToArray;","function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance\");\n}\n\nmodule.exports = _nonIterableSpread;","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar mutex_1 = require(\"./mutex\");\n/**\n * Base dependency graph class.\n */\nvar Graph = /** @class */ (function () {\n    function Graph() {\n        this.nodes = {};\n        this.outgoingEdges = {};\n        this.incomingEdges = {};\n    }\n    /**\n     * Add a node to the graph.\n     * @param node Node object.\n     */\n    Graph.prototype.addNode = function (node) {\n        if (this.hasNode(node.name))\n            throw new Error(\"A node with the name of \\\"\" + node.name + \"\\\" already exists in the graph!\");\n        this.nodes[node.name] = node;\n        this.outgoingEdges[node.name] = [];\n        this.incomingEdges[node.name] = [];\n    };\n    /**\n     * Remove a node by name from the graph.\n     * @param name Node name.\n     */\n    Graph.prototype.removeNode = function (name) {\n        if (!this.hasNode(name))\n            throw new Error(\"A node with the name of \\\"\" + name + \"\\\" does not exist in the graph!\");\n        delete this.nodes[name];\n        delete this.outgoingEdges[name];\n        delete this.incomingEdges[name];\n        for (var dependent in this.incomingEdges) {\n            if (this.incomingEdges[dependent].includes(name))\n                this.incomingEdges[dependent].splice(dependent.indexOf(name), 1);\n        }\n        for (var dependency in this.outgoingEdges) {\n            if (this.outgoingEdges[dependency].includes(name))\n                this.outgoingEdges[dependency].splice(dependency.indexOf(name), 1);\n        }\n    };\n    /**\n     * Checks to see if the graph contains a Node by name.\n     * @param name Node name.\n     */\n    Graph.prototype.hasNode = function (name) {\n        return this.nodes.hasOwnProperty(name);\n    };\n    Object.defineProperty(Graph.prototype, \"size\", {\n        /**\n         * Returns the number of nodes in a graph.\n         */\n        get: function () {\n            return Object.keys(this.nodes).length;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    /**\n     * Returns the Node instance given a node name.\n     * @param name Node name.\n     */\n    Graph.prototype.getNode = function (name) {\n        if (this.hasNode(name))\n            return this.nodes[name];\n        throw new Error(\"Node \\\"\" + name + \"\\\" not found!\");\n    };\n    /**\n     *  Adds a node dependence. \"from\" is dependent on \"to\"\n     *  @param from Node name.\n     *  @param to  Node name.\n     */\n    Graph.prototype.addDependency = function (from, to) {\n        if (!this.hasNode(from))\n            throw new Error(\"Node does not exist: \" + from);\n        if (!this.hasNode(to))\n            throw new Error(\"Node does not exist: \" + to);\n        if (from === to)\n            throw new Error(\"Cannot add self dependency: \" + to);\n        if (!this.outgoingEdges[from].includes(to)) {\n            this.outgoingEdges[from].push(to);\n        }\n        if (!this.incomingEdges[to].includes(from)) {\n            this.incomingEdges[to].push(from);\n        }\n    };\n    /**\n     * Removes a node dependence. \"from\" is no longer dependent on \"to\".\n     * @param from Node name.\n     * @param to  Node name.\n     * @todo Test this function.\n     */\n    Graph.prototype.removeDependency = function (from, to) {\n        console.warn('removeDependency() has not been tested.');\n        if (!this.hasNode(from))\n            throw new Error(\"Node does not exist: \" + from);\n        if (!this.hasNode(to))\n            throw new Error(\"Node does not exist: \" + to);\n        if (from === to)\n            throw new Error(\"Cannot remove self dependency: \" + to);\n        if (!this.outgoingEdges[from].includes(to)) {\n            this.outgoingEdges[from].splice(this.outgoingEdges[from].indexOf(to), 1);\n        }\n        if (!this.incomingEdges[to].includes(from)) {\n            this.incomingEdges[to].splice(this.incomingEdges[to].indexOf(to), 1);\n        }\n    };\n    /**\n     * Get dependency node names for a Node by name. (Required nodes for this node to execute).\n     * @param name Node name.\n     */\n    Graph.prototype.dependenciesOf = function (name) {\n        return this.outgoingEdges[name];\n    };\n    /**\n     * Get dependents node names for a Node by name. (Nodes that require this node to complete).\n     * @param name Node name.\n     */\n    Graph.prototype.dependentsOf = function (name) {\n        return this.incomingEdges[name];\n    };\n    /**\n     * Breadth first search.\n     */\n    Graph.prototype.traverse = function () {\n        var _this = this;\n        // Clear all complete node mutexes.\n        Object.keys(this.nodes).map(function (name) { return _this.getNode(name).clearMutex(); });\n        // Visiting a node recursively calls visit on each node's dependents.\n        var visit = function (node) {\n            // First await all dependencies\n            return Promise.all(_this.dependenciesOf(node.name).map(function (dependencyName) { return _this.nodes[dependencyName].awaitData(); }))\n                .then(function () {\n                node.signalDependenciesReady();\n                if (_this.dependentsOf(node.name).length > 0) {\n                    // Then recursively visit all dependents\n                    return Promise.all(_this.dependentsOf(node.name).map(function (dependentName) { return visit(_this.getNode(dependentName)); }));\n                }\n                else {\n                    // node has no dependents so await data\n                    return node.awaitData();\n                }\n            });\n        };\n        // Find nodes with no dependencies\n        var rootNodeNames = Object.keys(this.nodes).filter(function (name) { return _this.dependenciesOf(name).length === 0; });\n        if (rootNodeNames.length === 0 && Object.keys(this.nodes).length > 0)\n            return Promise.reject(new Error('The graph is circular. Cannot traverse graph due to no root node.'));\n        // Start recursive traversal from root nodes.\n        return Promise.all(rootNodeNames.map(function (name) { return visit(_this.nodes[name]); }));\n    };\n    /**\n     * Clears the value of a node and the values of dependent nodes\n     * @param name Node name.\n     */\n    Graph.prototype.clearNodeAndDependents = function (name) {\n        var _this = this;\n        var node = this.getNode(name);\n        var visitAndClear = function (node) {\n            if (node.hasData()) {\n                node.clearData();\n                return Promise.all(_this.dependentsOf(node.name).map(function (dependentName) { return visitAndClear(_this.getNode(dependentName)); }));\n            }\n            else {\n                return Promise.resolve();\n            }\n        };\n        return visitAndClear(node);\n    };\n    /**\n     * Resets the graph by resetting each node in the graph.\n     */\n    Graph.prototype.reset = function () {\n        for (var name in this.nodes) {\n            this.nodes[name].reset();\n        }\n    };\n    /**\n     * Prints graph nodes and node dependents.\n     */\n    Graph.prototype.ls = function () {\n        for (var name in this.nodes) {\n            console.log(name);\n            console.log(this.dependentsOf(name));\n        }\n    };\n    return Graph;\n}());\nexports.Graph = Graph;\nvar Node = /** @class */ (function () {\n    function Node(name, promise) {\n        this.locked = false;\n        this._name = name;\n        this._promise = promise;\n    }\n    Object.defineProperty(Node.prototype, \"name\", {\n        get: function () {\n            return this._name;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    /**\n     * Await data.\n     * @returns A `Promise<T | null>` that resolves when the node's data is ready.\n     */\n    Node.prototype.awaitData = function () {\n        var _this = this;\n        if (!this.mutex) {\n            this.mutex = new mutex_1.Mutex(function () { return _this._data !== undefined; });\n        }\n        return new Promise(function (resolve, reject) {\n            _this.mutex.await(function (error) {\n                if (error)\n                    return reject(error);\n                resolve(_this._data);\n            });\n        });\n    };\n    Node.prototype.signalDependenciesReady = function () {\n        var _this = this;\n        if (!this.mutex) {\n            this.mutex = new mutex_1.Mutex(function () { return _this._data !== undefined; });\n        }\n        if (this._data === undefined) {\n            // Only allow to _promise once\n            if (this.locked === true)\n                return;\n            this.locked = true;\n            var promise = this._promise();\n            if (promise === undefined)\n                throw new Error(\"Node \\\"\" + this._name + \"\\\" has undefined promise.\");\n            promise.then(function (data) {\n                _this._data = data;\n                _this.locked = false;\n                _this.mutex.ready();\n            }).catch(function (error) {\n                _this._data = null;\n                _this.locked = false;\n                _this.mutex.ready(error);\n            });\n        }\n        else {\n            // Allow _data to be set externally from promise\n            this.mutex.ready();\n        }\n    };\n    Node.prototype.setData = function (data) {\n        this._data = data;\n        this.signalDependenciesReady();\n    };\n    /**\n     * Resets node. Clears all node data and resets its mutex.\n     */\n    Node.prototype.reset = function () {\n        this.clearData();\n        this.clearMutex();\n    };\n    Node.prototype.clearMutex = function () {\n        if (this.hasData())\n            this.mutex = undefined;\n    };\n    Node.prototype.hasData = function () {\n        return this._data !== undefined;\n    };\n    Node.prototype.clearData = function () {\n        this._data = undefined;\n    };\n    return Node;\n}());\nexports.Node = Node;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZ3JhcGguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi9zcmMvZ3JhcGgudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSxpQ0FBZ0M7QUFFaEM7O0dBRUc7QUFDSDtJQUFBO1FBQ1ksVUFBSyxHQUE2QixFQUFFLENBQUM7UUFDckMsa0JBQWEsR0FBaUMsRUFBRSxDQUFDO1FBQ2pELGtCQUFhLEdBQWlDLEVBQUUsQ0FBQztJQWlMN0QsQ0FBQztJQS9LRzs7O09BR0c7SUFDSSx1QkFBTyxHQUFkLFVBQWUsSUFBVTtRQUNyQixJQUFJLElBQUksQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQztZQUFFLE1BQU0sSUFBSSxLQUFLLENBQUMsK0JBQTRCLElBQUksQ0FBQyxJQUFJLG9DQUFnQyxDQUFDLENBQUM7UUFDcEgsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDO1FBQzdCLElBQUksQ0FBQyxhQUFhLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFHLEVBQUUsQ0FBQztRQUNuQyxJQUFJLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxFQUFFLENBQUM7SUFDdkMsQ0FBQztJQUVEOzs7T0FHRztJQUNJLDBCQUFVLEdBQWpCLFVBQWtCLElBQVk7UUFDMUIsSUFBSSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDO1lBQUUsTUFBTSxJQUFJLEtBQUssQ0FBQywrQkFBNEIsSUFBSSxvQ0FBZ0MsQ0FBQyxDQUFDO1FBQzNHLE9BQU8sSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUN4QixPQUFPLElBQUksQ0FBQyxhQUFhLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDaEMsT0FBTyxJQUFJLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQ2hDLEtBQUssSUFBTSxTQUFTLElBQUksSUFBSSxDQUFDLGFBQWEsRUFB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","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Mutex = /** @class */ (function () {\n    function Mutex(readyTest) {\n        this.readyTest = readyTest;\n    }\n    Mutex.prototype.await = function (callback) {\n        if (this.readyTest() === true) {\n            callback();\n        }\n        else {\n            this.waiting = this.waiting || [];\n            this.waiting.push(callback);\n        }\n    };\n    // called when we know what we are waiting for is ready\n    Mutex.prototype.ready = function (error) {\n        if (this.waiting)\n            this.waiting.forEach(function (callback) { return callback(error); });\n        delete this.waiting;\n    };\n    return Mutex;\n}());\nexports.Mutex = Mutex;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibXV0ZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi9zcmMvbXV0ZXgudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQTtJQUtJLGVBQW1CLFNBQXdCO1FBQ3ZDLElBQUksQ0FBQyxTQUFTLEdBQUcsU0FBUyxDQUFDO0lBQy9CLENBQUM7SUFFTSxxQkFBSyxHQUFaLFVBQWEsUUFBZ0M7UUFDekMsSUFBSSxJQUFJLENBQUMsU0FBUyxFQUFFLEtBQUssSUFBSSxFQUFFO1lBQzNCLFFBQVEsRUFBRSxDQUFDO1NBQ2Q7YUFBTTtZQUNILElBQUksQ0FBQyxPQUFPLEdBQUcsSUFBSSxDQUFDLE9BQU8sSUFBSSxFQUFFLENBQUM7WUFDbEMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUM7U0FDL0I7SUFDTCxDQUFDO0lBRUQsdURBQXVEO0lBQ2hELHFCQUFLLEdBQVosVUFBYSxLQUFhO1FBQ3RCLElBQUksSUFBSSxDQUFDLE9BQU87WUFDWixJQUFJLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxVQUFDLFFBQVEsSUFBSyxPQUFBLFFBQVEsQ0FBQyxLQUFLLENBQUMsRUFBZixDQUFlLENBQUMsQ0FBQztRQUN4RCxPQUFPLElBQUksQ0FBQyxPQUFPLENBQUM7SUFDeEIsQ0FBQztJQUNMLFlBQUM7QUFBRCxDQUFDLEFBeEJELElBd0JDO0FBeEJZLHNCQUFLIn0=","/*!\n * is-plain-object <https://github.com/jonschlinkert/is-plain-object>\n *\n * Copyright (c) 2014-2017, Jon Schlinkert.\n * Released under the MIT License.\n */\n\n'use strict';\n\nvar isObject = require('isobject');\n\nfunction isObjectObject(o) {\n  return isObject(o) === true\n    && Object.prototype.toString.call(o) === '[object Object]';\n}\n\nmodule.exports = function isPlainObject(o) {\n  var ctor,prot;\n\n  if (isObjectObject(o) === false) return false;\n\n  // If has modified constructor\n  ctor = o.constructor;\n  if (typeof ctor !== 'function') return false;\n\n  // If has modified prototype\n  prot = ctor.prototype;\n  if (isObjectObject(prot) === false) return false;\n\n  // If constructor does not have an Object-specific method\n  if (prot.hasOwnProperty('isPrototypeOf') === false) {\n    return false;\n  }\n\n  // Most likely a plain Object\n  return true;\n};\n","/*!\n * unset-value <https://github.com/jonschlinkert/unset-value>\n *\n * Copyright (c) 2015, 2017, Jon Schlinkert.\n * Released under the MIT License.\n */\n\n'use strict';\n\nvar isObject = require('isobject');\nvar has = require('has-value');\n\nmodule.exports = function unset(obj, prop) {\n  if (!isObject(obj)) {\n    throw new TypeError('expected an object.');\n  }\n  if (obj.hasOwnProperty(prop)) {\n    delete obj[prop];\n    return true;\n  }\n\n  if (has(obj, prop)) {\n    var segs = prop.split('.');\n    var last = segs.pop();\n    while (segs.length && segs[segs.length - 1].slice(-1) === '\\\\') {\n      last = segs.pop().slice(0, -1) + '.' + last;\n    }\n    while (segs.length) obj = obj[prop = segs.shift()];\n    return (delete obj[last]);\n  }\n  return true;\n};\n","/*!\n * has-value <https://github.com/jonschlinkert/has-value>\n *\n * Copyright (c) 2014-2016, Jon Schlinkert.\n * Licensed under the MIT License.\n */\n\n'use strict';\n\nvar isObject = require('isobject');\nvar hasValues = require('has-values');\nvar get = require('get-value');\n\nmodule.exports = function(obj, prop, noZero) {\n  if (isObject(obj)) {\n    return hasValues(get(obj, prop), noZero);\n  }\n  return hasValues(obj, prop);\n};\n","/*!\n * isobject <https://github.com/jonschlinkert/isobject>\n *\n * Copyright (c) 2014-2015, Jon Schlinkert.\n * Licensed under the MIT License.\n */\n\n'use strict';\n\nvar isArray = require('isarray');\n\nmodule.exports = function isObject(val) {\n  return val != null && typeof val === 'object' && isArray(val) === false;\n};\n","var toString = {}.toString;\n\nmodule.exports = Array.isArray || function (arr) {\n  return toString.call(arr) == '[object Array]';\n};\n","/*!\n * has-values <https://github.com/jonschlinkert/has-values>\n *\n * Copyright (c) 2014-2015, Jon Schlinkert.\n * Licensed under the MIT License.\n */\n\n'use strict';\n\nmodule.exports = function hasValue(o, noZero) {\n  if (o === null || o === undefined) {\n    return false;\n  }\n\n  if (typeof o === 'boolean') {\n    return true;\n  }\n\n  if (typeof o === 'number') {\n    if (o === 0 && noZero === true) {\n      return false;\n    }\n    return true;\n  }\n\n  if (o.length !== undefined) {\n    return o.length !== 0;\n  }\n\n  for (var key in o) {\n    if (o.hasOwnProperty(key)) {\n      return true;\n    }\n  }\n  return false;\n};\n","/*!\n * get-value <https://github.com/jonschlinkert/get-value>\n *\n * Copyright (c) 2014-2015, Jon Schlinkert.\n * Licensed under the MIT License.\n */\n\nmodule.exports = function(obj, prop, a, b, c) {\n  if (!isObject(obj) || !prop) {\n    return obj;\n  }\n\n  prop = toString(prop);\n\n  // allowing for multiple properties to be passed as\n  // a string or array, but much faster (3-4x) than doing\n  // `[].slice.call(arguments)`\n  if (a) prop += '.' + toString(a);\n  if (b) prop += '.' + toString(b);\n  if (c) prop += '.' + toString(c);\n\n  if (prop in obj) {\n    return obj[prop];\n  }\n\n  var segs = prop.split('.');\n  var len = segs.length;\n  var i = -1;\n\n  while (obj && (++i < len)) {\n    var key = segs[i];\n    while (key[key.length - 1] === '\\\\') {\n      key = key.slice(0, -1) + '.' + segs[++i];\n    }\n    obj = obj[key];\n  }\n  return obj;\n};\n\nfunction isObject(val) {\n  return val !== null && (typeof val === 'object' || typeof val === 'function');\n}\n\nfunction toString(val) {\n  if (!val) return '';\n  if (Array.isArray(val)) {\n    return val.join('.');\n  }\n  return val;\n}\n","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nvar runtime = (function (exports) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n    return generator;\n  }\n  exports.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n  var IteratorPrototype = {};\n  IteratorPrototype[iteratorSymbol] = function () {\n    return this;\n  };\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  if (NativeIteratorPrototype &&\n      NativeIteratorPrototype !== Op &&\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype =\n    Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;\n  GeneratorFunctionPrototype.constructor = GeneratorFunction;\n  GeneratorFunctionPrototype[toStringTagSymbol] =\n    GeneratorFunction.displayName = \"GeneratorFunction\";\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\n      prototype[method] = function(arg) {\n        return this._invoke(method, arg);\n      };\n    });\n  }\n\n  exports.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n      : false;\n  };\n\n  exports.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      if (!(toStringTagSymbol in genFun)) {\n        genFun[toStringTagSymbol] = \"GeneratorFunction\";\n      }\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n  exports.awrap = function(arg) {\n    return { __await: arg };\n  };\n\n  function AsyncIterator(generator) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value &&\n            typeof value === \"object\" &&\n            hasOwn.call(value, \"__await\")) {\n          return Promise.resolve(value.__await).then(function(value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function(err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return Promise.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration.\n          result.value = unwrapped;\n          resolve(result);\n        }, function(error) {\n          // If a rejected Promise was yielded, throw the rejection back\n          // into the async generator function so it can be handled there.\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new Promise(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n  AsyncIterator.prototype[asyncIteratorSymbol] = function () {\n    return this;\n  };\n  exports.AsyncIterator = AsyncIterator;\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  exports.async = function(innerFn, outerFn, self, tryLocsList) {\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList)\n    );\n\n    return exports.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === \"throw\") {\n        // Note: [\"return\"] must be used for ES3 parsing compatibility.\n        if (delegate.iterator[\"return\"]) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = \"return\";\n          context.arg = undefined;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === \"throw\") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // \"return\" to \"throw\", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = \"throw\";\n        context.arg = new TypeError(\n          \"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (! info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value;\n\n      // Resume execution at the desired location (see delegateYield).\n      context.next = delegate.nextLoc;\n\n      // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    }\n\n    // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  Gp[toStringTagSymbol] = \"Generator\";\n\n  // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n  Gp[iteratorSymbol] = function() {\n    return this;\n  };\n\n  Gp.toString = function() {\n    return \"[object Generator]\";\n  };\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  exports.keys = function(object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  exports.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.method = \"next\";\n      this.arg = undefined;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !! caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, \"finallyLoc\") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === \"break\" ||\n           type === \"continue\") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" ||\n          record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  };\n\n  // Regardless of whether this script is executing as a CommonJS module\n  // or not, return the runtime object so that we can declare the variable\n  // regeneratorRuntime in the outer scope, which allows this module to be\n  // injected easily by `bin/regenerator --include-runtime script.js`.\n  return exports;\n\n}(\n  // If this script is executing as a CommonJS module, use module.exports\n  // as the regeneratorRuntime namespace. Otherwise create a new empty\n  // object. Either way, the resulting object will be used to initialize\n  // the regeneratorRuntime variable at the top of this file.\n  typeof module === \"object\" ? module.exports : {}\n));\n\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  // This module should not be running in strict mode, so the above\n  // assignment should always work unless something is misconfigured. Just\n  // in case runtime.js accidentally runs in strict mode, we can escape\n  // strict mode using a global Function call. This could conceivably fail\n  // if a Content Security Policy forbids using Function, but in that case\n  // the proper solution is to fix the accidental strict mode problem. If\n  // you've misconfigured your bundler to force strict mode and applied a\n  // CSP to forbid Function, and you're not willing to fix either of those\n  // problems, please detail your unique predicament in a GitHub issue.\n  Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n}\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2020, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\nimport {resolveTreeByKey, providerHandler} from './utils.js';\nimport {EventEmitter} from '@osjs/event-emitter';\nimport merge from 'deepmerge';\nimport omitDeep from 'omit-deep';\n\n/**\n * Core\n *\n * @desc Main class for OS.js service providers and bootstrapping.\n */\nexport class CoreBase extends EventEmitter {\n\n  /**\n   * Create core instance\n   * @param {Object} defaultConfiguration Default configuration\n   * @param {Object} configuration Configuration given\n   * @param {Object} options Options\n   */\n  constructor(defaultConfiguration, configuration, options) {\n    super('Core');\n\n    // https://github.com/KyleAMathews/deepmerge#webpack-bug\n    const merger = merge.default ? merge.default : merge;\n    const omitted = omitDeep(defaultConfiguration, options.omit || []);\n\n    this.logger = console;\n    this.configuration = merger(omitted, configuration);\n    this.options = options;\n    this.booted = false;\n    this.started = false;\n    this.destroyed = false;\n    this.providers = providerHandler(this);\n  }\n\n  /**\n   * Destroy core instance\n   */\n  destroy() {\n    if (this.destroyed) {\n      return false;\n    }\n\n    this.booted = false;\n    this.destroyed = true;\n    this.started = false;\n\n    const promises = this.providers.destroy();\n\n    super.destroy();\n\n    return promises;\n  }\n\n  /**\n   * Boots up OS.js\n   */\n  boot() {\n    if (this.booted) {\n      return Promise.resolve(true);\n    }\n\n    this.started = false;\n    this.destroyed = false;\n    this.booted = true;\n\n    return this.providers.init(true)\n      .then(() => true);\n  }\n\n  /**\n   * Starts all core services\n   */\n  start() {\n    if (this.started) {\n      return Promise.resolve(true);\n    }\n\n    this.started = true;\n\n    return this.providers.init(false)\n      .then(() => true);\n  }\n\n  /**\n   * Gets a configuration entry by key\n   *\n   * @param {String} key The key to get the value from\n   * @param {*} [defaultValue] If result is undefined, return this instead\n   * @see {resolveTreeByKey}\n   * @return {*}\n   */\n  config(key, defaultValue) {\n    return key\n      ? resolveTreeByKey(this.configuration, key, defaultValue)\n      : Object.assign({}, this.configuration);\n  }\n\n  /**\n   * Register a service provider\n   *\n   * @param {Class} ref A class reference\n   * @param {Object} [options] Options for handling of provider\n   * @param {Boolean} [options.before] Load this provider early\n   * @param {Object} [options.args] Arguments to send to the constructor\n   */\n  register(ref, options = {}) {\n    this.providers.register(ref, options);\n  }\n\n  /**\n   * Register a instanciator provider\n   *\n   * @param {String} name Provider name\n   * @param {Function} callback Callback that returns an instance\n   */\n  instance(name, callback) {\n    this.providers.bind(name, false, callback);\n  }\n\n  /**\n   * Register a singleton provider\n   *\n   * @param {String} name Provider name\n   * @param {Function} callback Callback that returns an instance\n   */\n  singleton(name, callback) {\n    this.providers.bind(name, true, callback);\n  }\n\n  /**\n   * Create an instance of a provided service\n   *\n   * @param {String} name Service name\n   * @param {*} args Constructor arguments\n   * @return {*} An instance of a service\n   */\n  make(name, ...args) {\n    return this.providers.make(name, ...args);\n  }\n\n  /**\n   * Check if a service exists\n   * @param {String} name Provider name\n   * @return {Boolean}\n   */\n  has(name) {\n    return this.providers.has(name);\n  }\n}\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2020, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\nimport {Graph, Node} from 'async-dependency-graph';\n\nexport const resolveTreeByKey = (tree, key, defaultValue) => {\n  let result;\n\n  try {\n    result = key\n      .split(/\\./g)\n      .reduce((result, key) => result[key], Object.assign({}, tree));\n  } catch (e) { /* noop */ }\n\n  return typeof result === 'undefined' ? defaultValue : result;\n};\n\nconst each = (list, method) => Promise.all(list.map(p => {\n  try {\n    return p.provider[method]();\n  } catch (e) {\n    return Promise.reject(e);\n  }\n}))\n  .catch(err => console.warn(err));\n\nexport const providerHandler = (core) => {\n  let instances = {};\n  let providers = [];\n  let registry = [];\n\n  const createGraph = (list, method) => {\n    const graph = new Graph();\n    const provides = list.map(p => typeof p.provider.provides === 'function' ? p.provider.provides() : []);\n    const dependsOnIndex = wants => provides.findIndex(arr => arr.some(a => wants.indexOf(a) !== -1));\n\n    list.forEach((p, i) => {\n      graph.addNode(new Node(String(i), () => {\n        try {\n          return Promise.resolve(p.provider[method]());\n        } catch (e) {\n          return Promise.reject(e);\n        }\n      }));\n    });\n\n    list.forEach((p, i) => {\n      const dependsOptions = p.options.depends instanceof Array\n        ? p.options.depends\n        : [];\n\n      const dependsInstance = typeof p.provider.depends === 'function'\n        ? p.provider.depends()\n        : [];\n\n      const depends = [...dependsOptions, ...dependsInstance];\n      if (depends.length > 0) {\n        const dindex = dependsOnIndex(depends);\n        if (dindex !== -1) {\n          graph.addDependency(String(i), String(dindex));\n        }\n      }\n    });\n\n    return graph.traverse()\n      .catch(e => console.warn(e));\n  };\n\n  const handle = list => createGraph(list, 'init')\n    .then(() => createGraph(list, 'start'));\n\n\n  const has = name => registry.findIndex(p => p.name === name) !== -1;\n\n  const destroy = () => {\n    const result = each(providers, 'destroy');\n\n    instances = {};\n    registry = [];\n\n    return result;\n  };\n\n  const init = (before) =>\n    handle(before\n      ? providers.filter(p => p.options.before)\n      : providers.filter(p => !p.options.before));\n\n  const register = (ref, options) => {\n    try {\n      providers.push({\n        provider: new ref(core, options.args),\n        options\n      });\n    } catch (e) {\n      console.error('Provider register error', e);\n    }\n  };\n\n  const bind = (name, singleton, callback) => {\n    core.logger.info('Provider binding', name);\n\n    registry.push({\n      singleton,\n      name,\n      make(...args) {\n        return callback(...args);\n      }\n    });\n  };\n\n  const make = (name, ...args) => {\n    const found = registry.find(p => p.name === name);\n    if (!found) {\n      throw new Error(`Provider '${name}' not found`);\n    }\n\n    if (!found.singleton) {\n      return found.make(...args);\n    }\n\n    if (!instances[name]) {\n      if (found) {\n        instances[name] = found.make(...args);\n      }\n    }\n\n    return instances[name];\n  };\n\n  return {register, init, bind, has, make, destroy};\n};\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2020, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\n/**\n * Service Provider Interface\n *\n * @desc Provides a basic Service Provider interface for OS.js\n *\n * @interface\n */\nexport class ServiceProvider {\n\n  /**\n   * Constructor\n   * @param {Core} core Core reference\n   */\n  constructor(core, options = {}) {\n    /**\n     * Core instance reference\n     * @type {Core}\n     */\n    this.core = core;\n    this.options = options;\n  }\n\n  /**\n   * A list of services this provider can create\n   * @return {string[]}\n   */\n  provides() {\n    return [];\n  }\n\n  /**\n   * A list of services this provider depends on\n   * @return {string[]}\n   */\n  depends() {\n    return [];\n  }\n\n  /**\n   * Initializes provider\n   */\n  async init() {\n  }\n\n  /**\n   * Starts provider\n   */\n  start() {\n  }\n\n  /**\n   * Destroys provider\n   */\n  destroy() {\n  }\n\n}\n","/**\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2020, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\nexport * from './src/core.js';\nexport * from './src/service-provider.js';\nexport {EventHandler as EventEmitter} from '@osjs/event-emitter';\n","var superPropBase = require(\"./superPropBase\");\n\nfunction _get(target, property, receiver) {\n  if (typeof Reflect !== \"undefined\" && Reflect.get) {\n    module.exports = _get = Reflect.get;\n  } else {\n    module.exports = _get = function _get(target, property, receiver) {\n      var base = superPropBase(target, property);\n      if (!base) return;\n      var desc = Object.getOwnPropertyDescriptor(base, property);\n\n      if (desc.get) {\n        return desc.get.call(receiver);\n      }\n\n      return desc.value;\n    };\n  }\n\n  return _get(target, property, receiver || target);\n}\n\nmodule.exports = _get;","function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nmodule.exports = _assertThisInitialized;","var arrayWithHoles = require(\"./arrayWithHoles\");\n\nvar iterableToArrayLimit = require(\"./iterableToArrayLimit\");\n\nvar unsupportedIterableToArray = require(\"./unsupportedIterableToArray\");\n\nvar nonIterableRest = require(\"./nonIterableRest\");\n\nfunction _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}\n\nmodule.exports = _slicedToArray;","'use strict';\n\nvar isMergeableObject = function isMergeableObject(value) {\n\treturn isNonNullObject(value)\n\t\t&& !isSpecial(value)\n};\n\nfunction isNonNullObject(value) {\n\treturn !!value && typeof value === 'object'\n}\n\nfunction isSpecial(value) {\n\tvar stringValue = Object.prototype.toString.call(value);\n\n\treturn stringValue === '[object RegExp]'\n\t\t|| stringValue === '[object Date]'\n\t\t|| isReactElement(value)\n}\n\n// see https://github.com/facebook/react/blob/b5ac963fb791d1298e7f396236383bc955f916c1/src/isomorphic/classic/element/ReactElement.js#L21-L25\nvar canUseSymbol = typeof Symbol === 'function' && Symbol.for;\nvar REACT_ELEMENT_TYPE = canUseSymbol ? Symbol.for('react.element') : 0xeac7;\n\nfunction isReactElement(value) {\n\treturn value.$$typeof === REACT_ELEMENT_TYPE\n}\n\nfunction emptyTarget(val) {\n\treturn Array.isArray(val) ? [] : {}\n}\n\nfunction cloneUnlessOtherwiseSpecified(value, options) {\n\treturn (options.clone !== false && options.isMergeableObject(value))\n\t\t? deepmerge(emptyTarget(value), value, options)\n\t\t: value\n}\n\nfunction defaultArrayMerge(target, source, options) {\n\treturn target.concat(source).map(function(element) {\n\t\treturn cloneUnlessOtherwiseSpecified(element, options)\n\t})\n}\n\nfunction getMergeFunction(key, options) {\n\tif (!options.customMerge) {\n\t\treturn deepmerge\n\t}\n\tvar customMerge = options.customMerge(key);\n\treturn typeof customMerge === 'function' ? customMerge : deepmerge\n}\n\nfunction getEnumerableOwnPropertySymbols(target) {\n\treturn Object.getOwnPropertySymbols\n\t\t? Object.getOwnPropertySymbols(target).filter(function(symbol) {\n\t\t\treturn target.propertyIsEnumerable(symbol)\n\t\t})\n\t\t: []\n}\n\nfunction getKeys(target) {\n\treturn Object.keys(target).concat(getEnumerableOwnPropertySymbols(target))\n}\n\nfunction propertyIsOnObject(object, property) {\n\ttry {\n\t\treturn property in object\n\t} catch(_) {\n\t\treturn false\n\t}\n}\n\n// Protects from prototype poisoning and unexpected merging up the prototype chain.\nfunction propertyIsUnsafe(target, key) {\n\treturn propertyIsOnObject(target, key) // Properties are safe to merge if they don't exist in the target yet,\n\t\t&& !(Object.hasOwnProperty.call(target, key) // unsafe if they exist up the prototype chain,\n\t\t\t&& Object.propertyIsEnumerable.call(target, key)) // and also unsafe if they're nonenumerable.\n}\n\nfunction mergeObject(target, source, options) {\n\tvar destination = {};\n\tif (options.isMergeableObject(target)) {\n\t\tgetKeys(target).forEach(function(key) {\n\t\t\tdestination[key] = cloneUnlessOtherwiseSpecified(target[key], options);\n\t\t});\n\t}\n\tgetKeys(source).forEach(function(key) {\n\t\tif (propertyIsUnsafe(target, key)) {\n\t\t\treturn\n\t\t}\n\n\t\tif (propertyIsOnObject(target, key) && options.isMergeableObject(source[key])) {\n\t\t\tdestination[key] = getMergeFunction(key, options)(target[key], source[key], options);\n\t\t} else {\n\t\t\tdestination[key] = cloneUnlessOtherwiseSpecified(source[key], options);\n\t\t}\n\t});\n\treturn destination\n}\n\nfunction deepmerge(target, source, options) {\n\toptions = options || {};\n\toptions.arrayMerge = options.arrayMerge || defaultArrayMerge;\n\toptions.isMergeableObject = options.isMergeableObject || isMergeableObject;\n\t// cloneUnlessOtherwiseSpecified is added to `options` so that custom arrayMerge()\n\t// implementations can use it. The caller may not replace it.\n\toptions.cloneUnlessOtherwiseSpecified = cloneUnlessOtherwiseSpecified;\n\n\tvar sourceIsArray = Array.isArray(source);\n\tvar targetIsArray = Array.isArray(target);\n\tvar sourceAndTargetTypesMatch = sourceIsArray === targetIsArray;\n\n\tif (!sourceAndTargetTypesMatch) {\n\t\treturn cloneUnlessOtherwiseSpecified(source, options)\n\t} else if (sourceIsArray) {\n\t\treturn options.arrayMerge(target, source, options)\n\t} else {\n\t\treturn mergeObject(target, source, options)\n\t}\n}\n\ndeepmerge.all = function deepmergeAll(array, options) {\n\tif (!Array.isArray(array)) {\n\t\tthrow new Error('first argument should be an array')\n\t}\n\n\treturn array.reduce(function(prev, next) {\n\t\treturn deepmerge(prev, next, options)\n\t}, {})\n};\n\nvar deepmerge_1 = deepmerge;\n\nmodule.exports = deepmerge_1;\n","var setPrototypeOf = require(\"./setPrototypeOf\");\n\nvar isNativeReflectConstruct = require(\"./isNativeReflectConstruct\");\n\nfunction _construct(Parent, args, Class) {\n  if (isNativeReflectConstruct()) {\n    module.exports = _construct = Reflect.construct;\n  } else {\n    module.exports = _construct = function _construct(Parent, args, Class) {\n      var a = [null];\n      a.push.apply(a, args);\n      var Constructor = Function.bind.apply(Parent, a);\n      var instance = new Constructor();\n      if (Class) setPrototypeOf(instance, Class.prototype);\n      return instance;\n    };\n  }\n\n  return _construct.apply(null, arguments);\n}\n\nmodule.exports = _construct;","function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    module.exports = _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    module.exports = _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nmodule.exports = _typeof;","!function(n,t){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define([],t):\"object\"==typeof exports?exports.simplejsonconf=t():n.simplejsonconf=t()}(window,function(){return function(n){var t={};function r(e){if(t[e])return t[e].exports;var o=t[e]={i:e,l:!1,exports:{}};return n[e].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=n,r.c=t,r.d=function(n,t,e){r.o(n,t)||Object.defineProperty(n,t,{enumerable:!0,get:e})},r.r=function(n){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(n,\"__esModule\",{value:!0})},r.t=function(n,t){if(1&t&&(n=r(n)),8&t)return n;if(4&t&&\"object\"==typeof n&&n&&n.__esModule)return n;var e=Object.create(null);if(r.r(e),Object.defineProperty(e,\"default\",{enumerable:!0,value:n}),2&t&&\"string\"!=typeof n)for(var o in n)r.d(e,o,function(t){return n[t]}.bind(null,o));return e},r.n=function(n){var t=n&&n.__esModule?function(){return n.default}:function(){return n};return r.d(t,\"a\",t),t},r.o=function(n,t){return Object.prototype.hasOwnProperty.call(n,t)},r.p=\"\",r(r.s=3)}([function(n,t){function r(n){return(r=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&\"function\"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?\"symbol\":typeof n})(n)}function e(t){return\"function\"==typeof Symbol&&\"symbol\"===r(Symbol.iterator)?n.exports=e=function(n){return r(n)}:n.exports=e=function(n){return n&&\"function\"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?\"symbol\":r(n)},e(t)}n.exports=e},function(n,t,r){var e=r(5),o=r(6),u=r(7);n.exports=function(n,t){return e(n)||o(n,t)||u()}},function(n,t){n.exports=function(n,t,r){return t in n?Object.defineProperty(n,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[t]=r,n}},function(n,t,r){n.exports=r(4)},function(n,t,r){\"use strict\";r.r(t);var e=r(1),o=r.n(e),u=r(2),i=r.n(u),f=r(0),c=r.n(f),a=function(n){return void 0===n?n:JSON.parse(JSON.stringify(n))},l=function(n){return n.split(/\\./g)},s=function(n){return void 0===n||null===n},p=function(n){return!!n&&\"object\"===c()(n)&&!Array.isArray(n)},y=function n(t,r){if(p(t)&&p(r)){for(var e in r)p(r[e])?(t[e]&&c()(t[e])===c()(r[e])||Object.assign(t,i()({},e,{})),n(t[e],r[e])):Object.assign(t,i()({},e,r[e]));return t}return r},b=function(n,t,r){if(s(t))return n;var e;try{e=l(t).reduce(function(n,t){return n[t]},Object.assign({},n))}catch(n){}return void 0===e?r:e},d=function(n,t,r){var e=l(t),o=e.length;if(r)for(var u=n,i=0;i<o;i++){var f=e[i];void 0===u[f]&&(u[f]={}),u=u[f]}var c=1===o?e[0]:e.pop();return[1===o?n:b(n,e.join(\".\")),c]};t.default=function(n){var t,r=function(n){return t=a(n)};return r(n),{get:function(n,r){return a(b(t,n,r))},set:function(n,r){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return a(function(n,t,r,e){if(!1!==e.parse)try{r=void 0===r?r:JSON.parse(r)}catch(n){}if(s(t)){var u=!1!==e.merge?y(n,r):r;return Object.assign(n,u)}var i=d(n,t,!0),f=o()(i,2),c=f[0],a=f[1];s(c[a])&&(c[a]={});var l=!1!==e.merge?y(c[a],r):r;return c[a]=l,l}(t,n,r,e))},push:function(n,r){return a(function(n,t,r){var e=b(n,t);if(!Array.isArray(e))throw new Error(\"The key '\".concat(t,\"' is not an array\"));return e.push(r),e}(t,n,r))},remove:function(n){return a(function(n,t){var r=d(n,t),e=o()(r,2),u=e[0],i=e[1];return void 0!==u[i]&&(u instanceof Array?u.splice(u.indexOf(u[i]),1):delete u[i]),u}(t,n))},reset:function(t){return a(r(t||n))},toString:function(){return JSON.stringify(t)}}}},function(n,t){n.exports=function(n){if(Array.isArray(n))return n}},function(n,t){n.exports=function(n,t){var r=[],e=!0,o=!1,u=void 0;try{for(var i,f=n[Symbol.iterator]();!(e=(i=f.next()).done)&&(r.push(i.value),!t||r.length!==t);e=!0);}catch(n){o=!0,u=n}finally{try{e||null==f.return||f.return()}finally{if(o)throw u}}return r}},function(n,t){n.exports=function(){throw new TypeError(\"Invalid attempt to destructure non-iterable instance\")}}])});\n//# sourceMappingURL=main.js.map","function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nmodule.exports = _arrayLikeToArray;","var arrayLikeToArray = require(\"./arrayLikeToArray\");\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(n);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}\n\nmodule.exports = _unsupportedIterableToArray;","function _setPrototypeOf(o, p) {\n  module.exports = _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nmodule.exports = _setPrototypeOf;","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","/*\nCopyright (c) 2014, Yahoo! Inc. All rights reserved.\nCopyrights licensed under the New BSD License.\nSee the accompanying LICENSE file for terms.\n*/\n\n'use strict';\n\nexports.match = matchQuery;\nexports.parse = parseQuery;\n\n// -----------------------------------------------------------------------------\n\nvar RE_MEDIA_QUERY     = /(?:(only|not)?\\s*([^\\s\\(\\)]+)(?:\\s*and)?\\s*)?(.+)?/i,\n    RE_MQ_EXPRESSION   = /\\(\\s*([^\\s\\:\\)]+)\\s*(?:\\:\\s*([^\\s\\)]+))?\\s*\\)/,\n    RE_MQ_FEATURE      = /^(?:(min|max)-)?(.+)/,\n    RE_LENGTH_UNIT     = /(em|rem|px|cm|mm|in|pt|pc)?$/,\n    RE_RESOLUTION_UNIT = /(dpi|dpcm|dppx)?$/;\n\nfunction matchQuery(mediaQuery, values) {\n    return parseQuery(mediaQuery).some(function (query) {\n        var inverse = query.inverse;\n\n        // Either the parsed or specified `type` is \"all\", or the types must be\n        // equal for a match.\n        var typeMatch = query.type === 'all' || values.type === query.type;\n\n        // Quit early when `type` doesn't match, but take \"not\" into account.\n        if ((typeMatch && inverse) || !(typeMatch || inverse)) {\n            return false;\n        }\n\n        var expressionsMatch = query.expressions.every(function (expression) {\n            var feature  = expression.feature,\n                modifier = expression.modifier,\n                expValue = expression.value,\n                value    = values[feature];\n\n            // Missing or falsy values don't match.\n            if (!value) { return false; }\n\n            switch (feature) {\n                case 'orientation':\n                case 'scan':\n                    return value.toLowerCase() === expValue.toLowerCase();\n\n                case 'width':\n                case 'height':\n                case 'device-width':\n                case 'device-height':\n                    expValue = toPx(expValue);\n                    value    = toPx(value);\n                    break;\n\n                case 'resolution':\n                    expValue = toDpi(expValue);\n                    value    = toDpi(value);\n                    break;\n\n                case 'aspect-ratio':\n                case 'device-aspect-ratio':\n                case /* Deprecated */ 'device-pixel-ratio':\n                    expValue = toDecimal(expValue);\n                    value    = toDecimal(value);\n                    break;\n\n                case 'grid':\n                case 'color':\n                case 'color-index':\n                case 'monochrome':\n                    expValue = parseInt(expValue, 10) || 1;\n                    value    = parseInt(value, 10) || 0;\n                    break;\n            }\n\n            switch (modifier) {\n                case 'min': return value >= expValue;\n                case 'max': return value <= expValue;\n                default   : return value === expValue;\n            }\n        });\n\n        return (expressionsMatch && !inverse) || (!expressionsMatch && inverse);\n    });\n}\n\nfunction parseQuery(mediaQuery) {\n    return mediaQuery.split(',').map(function (query) {\n        query = query.trim();\n\n        var captures    = query.match(RE_MEDIA_QUERY),\n            modifier    = captures[1],\n            type        = captures[2],\n            expressions = captures[3] || '',\n            parsed      = {};\n\n        parsed.inverse = !!modifier && modifier.toLowerCase() === 'not';\n        parsed.type    = type ? type.toLowerCase() : 'all';\n\n        // Split expressions into a list.\n        expressions = expressions.match(/\\([^\\)]+\\)/g) || [];\n\n        parsed.expressions = expressions.map(function (expression) {\n            var captures = expression.match(RE_MQ_EXPRESSION),\n                feature  = captures[1].toLowerCase().match(RE_MQ_FEATURE);\n\n            return {\n                modifier: feature[1],\n                feature : feature[2],\n                value   : captures[2]\n            };\n        });\n\n        return parsed;\n    });\n}\n\n// -- Utilities ----------------------------------------------------------------\n\nfunction toDecimal(ratio) {\n    var decimal = Number(ratio),\n        numbers;\n\n    if (!decimal) {\n        numbers = ratio.match(/^(\\d+)\\s*\\/\\s*(\\d+)$/);\n        decimal = numbers[1] / numbers[2];\n    }\n\n    return decimal;\n}\n\nfunction toDpi(resolution) {\n    var value = parseFloat(resolution),\n        units = String(resolution).match(RE_RESOLUTION_UNIT)[1];\n\n    switch (units) {\n        case 'dpcm': return value / 2.54;\n        case 'dppx': return value * 96;\n        default    : return value;\n    }\n}\n\nfunction toPx(length) {\n    var value = parseFloat(length),\n        units = String(length).match(RE_LENGTH_UNIT)[1];\n\n    switch (units) {\n        case 'em' : return value * 16;\n        case 'rem': return value * 16;\n        case 'cm' : return value * 96 / 2.54;\n        case 'mm' : return value * 96 / 2.54 / 10;\n        case 'in' : return value * 96;\n        case 'pt' : return value * 72;\n        case 'pc' : return value * 72 / 12;\n        default   : return value;\n    }\n}\n","/*\n * Date Format 1.2.3\n * (c) 2007-2009 Steven Levithan <stevenlevithan.com>\n * MIT license\n *\n * Includes enhancements by Scott Trenda <scott.trenda.net>\n * and Kris Kowal <cixar.com/~kris.kowal/>\n *\n * Accepts a date, a mask, or a date and a mask.\n * Returns a formatted version of the given date.\n * The date defaults to the current date/time.\n * The mask defaults to dateFormat.masks.default.\n */\n\n(function(global) {\n  'use strict';\n\n  var dateFormat = (function() {\n      var token = /d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\\1?|[LloSZWN]|\"[^\"]*\"|'[^']*'/g;\n      var timezone = /\\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\\d{4})?)\\b/g;\n      var timezoneClip = /[^-+\\dA-Z]/g;\n  \n      // Regexes and supporting functions are cached through closure\n      return function (date, mask, utc, gmt) {\n  \n        // You can't provide utc if you skip other args (use the 'UTC:' mask prefix)\n        if (arguments.length === 1 && kindOf(date) === 'string' && !/\\d/.test(date)) {\n          mask = date;\n          date = undefined;\n        }\n  \n        date = date || new Date;\n  \n        if(!(date instanceof Date)) {\n          date = new Date(date);\n        }\n  \n        if (isNaN(date)) {\n          throw TypeError('Invalid date');\n        }\n  \n        mask = String(dateFormat.masks[mask] || mask || dateFormat.masks['default']);\n  \n        // Allow setting the utc/gmt argument via the mask\n        var maskSlice = mask.slice(0, 4);\n        if (maskSlice === 'UTC:' || maskSlice === 'GMT:') {\n          mask = mask.slice(4);\n          utc = true;\n          if (maskSlice === 'GMT:') {\n            gmt = true;\n          }\n        }\n  \n        var _ = utc ? 'getUTC' : 'get';\n        var d = date[_ + 'Date']();\n        var D = date[_ + 'Day']();\n        var m = date[_ + 'Month']();\n        var y = date[_ + 'FullYear']();\n        var H = date[_ + 'Hours']();\n        var M = date[_ + 'Minutes']();\n        var s = date[_ + 'Seconds']();\n        var L = date[_ + 'Milliseconds']();\n        var o = utc ? 0 : date.getTimezoneOffset();\n        var W = getWeek(date);\n        var N = getDayOfWeek(date);\n        var flags = {\n          d:    d,\n          dd:   pad(d),\n          ddd:  dateFormat.i18n.dayNames[D],\n          dddd: dateFormat.i18n.dayNames[D + 7],\n          m:    m + 1,\n          mm:   pad(m + 1),\n          mmm:  dateFormat.i18n.monthNames[m],\n          mmmm: dateFormat.i18n.monthNames[m + 12],\n          yy:   String(y).slice(2),\n          yyyy: y,\n          h:    H % 12 || 12,\n          hh:   pad(H % 12 || 12),\n          H:    H,\n          HH:   pad(H),\n          M:    M,\n          MM:   pad(M),\n          s:    s,\n          ss:   pad(s),\n          l:    pad(L, 3),\n          L:    pad(Math.round(L / 10)),\n          t:    H < 12 ? dateFormat.i18n.timeNames[0] : dateFormat.i18n.timeNames[1],\n          tt:   H < 12 ? dateFormat.i18n.timeNames[2] : dateFormat.i18n.timeNames[3],\n          T:    H < 12 ? dateFormat.i18n.timeNames[4] : dateFormat.i18n.timeNames[5],\n          TT:   H < 12 ? dateFormat.i18n.timeNames[6] : dateFormat.i18n.timeNames[7],\n          Z:    gmt ? 'GMT' : utc ? 'UTC' : (String(date).match(timezone) || ['']).pop().replace(timezoneClip, ''),\n          o:    (o > 0 ? '-' : '+') + pad(Math.floor(Math.abs(o) / 60) * 100 + Math.abs(o) % 60, 4),\n          S:    ['th', 'st', 'nd', 'rd'][d % 10 > 3 ? 0 : (d % 100 - d % 10 != 10) * d % 10],\n          W:    W,\n          N:    N\n        };\n  \n        return mask.replace(token, function (match) {\n          if (match in flags) {\n            return flags[match];\n          }\n          return match.slice(1, match.length - 1);\n        });\n      };\n    })();\n\n  dateFormat.masks = {\n    'default':               'ddd mmm dd yyyy HH:MM:ss',\n    'shortDate':             'm/d/yy',\n    'mediumDate':            'mmm d, yyyy',\n    'longDate':              'mmmm d, yyyy',\n    'fullDate':              'dddd, mmmm d, yyyy',\n    'shortTime':             'h:MM TT',\n    'mediumTime':            'h:MM:ss TT',\n    'longTime':              'h:MM:ss TT Z',\n    'isoDate':               'yyyy-mm-dd',\n    'isoTime':               'HH:MM:ss',\n    'isoDateTime':           'yyyy-mm-dd\\'T\\'HH:MM:sso',\n    'isoUtcDateTime':        'UTC:yyyy-mm-dd\\'T\\'HH:MM:ss\\'Z\\'',\n    'expiresHeaderFormat':   'ddd, dd mmm yyyy HH:MM:ss Z'\n  };\n\n  // Internationalization strings\n  dateFormat.i18n = {\n    dayNames: [\n      'Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat',\n      'Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'\n    ],\n    monthNames: [\n      'Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec',\n      'January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'\n    ],\n    timeNames: [\n      'a', 'p', 'am', 'pm', 'A', 'P', 'AM', 'PM'\n    ]\n  };\n\nfunction pad(val, len) {\n  val = String(val);\n  len = len || 2;\n  while (val.length < len) {\n    val = '0' + val;\n  }\n  return val;\n}\n\n/**\n * Get the ISO 8601 week number\n * Based on comments from\n * http://techblog.procurios.nl/k/n618/news/view/33796/14863/Calculate-ISO-8601-week-and-year-in-javascript.html\n *\n * @param  {Object} `date`\n * @return {Number}\n */\nfunction getWeek(date) {\n  // Remove time components of date\n  var targetThursday = new Date(date.getFullYear(), date.getMonth(), date.getDate());\n\n  // Change date to Thursday same week\n  targetThursday.setDate(targetThursday.getDate() - ((targetThursday.getDay() + 6) % 7) + 3);\n\n  // Take January 4th as it is always in week 1 (see ISO 8601)\n  var firstThursday = new Date(targetThursday.getFullYear(), 0, 4);\n\n  // Change date to Thursday same week\n  firstThursday.setDate(firstThursday.getDate() - ((firstThursday.getDay() + 6) % 7) + 3);\n\n  // Check if daylight-saving-time-switch occurred and correct for it\n  var ds = targetThursday.getTimezoneOffset() - firstThursday.getTimezoneOffset();\n  targetThursday.setHours(targetThursday.getHours() - ds);\n\n  // Number of weeks between target Thursday and first Thursday\n  var weekDiff = (targetThursday - firstThursday) / (86400000*7);\n  return 1 + Math.floor(weekDiff);\n}\n\n/**\n * Get ISO-8601 numeric representation of the day of the week\n * 1 (for Monday) through 7 (for Sunday)\n * \n * @param  {Object} `date`\n * @return {Number}\n */\nfunction getDayOfWeek(date) {\n  var dow = date.getDay();\n  if(dow === 0) {\n    dow = 7;\n  }\n  return dow;\n}\n\n/**\n * kind-of shortcut\n * @param  {*} val\n * @return {String}\n */\nfunction kindOf(val) {\n  if (val === null) {\n    return 'null';\n  }\n\n  if (val === undefined) {\n    return 'undefined';\n  }\n\n  if (typeof val !== 'object') {\n    return typeof val;\n  }\n\n  if (Array.isArray(val)) {\n    return 'array';\n  }\n\n  return {}.toString.call(val)\n    .slice(8, -1).toLowerCase();\n};\n\n\n\n  if (typeof define === 'function' && define.amd) {\n    define(function () {\n      return dateFormat;\n    });\n  } else if (typeof exports === 'object') {\n    module.exports = dateFormat;\n  } else {\n    global.dateFormat = dateFormat;\n  }\n})(this);\n","var arrayLikeToArray = require(\"./arrayLikeToArray\");\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}\n\nmodule.exports = _arrayWithoutHoles;","function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}\n\nmodule.exports = _iterableToArray;","function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nmodule.exports = _nonIterableSpread;","var getPrototypeOf = require(\"./getPrototypeOf\");\n\nfunction _superPropBase(object, property) {\n  while (!Object.prototype.hasOwnProperty.call(object, property)) {\n    object = getPrototypeOf(object);\n    if (object === null) break;\n  }\n\n  return object;\n}\n\nmodule.exports = _superPropBase;","function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nmodule.exports = _arrayWithHoles;","function _iterableToArrayLimit(arr, i) {\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nmodule.exports = _iterableToArrayLimit;","function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nmodule.exports = _nonIterableRest;","function _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nmodule.exports = _isNativeReflectConstruct;","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2020, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\nconst methods = ['debug', 'log', 'info', 'warn', 'error'];\nlet middleware = [];\n\nconst reduce = (name, input) => middleware\n  .reduce((current, m) => m(name, ...current), input);\n\nconst bind = (fn, thisArg) =>\n  typeof thisArg[fn].bind === 'function'\n    ? thisArg[fn].bind(thisArg)\n    : Function.prototype.bind.apply(thisArg[fn], thisArg);\n\nconst bindMethod = fn => {\n  const log = bind(fn, console);\n  if (middleware.length > 0) {\n    return (...args) => log(...reduce(fn, args));\n  }\n\n  return log;\n};\n\nconst assignMethods = (thisArg) => methods\n  .forEach(m => thisArg[m] = bindMethod(m));\n\nconst instance = {\n  addMiddleware: m => {\n    middleware.push(m);\n    assignMethods(instance);\n  },\n  clearMiddleware: () => {\n    middleware = [];\n    assignMethods(instance);\n  }\n};\n\nassignMethods(instance);\n\nexport default instance;\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2020, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\nimport {EventEmitter} from '@osjs/event-emitter';\nimport logger from './logger';\n\nconst eventNames = ['open', 'close', 'message', 'error'];\n\n/**\n * Application Socket\n *\n * @desc This is just an abstraction above the standard browser provided `WebSocket` class.\n * Since this class implements the EventHandler, use the `.on('event')` pattern instead of `.onevent`.\n *\n */\nexport default class Websocket extends EventEmitter {\n\n  /**\n   * Create a new Websocket\n   * @param {string} uri Connection URI\n   * @param {object} options Websocket options\n   */\n  constructor(name, uri, options = {}) {\n    logger.debug('Websocket::constructor()', name, uri);\n\n    super('Websocket@' + name);\n\n    this.uri = uri;\n    this.closed = false;\n    this.connected = false;\n    this.connecting = false;\n    this.reconnecting = false;\n    this.connectfailed = false;\n    this.options = {\n      reconnect: true,\n      interval: 1000,\n      open: true,\n      ...options\n    };\n\n    /**\n     * The Websocket\n     * @type {WebSocket}\n     */\n    this.connection = null;\n\n    this._attachEvents();\n\n    if (this.options.open) {\n      this.open();\n    }\n  }\n\n  /**\n   * Destroys the current connection\n   */\n  _destroyConnection() {\n    if (!this.connection) {\n      return;\n    }\n\n    eventNames.forEach(name => {\n      this.connection[`on${name}`] = () => {};\n    });\n\n    this.reconnecting = clearInterval(this.reconnecting);\n    this.connection = null;\n  }\n\n  /**\n   * Attaches internal events\n   */\n  _attachEvents() {\n    this.on('open', ev => {\n      const reconnected = !!this.reconnecting;\n\n      this.connected = true;\n      this.reconnecting = false;\n      this.connectfailed = false;\n      this.reconnecting = clearInterval(this.reconnecting);\n\n      this.emit('connected', ev, reconnected);\n    });\n\n    this.on('close', ev => {\n      if (!this.connected && !this.connectfailed) {\n        this.emit('failed', ev);\n\n        this.connectfailed = true;\n      }\n\n      clearInterval(this.reconnecting);\n\n      this._destroyConnection();\n\n      this.connected = false;\n\n      if (this.options.reconnect) {\n        this.reconnecting = setInterval(() => {\n          if (!this.closed) {\n            this.open();\n          }\n        }, this.options.interval);\n      }\n\n      this.emit('disconnected', ev, this.closed);\n    });\n  }\n\n  /**\n   * Opens the connection\n   * @param {boolean} [reconnect=false] Force reconnection\n   */\n  open(reconnect = false) {\n    if (this.connection && !reconnect) {\n      return;\n    }\n\n    this._destroyConnection();\n\n    this.reconnecting = clearInterval(this.reconnecting);\n    this.connection = new WebSocket(this.uri);\n    this.closed = false;\n\n    eventNames.forEach(name => {\n      this.connection[`on${name}`] = (...args) => this.emit(name, ...args);\n    });\n  }\n\n  /**\n   * Wrapper for sending data\n   */\n  send(...args) {\n    return this.connection.send(...args);\n  }\n\n  /**\n   * Wrapper for closing\n   */\n  close(...args) {\n    this.closed = true;\n\n    return this.connection.close(...args);\n  }\n\n}\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2020, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\nimport logger from '../logger';\n\nconst retval = (fn, ...args) => {\n  try {\n    const result = fn(...args);\n    if (typeof result === 'boolean') {\n      return result;\n    }\n  } catch (e) {\n    logger.warn('droppable value parsing error', e);\n  }\n\n  return true;\n};\n\nconst getDataTransfer = (ev, type) => {\n  let files = [];\n  let data;\n\n  if (ev.dataTransfer) {\n    files = ev.dataTransfer.files\n      ? Array.from(ev.dataTransfer.files)\n      : [];\n\n    try {\n      const transfer = ev.dataTransfer.getData(type);\n\n      try {\n        if (type === 'application/json') {\n          data = typeof transfer === 'undefined' ? transfer : JSON.parse(transfer);\n        } else {\n          data = transfer;\n        }\n      } catch (e) {\n        data = transfer;\n        logger.warn('droppable dataTransfer parsing error', e);\n      }\n    } catch (e) {\n      logger.warn('droppable dataTransfer parsing error', e);\n    }\n  }\n\n  return {files, data};\n};\n\nconst setDataTransfer = (type, effect, data, setDragImage) => {\n  const hasDragImage = typeof setDragImage === 'function';\n  const transferData = type === 'application/json'\n    ? JSON.stringify(data)\n    : data;\n\n  return (ev, el, options) => {\n    if (ev.dataTransfer) {\n      if (ev.dataTransfer.setDragImage && hasDragImage) {\n        try {\n          setDragImage(ev, el, options);\n        } catch (e) {\n          logger.warn('draggable dragstart setDragImage error', e);\n        }\n      }\n\n      try {\n        ev.dataTransfer.effectAllowed = effect;\n        ev.dataTransfer.setData(type, transferData);\n      } catch (e) {\n        logger.warn('draggable dragstart dataTransfer error', e);\n      }\n    }\n  };\n};\n\n/**\n * Creates a \"draggable\" element\n * @param {Element} el The DOM element to apply to\n * @param {string} [options.type=application/json] Content Type\n * @param {string} [options.effect=move] DnD effect (cursor)\n * @param {Function} [options.ondragstart] Callback to event (ev) => {}\n * @param {Function} [options.ondragend] Callback to event (ev) => {}\n * @param {Function} [options.setDragImage] Set custom drag image (browser dependent)\n * @return {object} An object with a destructor\n */\nexport const draggable = (el, options = {}) => {\n  const {type, effect, data, ondragstart, ondragend, setDragImage} = {\n    type: 'application/json',\n    effect: 'move',\n    ondragstart: () => true,\n    ondragend: () => true,\n    setDragImage: null,\n    ...options\n  };\n\n  const setter = setDataTransfer(type, effect, data, setDragImage);\n\n  const dragstart = ev => {\n    el.setAttribute('aria-grabbed', 'true');\n    setter(ev, el, options);\n    return ondragstart(ev);\n  };\n\n  const dragend = ev => {\n    el.setAttribute('aria-grabbed', 'false');\n\n    return ondragend(ev);\n  };\n\n  const destroy = () => {\n    el.removeAttribute('draggable');\n    el.removeAttribute('aria-grabbed');\n    el.removeEventListener('dragstart', dragstart);\n    el.removeEventListener('dragend', dragend);\n    el.classList.remove('osjs__draggable');\n  };\n\n  el.setAttribute('draggable', 'true');\n  el.setAttribute('aria-grabbed', 'false');\n  el.addEventListener('dragstart', dragstart);\n  el.addEventListener('dragend', dragend);\n  el.classList.add('osjs__draggable');\n\n  return {destroy};\n};\n\n/**\n * Creates a \"droppable\" element\n * @param {Element} el The DOM element to apply to\n * @param {string} [options.type=application/json] Content Type\n * @param {string} [options.effect=move] DnD effect (cursor)\n * @param {Function} [options.ondragenter] Callback to event (ev) => {}\n * @param {Function} [options.ondragover] Callback to event (ev) => {}\n * @param {Function} [options.ondragleave] Callback to event (ev) => {}\n * @param {Function} [options.ondrop] Callback to event (ev, data, files) => {}\n * @return {object} An object with a destructor\n */\nexport const droppable = (el, options = {}) => {\n  const {type, effect, ondragenter, ondragover, ondragleave, ondrop} = {\n    type: 'application/json',\n    effect: 'move',\n    ondragenter: () => true,\n    ondragover: () => true,\n    ondragleave: () => true,\n    ondrop: () => true,\n    ...options\n  };\n\n  const dragenter = ev => ondragenter(ev);\n\n  const dragleave = ev => {\n    el.classList.remove('osjs__drop');\n\n    return retval(ondragleave, ev);\n  };\n\n  const dragover = ev => {\n    ev.preventDefault();\n\n    const inside = el.contains(ev.target);\n\n    if (!inside) {\n      el.classList.remove('osjs__drop');\n      return false;\n    }\n\n    ev.stopPropagation();\n    ev.dataTransfer.dropEffect = effect;\n    el.classList.add('osjs__drop');\n\n    return retval(ondragover, ev);\n  };\n\n  const drop = ev => {\n    const {files, data} = getDataTransfer(ev, type);\n\n    ev.stopPropagation();\n    ev.preventDefault();\n    el.classList.remove('osjs__drop');\n\n    return retval(ondrop, ev, data, files);\n  };\n\n  const destroy = () => {\n    el.removeAttribute('aria-dropeffect', effect);\n    el.removeEventListener('dragenter', dragenter);\n    el.removeEventListener('dragover', dragover);\n    el.removeEventListener('dragleave', dragleave);\n    el.removeEventListener('drop', drop);\n    el.classList.remove('osjs__droppable');\n  };\n\n  el.setAttribute('aria-dropeffect', effect);\n  el.addEventListener('dragenter', dragenter);\n  el.addEventListener('dragover', dragover);\n  el.addEventListener('dragleave', dragleave);\n  el.addEventListener('drop', drop);\n  el.classList.add('osjs__droppable');\n\n  return {destroy};\n};\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2020, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\nimport logger from '../logger';\n\nconst supportsNativeNotification = 'Notification' in window;\n\n/**\n * Creates a new CSS DOM element\n * @param {Element} root Root node\n * @param {string} src Source\n * @return {Promise<ScriptElement, Error>}\n */\nexport const style = (root, src) => new Promise((resolve, reject) => {\n  const el = document.createElement('link');\n  el.setAttribute('rel', 'stylesheet');\n  el.setAttribute('type', 'text/css');\n  el.onload = () => resolve(el);\n  el.onerror = (err) => reject(err);\n  el.setAttribute('href', src);\n\n  root.appendChild(el);\n\n  return el;\n});\n\n/**\n * Creates a new Script DOM element\n * @param {Element} root Root node\n * @param {string} src Source\n * @return {Promise<StyleElement>, Error>}\n */\nexport const script = (root, src) => new Promise((resolve, reject) => {\n  const el = document.createElement('script');\n  el.onreadystatechange = function() {\n    if ((this.readyState === 'complete' || this.readyState === 'loaded')) {\n      resolve(el);\n    }\n  };\n  el.onerror = (err) => reject(err);\n  el.onload = () => resolve(el);\n  el.src = src;\n\n  root.appendChild(el);\n\n  return el;\n});\n\n\n/**\n * Escape text so it is \"safe\" for HTML usage\n * @param {string} text Input text\n * @return {string}\n */\nexport const escapeHtml = (text) => {\n  const div = document.createElement('div');\n  div.innerHTML = text;\n  return div.textContent;\n};\n\n/**\n * Serialize an object to CSS\n * @param {object} obj Object\n * @return {string} CSS text\n */\nexport const createCssText = (obj) => Object.keys(obj)\n  .map(k => [k, k.replace(/([a-z])([A-Z])/g, '$1-$2').toLowerCase()])\n  .map(k => `${k[1]}: ${obj[k[0]]}`)\n  .join(';');\n\n/**\n * Inserts a tab in the given event target\n * @param {Event} ev DOM Event\n */\nexport const handleTabOnTextarea = ev => {\n  const input = ev.target;\n  let {selectionStart, selectionEnd, value} = input;\n\n  input.value = value.substring(0, selectionStart)\n    + '\\t'\n    + value.substring(selectionEnd, value.length);\n\n  selectionStart++;\n\n  input.selectionStart = selectionStart;\n  input.selectionEnd = selectionStart;\n};\n\n/*\n * Get active element if belonging to root\n * @param {Element} root DOM Element\n * @return {Element|null}\n */\nexport const getActiveElement = (root) => {\n  if (root) {\n    const ae = document.activeElement;\n\n    return root.contains(ae) ? ae : null;\n  }\n\n  return null;\n};\n\n/**\n * Checks if passive events is supported\n * @link https://github.com/WICG/EventListenerOptions/blob/gh-pages/explainer.md\n * @return {boolean}\n */\nexport const supportsPassive = (function() {\n  let supportsPassive = false;\n  try {\n    const opts = Object.defineProperty({}, 'passive', {\n      get: () => (supportsPassive = true)\n    });\n\n    window.addEventListener('testPassive', null, opts);\n    window.removeEventListener('testPassive', null, opts);\n  } catch (e) {/* noop */}\n\n  return () => supportsPassive;\n})();\n\n/**\n * Plays a sound\n * @param {string} src Sound source\n * @param {object} [options] Options\n * @return {Promise<HTMLAudioElement>}\n */\nexport const playSound = (src, options = {}) => {\n  const opts = {\n    volume: 1.0,\n    ...options\n  };\n\n  const audio = new Audio();\n  audio.voule = opts.volume;\n  audio.src = src;\n\n  try {\n    const p = audio.play();\n    if (p instanceof Promise) {\n      return p.then(() => audio)\n        .catch(err => logger.warn('Failed to play sound', src, err));\n    }\n  } catch (e) {\n    logger.warn('Failed to play sound', src, e);\n  }\n\n  return Promise.resolve(audio);\n};\n\n/**\n * Gets supported media types\n * @return {object}\n */\nexport const supportedMedia = () => {\n  const videoFormats = {\n    mp4: 'video/mp4',\n    ogv: 'video/ogg'\n  };\n\n  const audioFormats = {\n    mp3: 'audio/mpeg',\n    mp4: 'audio/mp4',\n    oga: 'audio/ogg'\n  };\n\n  const reduce = (list, elem) => Object.keys(list)\n    .reduce((result, format) => {\n      return {\n        [format]: elem.canPlayType(list[format]) === 'probably',\n        ...result\n      };\n    }, {});\n\n  return {\n    audio: reduce(audioFormats, document.createElement('audio')),\n    video: reduce(videoFormats, document.createElement('video'))\n  };\n};\n\n/**\n * Gets if CSS transitions is supported\n * @return {boolean}\n */\nexport const supportsTransition = (function() {\n  const el = document.createElement('div');\n  const tests = ['WebkitTransition', 'MozTransition', 'OTransition', 'transition'];\n  const supported = tests.some(name => typeof el.style[name] !== 'undefined');\n\n  return () => supported;\n})();\n\n/**\n * Creates a native notification\n * @param {object} options Notification options\n * @param {Function} [onclick] Callback on click\n * @return {Promise<window.Notification>}\n */\nexport const createNativeNotification = (options, onclick) => {\n  const Notif = window.Notification;\n\n  const create = () => {\n    const notification = new Notif(\n      options.title,\n      {\n        body: options.message,\n        icon: options.icon\n      }\n    );\n\n    notification.onclick = onclick;\n\n    return notification;\n  };\n\n  if (supportsNativeNotification) {\n    if (Notif.permission === 'granted') {\n      return Promise.resolve(create());\n    } else if (Notif.permission !== 'denied') {\n      return new Promise((resolve, reject) => {\n        Notif.requestPermission(permission => {\n          return permission === 'granted' ? resolve(true) : reject(permission);\n        });\n      }).then(create);\n    }\n  }\n\n  return Promise.reject('Unsupported');\n};\n","export default __webpack_public_path__ + \"881c86876af63b732063d7bdd51bb226.png\";","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2020, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\nimport * as mediaQuery from 'css-mediaquery';\nimport defaultIcon from '../styles/logo-blue-32x32.png';\nimport logger from '../logger';\n\nconst CASCADE_DISTANCE = 10;\nconst MINIMUM_WIDTH = 100;\nconst MINIMUM_HEIGHT = 100;\n\n/*\n * Creates window attributes from an object\n */\nexport const createAttributes = attrs => ({\n  classNames: [],\n  modal: false,\n  ontop: false,\n  gravity: false,\n  moveable: true,\n  resizable: true,\n  focusable: true,\n  maximizable: true,\n  minimizable: true,\n  sessionable: true,\n  closeable: true,\n  header: true,\n  controls: true,\n  visibility: 'global',\n  shadowDOM: false,\n  clamp: true,\n  mediaQueries: {\n    small: 'screen and (max-width: 640px)',\n    medium: 'screen and (min-width: 640px) and (max-width: 1024px)',\n    big: 'screen and (min-width: 1024px)'\n  },\n  minDimension: {\n    width: MINIMUM_WIDTH,\n    height: MINIMUM_HEIGHT\n  },\n  maxDimension: {\n    width: -1,\n    height: -1\n  },\n  ...attrs\n});\n\n/*\n * Creates window state from an object\n */\nexport const createState = (state, options, attrs) => ({\n  title: options.title || options.id,\n  icon: options.icon || defaultIcon,\n  media: null,\n  moving: false,\n  resizing: false,\n  loading: false,\n  focused: false,\n  maximized: false,\n  minimized: false,\n  zIndex: 1,\n  styles: {},\n  position: {\n    left: null,\n    top: null,\n    ...options.position\n  },\n  dimension: {\n    width: Math.max(attrs.minDimension.width, MINIMUM_WIDTH),\n    height: Math.max(attrs.minDimension.height, MINIMUM_HEIGHT),\n    ...options.dimension\n  },\n  ...state\n});\n\n/*\n * Clamps position to viewport\n */\nexport const clampPosition = (rect, {dimension, position}) => {\n  const maxLeft = rect.width - dimension.width;\n  const maxTop = rect.height - dimension.height + rect.top;\n\n  return {\n    left: Math.min(maxLeft, position.left),\n    top: Math.max(rect.top, Math.min(maxTop, position.top))\n  };\n};\n\n/*\n * Window rendering callback function\n */\nexport const renderCallback = (win, callback) => {\n  if (typeof callback === 'function') {\n    if (win.attributes.shadowDOM) {\n      try {\n        const mode = typeof win.attributes.shadowDOM === 'string'\n          ? win.attributes.shadowDOM\n          : 'open';\n\n        const shadow = win.$content.attachShadow({mode});\n\n        callback(shadow, win);\n\n        return;\n      } catch (e) {\n        logger.warn('Shadow DOM not supported?', e);\n      }\n    }\n\n    callback(win.$content, win);\n  }\n};\n\n/*\n * Gets new position based on \"gravity\"\n */\nexport const positionFromGravity = (win, rect, gravity) => {\n  let {left, top} = win.state.position;\n\n  if (gravity === 'center') {\n    left = (rect.width / 2) - (win.state.dimension.width / 2);\n    top = (rect.height / 2) - (win.state.dimension.height / 2);\n  } else if (gravity) {\n    let hasVertical =  gravity.match(/top|bottom/);\n    let hasHorizontal = gravity.match(/left|rigth/);\n\n    if (gravity.match(/top/)) {\n      top = rect.top;\n    } else if (gravity.match(/bottom/)) {\n      top = rect.height - (win.state.dimension.height) + rect.top;\n    }\n\n    if (gravity.match(/left/)) {\n      left = rect.left;\n    } else if (gravity.match(/right/)) {\n      left = rect.width - (win.state.dimension.width);\n    }\n\n    if (!hasVertical && gravity.match(/center/)) {\n      top = (rect.height / 2) - (win.state.dimension.height / 2);\n    } else if (!hasHorizontal && gravity.match(/center/)) {\n      left = (rect.width / 2) - (win.state.dimension.width / 2);\n    }\n  }\n\n  return {left, top};\n};\n\n/*\n * Gets new dimension based on container\n */\nexport const dimensionFromElement = (win, rect, container) => {\n  const innerBox = (container.parentNode.classList.contains('osjs-gui')\n    ? container.parentNode\n    : container).getBoundingClientRect();\n\n  const outerBox = win.$content.getBoundingClientRect();\n  const diffY = Math.ceil(outerBox.height - innerBox.height);\n  const diffX = Math.ceil(outerBox.width - innerBox.width);\n  const topHeight = win.$header.offsetHeight;\n\n  const {left, top} = win.state.position;\n  const min = win.attributes.minDimension;\n  const max = win.attributes.maxDimension;\n\n  let width = Math.max(container.offsetWidth + diffX, min.width);\n  let height = Math.max(container.offsetHeight + diffY + topHeight, min.height);\n\n  if (max.width > 0) {\n    width = Math.min(width, max.width);\n  }\n\n  if (max.height > 0) {\n    height = Math.min(height, max.height);\n  }\n\n  width = Math.max(width, container.offsetWidth);\n  height = Math.max(height, container.offsetHeight);\n\n  if (rect) {\n    width = Math.min(width, rect.width - left);\n    height = Math.min(height, rect.height - top);\n  }\n\n  return {width, height};\n};\n\n/*\n * Transforms vector values (ex float to integer)\n */\nexport const transformVectors = (rect, {width, height}, {top, left}) => {\n  const transform = (val, attr) => {\n    if (!isNaN(val)) {\n      return Number.isInteger(val)\n        ? val\n        : Math.round(rect[attr] * parseFloat(val));\n    }\n\n    return val;\n  };\n\n  return {\n    dimension: {\n      width: transform(width, 'width'),\n      height: transform(height, 'height')\n    },\n    position: {\n      top: transform(top, 'height'),\n      left: transform(left, 'width')\n    }\n  };\n};\n\n/*\n * Creates a clamper for resize/move\n */\nconst clamper = win => {\n  const {maxDimension, minDimension} = win.attributes;\n  const {position, dimension} = win.state;\n\n  const maxPosition = {\n    left: position.left + dimension.width - minDimension.width,\n    top: position.top + dimension.height - minDimension.height\n  };\n\n  const clamp = (min, max, current) => {\n    const value = min === -1 ? current : Math.max(min, current);\n    return max === -1 ? value : Math.min(max, value);\n  };\n\n  return (width, height, top, left) => ({\n    width: clamp(minDimension.width, maxDimension.width, width),\n    height: clamp(minDimension.height, maxDimension.height, height),\n    top: clamp(-1, maxPosition.top, top),\n    left: clamp(-1, maxPosition.left, left)\n  });\n};\n\n/*\n * Creates a resize handler\n */\nexport const resizer = (win, handle) => {\n  const clamp = clamper(win);\n  const {position, dimension} = win.state;\n  const directions = handle.getAttribute('data-direction').split('');\n  const going = dir => directions.indexOf(dir) !== -1;\n  const xDir = going('e') ? 1 : (going('w') ? -1 : 0);\n  const yDir = going('s') ? 1 : (going('n') ? -1 : 0);\n\n  return (diffX, diffY) => {\n    const width = dimension.width + (diffX * xDir);\n    const height = dimension.height + (diffY * yDir);\n    const top = yDir === -1 ? position.top + diffY : position.top;\n    const left = xDir === -1 ? position.left + diffX : position.left;\n\n    return clamp(width, height, top, left);\n  };\n};\n\n/*\n * Creates a movement handler\n */\nexport const mover = (win, rect) => {\n  const {position} = win.state;\n\n  return (diffX, diffY) => {\n    const top = Math.max(position.top + diffY, rect.top);\n    const left = position.left + diffX;\n\n    return {top, left};\n  };\n};\n\n/*\n * Calculates a new initial position for window\n */\nexport const getCascadePosition = (win, rect, pos) => {\n  const startX = CASCADE_DISTANCE + rect.left;\n  const startY = CASCADE_DISTANCE + rect.top;\n  const distance = CASCADE_DISTANCE;\n  const wrap = CASCADE_DISTANCE * 2;\n\n  const newX = startX + ((win.wid % wrap) * distance);\n  const newY = startY + ((win.wid % wrap) * distance);\n  const position = (key, value) => typeof pos[key] === 'number' && Number.isInteger(pos[key])\n    ? Math.max(rect[key], pos[key])\n    : value;\n\n  return {top: position('top', newY), left: position('left', newX)};\n};\n\nconst getScreenOrientation = screen => screen && screen.orientation\n  ? screen.orientation.type\n  : window.matchMedia('(orientation: portrait)') ? 'portrait' : 'landscape';\n\n/*\n * Gets a media query name from a map\n */\nexport const getMediaQueryName = (win) => Object.keys(win.attributes.mediaQueries)\n  .filter(name => mediaQuery.match(win.attributes.mediaQueries[name], {\n    type: 'screen',\n    orientation: getScreenOrientation(window.screen),\n    width: win.$element.offsetWidth || win.state.dimension.width,\n    height: win.$element.offsetHeight || win.state.dimension.height\n  }))\n  .pop();\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2020, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\nimport {EventEmitter} from '@osjs/event-emitter';\nimport {droppable} from './utils/dnd';\nimport {escapeHtml, createCssText, supportsTransition, getActiveElement} from './utils/dom';\nimport {\n  createAttributes,\n  createState,\n  clampPosition,\n  renderCallback,\n  transformVectors,\n  positionFromGravity,\n  dimensionFromElement\n} from './utils/windows';\nimport logger from './logger';\n\n/**\n * Window dimension definition\n * @property {number} width Width in pixels\n * @property {number} height Height in pixels\n * @typedef WindowDimension\n */\n\n/**\n * Window position definition\n * @property {number} left Left in pixels\n * @property {number} top Top in pixels\n * @typedef WindowPosition\n */\n\n/**\n * Window attributes definition\n *\n * @desc Contains attributes for a window.\n * Media queries will add a given name as a `data-media` attribute to the window\n * root DOM element.\n *\n * @link https://developer.mozilla.org/en-US/docs/Web/CSS/Media_Queries/Testing_media_queries\n *\n * @property {string[]} [classNames=[]] A list of class names\n * @property {boolean} [ontop=false] If always on top\n * @property {string} [gravity] Gravity (center/top/left/right/bottom or any combination)\n * @property {boolean} [resizable=true] If resizable\n * @property {boolean} [focusable=true] If focusable\n * @property {boolean} [maximizable=true] If window if maximizable\n * @property {boolean} [minimizable=true] If minimizable\n * @property {boolean} [moveable=true] If moveable\n * @property {boolean} [closeable=true] If closeable\n * @property {boolean} [header=true] Show header\n * @property {boolean} [controls=true] Show controls\n * @property {string} [visibility=global] Global visibility, 'restricted' to hide from window lists etc.\n * @property {boolean} [clamp=true] Clamp the window position upon creation\n * @property {WindowDimension} [minDimension] Minimum dimension\n * @property {WindowDimension} [maxDimension] Maximum dimension\n * @property {Map<string,string>} [mediaQueries] A map of matchMedia to name\n * @typedef WindowAttributes\n */\n\n/**\n * Window state definition\n * @property {string} title Title\n * @property {string} icon Icon\n * @property {boolean} [moving=false] If moving\n * @property {boolean} [resizing=false] If resizing\n * @property {boolean} [loading=false] If loading\n * @property {boolean} [focused=false] If focused\n * @property {boolean} [maximized=false] If maximized\n * @property {boolean} [mimimized=false] If mimimized\n * @property {boolean} [modal=false] If modal to the parent\n * @property {number} [zIndex=1] The z-index (auto calculated)\n * @property {WindowPosition} [position] Position\n * @property {WindowDimension} [dimension] Dimension\n * @typedef WindowState\n */\n\nconst ONTOP_ZINDEX = 8388635;\n\nlet windows = [];\nlet windowCount = 0;\nlet nextZindex = 1;\nlet lastWindow = null;\n\n/*\n * Default window template\n */\nconst TEMPLATE = `<div class=\"osjs-window-inner\">\n  <div class=\"osjs-window-header\">\n    <div class=\"osjs-window-icon\">\n      <div></div>\n    </div>\n    <div class=\"osjs-window-title\"></div>\n    <div class=\"osjs-window-button\" data-action=\"minimize\">\n      <div></div>\n    </div>\n    <div class=\"osjs-window-button\" data-action=\"maximize\">\n      <div></div>\n    </div>\n    <div class=\"osjs-window-button\" data-action=\"close\">\n      <div></div>\n    </div>\n  </div>\n  <div class=\"osjs-window-content\">\n  </div>\n  <div class=\"osjs-window-resize\" data-direction=\"n\"></div>\n  <div class=\"osjs-window-resize\" data-direction=\"nw\"></div>\n  <div class=\"osjs-window-resize\" data-direction=\"w\"></div>\n  <div class=\"osjs-window-resize\" data-direction=\"sw\"></div>\n  <div class=\"osjs-window-resize\" data-direction=\"s\"></div>\n  <div class=\"osjs-window-resize\" data-direction=\"se\"></div>\n  <div class=\"osjs-window-resize\" data-direction=\"e\"></div>\n  <div class=\"osjs-window-resize\" data-direction=\"ne\"></div>\n</div>`.replace(/\\n\\s+/g, '').trim();\n\n/**\n * Window\n *\n * @desc Class for a OS.js Window\n */\nexport default class Window extends EventEmitter {\n\n  /**\n   * Create window\n   *\n   * @param {Core} core Core reference\n   * @param {object} options Options\n   * @param {string} options.id Window Id (not globaly unique)\n   * @param {string} [options.title] Window Title\n   * @param {string} [options.icon] Window Icon\n   * @param {Window} [options.parent] The parent Window reference\n   * @param {string|Function} [options.template] The Window HTML template (or function with signature (el, win) for programatic construction)\n   * @param {Function} [options.ondestroy] A callback function when window destructs to interrupt the procedure\n   * @param {WindowPosition|string} [options.position] Window position\n   * @param {WindowDimension} [options.dimension] Window dimension\n   * @param {WindowAttributes} [options.attributes] Apply Window attributes\n   * @param {WindowState} [options.state] Apply Window state\n   */\n  constructor(core, options = {}) {\n    options = {\n      id: null,\n      title: null,\n      parent: null,\n      template: null,\n      ondestroy: null,\n      attributes: {},\n      position: {},\n      dimension: {},\n      state: {},\n      ...options\n    };\n\n    logger.debug('Window::constructor()', options);\n\n    super('Window@' + options.id);\n\n    if (typeof options.position === 'string') {\n      options.attributes.gravity = options.position;\n      options.position = {};\n    }\n\n    /**\n     * The Window ID\n     * @type {string}\n     */\n    this.id = options.id;\n\n    /**\n     * The Window ID\n     * @type {Number}\n     */\n    this.wid = ++windowCount;\n\n    /**\n     * Parent Window reference\n     * @type {Window}\n     */\n    this.parent = options.parent;\n\n    /**\n     * Child windows (via 'parent')\n     * @type {Window[]}\n     */\n    this.children = [];\n\n    /**\n     * Core instance reference\n     * @type {Core}\n     */\n    this.core = core;\n\n    /**\n     * The window destruction state\n     * @type {boolean}\n     */\n    this.destroyed = false;\n\n    /**\n     * The window rendered state\n     * @type {boolean}\n     */\n    this.rendered = false;\n\n    /**\n     * The window attributes\n     * @type {WindowAttributes}\n     */\n    this.attributes = createAttributes(options.attributes);\n\n    /**\n     * The window state\n     * @type {WindowState}\n     */\n    this.state = createState(options.state, options, this.attributes);\n\n    /**\n     * The window container\n     * @type {Element}\n     */\n    this.$element = document.createElement('div');\n\n    /**\n     * The content container\n     * @type {Element}\n     */\n    this.$content = null;\n\n    /**\n     * The header container\n     * @type {Element}\n     */\n    this.$header = null;\n\n    /**\n     * The icon container\n     * @type {Element}\n     */\n    this.$icon = null;\n\n    /**\n     * The title container\n     * @type {Element}\n     */\n    this.$title = null;\n\n    /**\n     * Internal variable to signal not to use default position\n     * given by user (used for restore)\n     * @type {boolean}\n     */\n    this._preventDefaultPosition = false;\n\n    /**\n     * Internal timeout reference used for triggering the loading\n     * overlay.\n     * @type {boolean}\n     */\n    this._loadingDebounce = null;\n\n    /**\n     * The window template\n     * @type {string|Function}\n     */\n    this._template = options.template;\n\n    /**\n     * Custom destructor callback\n     * @type {Function}\n     */\n    this._ondestroy = options.ondestroy || (() => true);\n\n    windows.push(this);\n  }\n\n  /**\n   * Destroy window\n   */\n  destroy() {\n    if (this.destroyed) {\n      return;\n    }\n\n    if (typeof this._ondestroy === 'function' && this._ondestroy() === false) {\n      return;\n    }\n\n    this.destroyed = true;\n\n    logger.debug('Window::destroy()');\n\n    this.emit('destroy', this);\n    this.core.emit('osjs/window:destroy', this);\n\n    this.children.forEach(w => w.destroy());\n\n    if (this.$element) {\n      this.$element.remove();\n    }\n\n    if (lastWindow === this) {\n      lastWindow = null;\n    }\n\n    const foundIndex = windows.findIndex(w => w === this);\n    if (foundIndex !== -1) {\n      windows.splice(foundIndex, 1);\n    }\n\n    this.children = [];\n    this.parent = null;\n    this.$element = null;\n    this.$content = null;\n    this.$header = null;\n    this.$icon = null;\n    this.$title = null;\n  }\n\n  /**\n   * Initialize window\n   */\n  init() {\n    if (this.inited) {\n      return this;\n    }\n\n    if (this.parent) {\n      // Assign the window if it is a child\n      this.on('destroy', () => {\n        const foundIndex = this.parent.children.findIndex(w => w === this);\n        if (foundIndex !== -1) {\n          this.parent.children.splice(foundIndex, 1);\n        }\n      });\n\n      this.parent.children.push(this);\n    }\n\n    this._initTemplate();\n    this._initBehavior();\n\n\n    this.inited = true;\n    this.emit('init', this);\n    this.core.emit('osjs/window:create', this);\n\n    return this;\n  }\n\n  /**\n   * Initializes window template\n   */\n  _initTemplate() {\n    const tpl = this.core.config('windows.template') || TEMPLATE;\n    if (this._template) {\n      this.$element.innerHTML = typeof this._template === 'function'\n        ? this._template(this, tpl)\n        : this._template;\n    } else {\n      this.$element.innerHTML = tpl;\n    }\n\n    this.$content = this.$element.querySelector('.osjs-window-content');\n    this.$header = this.$element.querySelector('.osjs-window-header');\n    this.$icon = this.$element.querySelector('.osjs-window-icon > div');\n    this.$title = this.$element.querySelector('.osjs-window-title');\n  }\n\n  /**\n   * Initializes window behavior\n   */\n  _initBehavior() {\n    // Transform percentages in dimension to pixels etc\n    if (this.core.has('osjs/desktop')) {\n      const rect = this.core.make('osjs/desktop').getRect();\n      const {dimension, position} = transformVectors(rect, this.state.dimension, this.state.position);\n      this.state.dimension = dimension;\n      this.state.position = position;\n    }\n\n    // Behavior\n    const behavior = this.core.make('osjs/window-behavior');\n    if (behavior) {\n      behavior.init(this);\n    }\n\n    // DnD functionality\n    const d = droppable(this.$element, {\n      ondragenter: (...args) => this.emit('dragenter', ...args, this),\n      ondragover: (...args) => this.emit('dragover', ...args, this),\n      ondragleave: (...args) => this.emit('dragleave', ...args, this),\n      ondrop: (...args) => this.emit('drop', ...args, this)\n    });\n\n    this.on('destroy', () => d.destroy());\n  }\n\n  /**\n   * Updates the window buttons\n   */\n  _updateButtons() {\n    const hideButton = action =>\n      this.$header.querySelector(`.osjs-window-button[data-action=${action}]`)\n        .style.display = 'none';\n\n    const buttonmap = {\n      maximizable: 'maximize',\n      minimizable: 'minimize',\n      closeable: 'close'\n    };\n\n    if (this.attributes.controls) {\n      Object.keys(buttonmap)\n        .forEach(key => {\n          if (!this.attributes[key]) {\n            hideButton(buttonmap[key]);\n          }\n        });\n    } else {\n      Array.from(this.$header.querySelectorAll('.osjs-window-button'))\n        .forEach(el => el.style.display = 'none');\n    }\n  }\n\n  /**\n   * Checks the modal state of the window upon render\n   */\n  _checkModal() {\n    // TODO: Global modal\n    if (this.parent) {\n      if (this.attributes.modal) {\n        this.on('render', () => this.parent.setState('loading', true));\n        this.on('destroy', () => this.parent.setState('loading', false));\n      }\n\n      this.on('destroy', () => this.parent.focus());\n    }\n  }\n\n  /**\n   * Sets the initial class names\n   */\n  _setClassNames() {\n    const classNames = ['osjs-window', ...this.attributes.classNames];\n    if (this.id) {\n      classNames.push(`Window_${this.id}`);\n    }\n\n    classNames.filter(val => !!val)\n      .forEach((val) => this.$element.classList.add(val));\n  }\n\n  /**\n   * Render window\n   * @param {Function} [callback] Callback when window DOM has been constructed\n   * @return {Window} this instance\n   */\n  render(callback = function() {}) {\n    if (this.rendered) {\n      return this;\n    } else if (!this.inited) {\n      this.init();\n    }\n\n    this._setClassNames();\n    this._updateButtons();\n    this._updateDOM();\n    this._checkModal();\n\n    if (!this._preventDefaultPosition) {\n      this.gravitate(this.attributes.gravity);\n    }\n\n    // Clamp the initial window position to viewport\n    if (this.attributes.clamp) {\n      this.clampToViewport(false);\n    }\n\n    this.core.$root.appendChild(this.$element);\n\n    renderCallback(this, callback);\n\n    this.rendered = true;\n    this.setNextZindex(true);\n\n    setTimeout(() => {\n      this.emit('render', this);\n      this.core.emit('osjs/window:render', this);\n    }, 1);\n\n    return this;\n  }\n\n  /**\n   * Close the window\n   */\n  close() {\n    if (this.destroyed) {\n      return false;\n    }\n\n    this.emit('close', this);\n\n    this.destroy();\n\n    return true;\n  }\n\n  /**\n   * Focus the window\n   * @return {boolean}\n   */\n  focus() {\n    if (!this.state.minimized && this._toggleState('focused', true, 'focus')) {\n      this._focus();\n\n      return true;\n    }\n\n    return false;\n  }\n\n  /**\n   * Internal for focus\n   */\n  _focus() {\n    if (lastWindow && lastWindow !== this) {\n      lastWindow.blur();\n    }\n\n    lastWindow = this;\n\n    this.setNextZindex();\n  }\n\n  /**\n   * Blur (un-focus) the window\n   * @return {boolean}\n   */\n  blur() {\n    // Forces blur-ing of browser input element belonging to this window\n    const activeElement = getActiveElement(this.$element);\n    if (activeElement) {\n      activeElement.blur();\n    }\n\n    return this._toggleState('focused', false, 'blur');\n  }\n\n  /**\n   * Minimize (hide) the window\n   * @return {boolean}\n   */\n  minimize() {\n    if (this.attributes.minimizable) {\n      if (this._toggleState('minimized', true, 'minimize')) {\n        this.blur();\n\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  /**\n   * Raise (un-minimize) the window\n   * @return {boolean}\n   */\n  raise() {\n    return this._toggleState('minimized', false, 'raise');\n  }\n\n  /**\n   * Maximize the window\n   * @return {boolean}\n   */\n  maximize() {\n    if (this.attributes.maximizable) {\n      return this._maximize(true);\n    }\n\n    return false;\n  }\n\n  /**\n   * Restore (un-maximize) the window\n   * @return {boolean}\n   */\n  restore() {\n    return this._maximize(false);\n  }\n\n  /**\n   * Internal for Maximize or restore\n   * @param {boolean} toggle Maximize or restore\n   * @return {boolean}\n   */\n  _maximize(toggle) {\n    if (this._toggleState('maximized', toggle, toggle ? 'maximize' : 'restore')) {\n      const emit = () => this.emit('resized', {\n        width: this.$element ? this.$element.offsetWidth : -1,\n        height: this.$element ? this.$element.offsetHeight : -1\n      }, this);\n\n      if (supportsTransition()) {\n        this.once('transitionend', emit);\n      } else {\n        emit();\n      }\n\n      return true;\n    }\n\n    return false;\n  }\n\n  /**\n   * Resize to fit to current container\n   * @param {Element} [container] The DOM element to use\n   */\n  resizeFit(container) {\n    container = container || this.$content.firstChild;\n\n    if (container) {\n      const rect = this.core.has('osjs/desktop')\n        ? this.core.make('osjs/desktop').getRect()\n        : null;\n\n      const {width, height} = dimensionFromElement(this, rect, container);\n      if (!isNaN(width) && !isNaN(height)) {\n        this.setDimension({width, height});\n      }\n    }\n  }\n\n  /**\n   * Clamps the position to viewport\n   * @param {boolean} [update=true] Update DOM\n   */\n  clampToViewport(update = true) {\n    if (!this.core.has('osjs/desktop')) {\n      return;\n    }\n\n    const rect = this.core.make('osjs/desktop').getRect();\n\n    this.state.position = {\n      ...this.state.position,\n      ...clampPosition(rect, this.state)\n    };\n\n    if (update) {\n      this._updateDOM();\n    }\n  }\n\n  /**\n   * Set the Window icon\n   * @param {string} uri Icon URI\n   */\n  setIcon(uri) {\n    this.state.icon = uri;\n\n    this._updateDOM();\n  }\n\n  /**\n   * Set the Window title\n   * @param {string} title Title\n   */\n  setTitle(title) {\n    this.state.title = title || '';\n\n    this._updateDOM();\n\n    this.core.emit('osjs/window:change', this, 'title', title);\n  }\n\n  /**\n   * Set the Window dimension\n   * @param {WindowDimension} dimension The dimension\n   */\n  setDimension(dimension) {\n    const {width, height} = {...this.state.dimension, ...dimension || {}};\n\n    this.state.dimension.width = width;\n    this.state.dimension.height = height;\n\n    this._updateDOM();\n  }\n\n  /**\n   * Set the Window position\n   * @param {WindowPosition} position The position\n   * @param {boolean} [preventDefault=false] Prevents any future position setting in init procedure\n   */\n  setPosition(position, preventDefault = false) {\n    const {left, top} = {...this.state.position, ...position || {}};\n\n    this.state.position.top = top;\n    this.state.position.left = left;\n\n    if (preventDefault) {\n      this._preventDefaultPosition = true;\n    }\n\n    this._updateDOM();\n  }\n\n  /**\n   * Set the Window z index\n   * @param {Number} zIndex the index\n   */\n  setZindex(zIndex) {\n    this.state.zIndex = zIndex;\n    logger.debug('Window::setZindex()', zIndex);\n\n    this._updateDOM();\n  }\n\n  /**\n   * Sets the Window to next z index\n   * @param {boolean} [force] Force next index\n   */\n  setNextZindex(force) {\n    const setNext = force || this._checkNextZindex();\n\n    if (setNext) {\n      this.setZindex(nextZindex);\n      nextZindex++;\n    }\n  }\n\n  /**\n   * Set a state by value\n   * @param {string} name State name\n   * @param {*} value State value\n   * @param {boolean} [update=true] Update the DOM\n   * @see {WindowState}\n   */\n  setState(name, value, update = true) {\n    const set = () => this._setState(name, value, update);\n\n    // Allows for some \"grace time\" so the overlay does not\n    // \"blink\"\n    if (name === 'loading' && update) {\n      clearTimeout(this._loadingDebounce);\n\n      if (value === true) {\n        this._loadingDebounce = setTimeout(() => set(), 250);\n        return;\n      }\n    }\n\n    set();\n  }\n\n  /**\n   * Gravitates window towards a certain area\n   * @param {string} gravity Gravity\n   */\n  gravitate(gravity) {\n    if (!this.core.has('osjs/desktop')) {\n      return;\n    }\n\n    const rect = this.core.make('osjs/desktop').getRect();\n    const position = positionFromGravity(this, rect, gravity);\n\n    this.setPosition(position);\n  }\n\n  /**\n   * Gets a astate\n   * @return {*}\n   */\n  getState(n) {\n    const value = this.state[n];\n\n    return ['position', 'dimension', 'styles'].indexOf(n) !== -1\n      ? {...value}\n      : value;\n  }\n\n  /**\n   * Get a snapshot of the Window session\n   * @return {Object}\n   */\n  getSession() {\n    return this.attributes.sessionable === false ? null : {\n      id: this.id,\n      maximized: this.state.maximized,\n      minimized: this.state.minimized,\n      position: {...this.state.position},\n      dimension: {...this.state.dimension}\n    };\n  }\n\n  /**\n   * Get a list of all windows\n   *\n   * @return {Window[]}\n   */\n  static getWindows() {\n    return windows;\n  }\n\n  /**\n   * Gets the lastly focused Window\n   * @return {Window}\n   */\n  static lastWindow() {\n    return lastWindow;\n  }\n\n  /**\n   * Internal method for setting state\n   * @param {string} name State name\n   * @param {*} value State value\n   * @param {boolean} [update=true] Update the DOM\n   */\n  _setState(name, value, update = true) {\n    const oldValue = this.state[name];\n    this.state[name] = value;\n\n    if (update) {\n      if (oldValue !== value) {\n        logger.debug('Window::_setState()', name, value);\n      }\n\n      this._updateDOM();\n    }\n  }\n\n  /**\n   * Internal method for toggling state\n   * @param {string} name State name\n   * @param {any} value State value\n   * @param {string} eventName Name of event to emit\n   * @param {boolean} [update=true] Update the DOM\n   */\n  _toggleState(name, value, eventName, update = true) {\n    if (this.state[name] === value) {\n      return false;\n    }\n\n    logger.debug('Window::_toggleState()', name, value, eventName, update);\n\n    this.state[name] = value;\n    this.emit(eventName, this);\n    this.core.emit('osjs/window:change', this, name, value);\n\n    if (update) {\n      this._updateDOM();\n    }\n\n    return true;\n  }\n\n  /**\n   * Check if we have to set next zindex\n   */\n  _checkNextZindex() {\n    const {ontop} = this.attributes;\n    const {zIndex} = this.state;\n\n    const windexes = windows\n      .filter(w => w.attributes.ontop === ontop)\n      .filter(w => w.wid !== this.wid)\n      .map(w => w.state.zIndex);\n\n    const max = windexes.length > 0\n      ? Math.max.apply(null, windexes)\n      : 0;\n\n    return zIndex < max;\n  }\n\n  /**\n   * Updated the Window DOM\n   */\n  _updateDOM() {\n    if (!this.inited) {\n      return;\n    }\n\n    const {$element, $title, $icon, $header, id, state, attributes} = this;\n    const {width, height} = state.dimension;\n    const {top, left} = state.position;\n    const {title, icon, zIndex, styles} = state;\n\n    const attrs = {\n      id: id,\n      media: state.media,\n      moving: state.moving,\n      resizing: state.resizing,\n      loading: state.loading,\n      focused: state.focused,\n      maximized: state.maximized,\n      minimized: state.minimized,\n      modal: attributes.modal,\n      ontop: attributes.ontop,\n      resizable: attributes.resizable,\n      moveable: attributes.moveable,\n      maximizable: attributes.maximizable,\n      minimizable: attributes.minimizable\n    };\n\n    const cssText = createCssText({\n      top: String(top) + 'px',\n      left: String(left) + 'px',\n      height: String(height) + 'px',\n      width: String(width) + 'px',\n      zIndex: (attrs.ontop ? ONTOP_ZINDEX : 0) + zIndex,\n      ...styles\n    });\n\n    if ($title) {\n      $title.innerHTML = escapeHtml(title);\n    }\n\n    if ($icon) {\n      $icon.style.backgroundImage = `url(${icon})`;\n    }\n\n    if ($header) {\n      $header.style.display = attributes.header ? undefined : 'none';\n    }\n\n    if ($element) {\n      Object.keys(attrs)\n        .forEach(a => $element.setAttribute(`data-${a}`, String(attrs[a])));\n\n      $element.style.cssText = cssText;\n    }\n  }\n\n}\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2020, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\nimport {EventEmitter} from '@osjs/event-emitter';\nimport Websocket from './websocket';\nimport Window from './window';\nimport logger from './logger';\n\nconst applications = [];\nlet applicationCount = 0;\n\nconst getSettingsKey = metadata =>\n  'osjs/application/' + metadata.name;\n\n/**\n * Application\n *\n * @desc Base class for an Application\n */\nexport default class Application extends EventEmitter {\n\n  /**\n   * Create application\n   *\n   * @param {Core} core Core reference\n   * @param {object} data Application data\n   * @param {Map<string, *>} data.args Launch arguments\n   * @param {object} [data.options] Options\n   * @param {object} [data.options.settings] Initial settings\n   * @param {object} [data.options.restore] Restore data\n   * @param {boolean} [data.options.windowAutoFocus=true] Auto-focus first created window\n   * @param {boolean} [data.options.sessionable=true] Allow session storage\n   * @param {PackageMetadata} [data.metadata] Package Metadata\n   */\n  constructor(core, data) {\n    data = {\n      args: {},\n      options: {},\n      metadata: {},\n      ...data\n    };\n\n    logger.debug('Application::constructor()', data);\n\n    const defaultSettings = data.options.settings\n      ? {...data.options.settings}\n      : {};\n\n    const name = data.metadata && data.metadata.name\n      ? 'Application@' + data.metadata.name\n      : 'Application' + String(applicationCount);\n\n    super(name);\n\n    /**\n     * The Application ID\n     * @type {Number}\n     */\n    this.pid = applicationCount;\n\n    /**\n     * Core instance reference\n     * @type {Core}\n     */\n    this.core = core;\n\n    /**\n     * Application arguments\n     * @type {Map<string, *>}\n     */\n    this.args = data.args;\n\n    /**\n     * Application options\n     * @type {object}\n     */\n    this.options = {\n      sessionable: true,\n      windowAutoFocus: true,\n      ...data.options\n    };\n\n    /**\n     * Application metadata\n     * @type {PackageMetadata}\n     */\n    this.metadata = data.metadata;\n\n    /**\n     * Window list\n     * @type {Window[]}\n     */\n    this.windows = [];\n\n    /**\n     * Worker instances\n     * @type {Worker[]}\n     */\n    this.workers = [];\n\n    /**\n     * Options for internal fetch/requests\n     * @type {object}\n     */\n    this.requestOptions = {};\n\n    /**\n     * The application destruction state\n     * @type {boolean}\n     */\n    this.destroyed = false;\n\n    /**\n     * Application settings\n     * @type {object}\n     */\n    this.settings = core.make('osjs/settings')\n      .get(getSettingsKey(this.metadata), null, defaultSettings);\n\n    /**\n     * Application started time\n     * @type {Date}\n     */\n    this.started = new Date();\n\n    /**\n     * Application WebSockets\n     * @type {Websocket[]}\n     */\n    this.sockets = [];\n\n    applications.push(this);\n    applicationCount++;\n\n    this.core.emit('osjs/application:create', this);\n  }\n\n  /**\n   * Destroy application\n   */\n  destroy(remove = true) {\n    if (this.destroyed) {\n      return;\n    }\n    this.destroyed = true;\n\n    this.emit('destroy');\n    this.core.emit('osjs/application:destroy', this);\n\n    const destroy = (list, fn) => {\n      try {\n        list.forEach(fn);\n      } catch (e) {\n        logger.warn('Exception on application destruction', e);\n      }\n\n      return [];\n    };\n\n    this.windows = destroy(this.windows, window => window.destroy());\n    this.sockets = destroy(this.sockets, ws => ws.close());\n    this.workers = destroy(this.workers, worker => worker.terminate());\n\n    if (remove) {\n      const foundIndex = applications.findIndex(a => a === this);\n      if (foundIndex !== -1) {\n        applications.splice(foundIndex, 1);\n      }\n    }\n  }\n\n  /**\n   * Re-launch this application\n   */\n  relaunch() {\n    const windows = this.windows.map(w => w.getSession());\n\n    this.destroy();\n\n    setTimeout(() => {\n      this.core.run(this.metadata.name, {...this.args}, {\n        ...this.options,\n        forcePreload: this.core.config('development'),\n        restore: {windows}\n      });\n    }, 1);\n  }\n\n  /**\n   * Gets a URI to a resource for this application\n   *\n   * @desc If given path is an URI it will just return itself.\n   *\n   * @param {string} path The path\n   * @param {object} [options] Options for url() in core\n   * @return {string} A complete URI\n   */\n  resource(path = '/', options = {}) {\n    return this.core.url(path, options, this.metadata);\n  }\n\n  /**\n   * Performs a request to the OS.js server with the application\n   * as the endpoint.\n   * @param {string} [path=/] Append this to endpoint\n   * @param {Options} [options] fetch options\n   * @param {string} [type='json'] Request / Response type\n   * @return {Promise<*, Error>} ArrayBuffer or JSON\n   */\n  request(path = '/', options = {}, type = 'json') {\n    const uri = this.resource(path);\n\n    return this.core.request(uri, options, type);\n  }\n\n  /**\n   * Creates a new Websocket\n   * @param {string} [path=/socket] Append this to endpoint\n   * @param {object} [options] Connection options\n   * @return {Websocket}\n   */\n  socket(path = '/socket', options = {}) {\n    options = {\n      socket: {},\n      ...options\n    };\n\n    const uri = this.resource(path, {type: 'websocket'});\n    const ws = new Websocket(this.metadata.name, uri, options.socket);\n\n    this.sockets.push(ws);\n\n    return ws;\n  }\n\n  /**\n   * Sends a message over websocket via the core connection.\n   * @desc This does not create a new connection, but rather uses the core connection.\n   * For subscribing to messages from the server use the 'ws:message' event\n   */\n  send(...args) {\n    this.core.ws.send(JSON.stringify({\n      name: 'osjs/application:socket:message',\n      params: [{\n        pid: this.pid,\n        name: this.metadata.name,\n        args\n      }]\n    }));\n  }\n\n  /**\n   * Creates a new Worker\n   * @param {string} filename Worker filename\n   * @param {object} [options] Worker options\n   * @return {Worker}\n   */\n  worker(filename, options = {}) {\n    const uri = this.resource(filename);\n    const worker =  new Worker(uri, {\n      credentials: 'same-origin',\n      ...options\n    });\n\n    this.workers.push(worker);\n\n    return worker;\n  }\n\n  /**\n   * Create a new window belonging to this application\n   * @param {object} options Window options\n   * @see {Window}\n   * @return {Window}\n   */\n  createWindow(options = {}) {\n    const found = this.windows.find(w => w.id === options.id);\n    if (found) {\n      const msg = this.core.make('osjs/locale')\n        .translate('ERR_WINDOW_ID_EXISTS', options.id);\n\n      throw new Error(msg);\n    }\n\n    const instance = new Window(this.core, options);\n\n    if (this.options.restore) {\n      const windows = this.options.restore.windows || [];\n      const found = windows.findIndex(r => r.id === instance.id);\n\n      if (found !== -1) {\n        const restore = windows[found];\n        instance.setPosition(restore.position, true);\n        instance.setDimension(restore.dimension);\n\n        if (restore.minimized) {\n          instance.minimize();\n        } else if (restore.maximized) {\n          instance.maximize();\n        }\n\n        this.options.restore.windows.splice(found, 1);\n      }\n    }\n\n    instance.init();\n\n    this.windows.push(instance);\n\n    this.emit('create-window', instance);\n    instance.on('destroy', () => {\n      if (!this.destroyed) {\n        const foundIndex = this.windows.findIndex(w => w === instance);\n        if (foundIndex !== -1) {\n          this.windows.splice(foundIndex, 1);\n        }\n      }\n\n      this.emit('destroy-window', instance);\n    });\n\n    if (this.options.windowAutoFocus) {\n      instance.focus();\n    }\n\n    return instance;\n  }\n\n  /**\n   * Removes window(s) based on given filter\n   * @param {Function} filter Filter function\n   */\n  removeWindow(filter) {\n    const found = this.windows.filter(filter);\n    found.forEach(win => win.destroy());\n  }\n\n  /**\n   * Gets a snapshot of the application session\n   * @return {object}\n   */\n  getSession() {\n    const session = {\n      args: {...this.args},\n      name: this.metadata.name,\n      windows: this.windows\n        .map(w => w.getSession())\n        .filter(s => s !== null)\n    };\n\n    return session;\n  }\n\n  /**\n   * Emits an event across all (or filtered) applications\n   *\n   * @deprecated\n   * @param {Function} [filter] A method to filter what applications to send to\n   * @return {Function} Function with 'emit()' signature\n   */\n  emitAll(filter) {\n    logger.warn('Application#emitAll is deprecated. Use Core#broadcast instead');\n\n    const defaultFilter = proc => proc.pid !== this.pid;\n    const filterFn = typeof filter === 'function'\n      ? filter\n      : typeof filter === 'string'\n        ? proc => defaultFilter(proc) && proc.metadata.name === filter\n        : defaultFilter;\n\n    return (name, ...args) => applications.filter(filterFn)\n      .map(proc => proc.emit(name, ...args));\n  }\n\n  /**\n   * Saves settings\n   * @return {Promise<Boolean, Error>}\n   */\n  saveSettings() {\n    const service = this.core.make('osjs/settings');\n    const name = getSettingsKey(this.metadata);\n\n    service.set(name, null, this.settings);\n\n    return service.save();\n  }\n\n  /**\n   * Get a list of all running applications\n   *\n   * @return {Application[]}\n   */\n  static getApplications() {\n    return applications;\n  }\n\n  /**\n   * Kills all running applications\n   */\n  static destroyAll() {\n    applications.forEach(proc => {\n      try {\n        proc.destroy(false);\n      } catch (e) {\n        logger.warn('Exception on destroyAll', e);\n      }\n    });\n\n    applications.splice(0, applications.length);\n  }\n\n}\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2020, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\nimport dateformat from 'dateformat';\n\nconst FALLBACK_LOCALE = 'en_EN';\n\n// TODO\nconst prefixMap = {\n  nb: 'nb_NO'\n};\n\nconst sprintfRegex = /\\{(\\d+)\\}/g;\n\nconst sprintfMatcher = args => (m, n) =>\n  n in args ? args[n] : m;\n\nconst getDefaultLocale = (core, key) => core.config('locale.' + key);\n\nconst getUserLocale = (core, key, defaultLocale) => core.make('osjs/settings')\n  .get('osjs/locale', key, defaultLocale);\n\n/**\n * Gest the set localization\n * @param {Core} core OS.js Core IoC\n * @param {string} key Settings key (locales.*)\n * @return {object} An object with defaultLocale and userLocale\n */\nexport const getLocale = (core, key) => {\n  const defaultLocale = getDefaultLocale(core, key);\n  const userLocale = getUserLocale(core, key, defaultLocale);\n  return {defaultLocale, userLocale};\n};\n\n/**\n * Gets a raw string from a tree of translations based on key\n *\n * Note that this function will fall back to a pre-configured locale\n * if the given locale names were not found.\n *\n * @private\n * @param {object}  list      The tree of translations\n * @param {string}  ul        User locale name\n * @param {string}  dl        Default locale name\n * @param {string}  k         The key to translate from tree\n * @return {string}           The raw string\n */\nconst getFromList = (list, ul, dl, k) => {\n  const fallbackList = list[FALLBACK_LOCALE] || {};\n  const localizedList = list[ul] || list[dl] || {};\n\n  if (typeof localizedList[k] === 'undefined') {\n    return fallbackList[k] || k;\n  }\n\n  return localizedList[k];\n};\n\n/**\n * Translates a key + arguments from a tree of translations\n *\n * @example\n *  translate({en_EN: {foo: 'Hello {0}'}}, 'nb_NO', 'en_EN', 'foo', 'World') => 'Hello World'\n *\n * @private\n * @param {object}  list      The tree of translations\n * @param {string}  ul        User locale name\n * @param {string}  dl        Default locale name\n * @param {string}  k         The key to translate from tree\n * @param {...*}    args      A list of arguments that are defined in the translation string\n * @return {string}           The translated string\n */\nexport const translate = (list, ul, dl, k, ...args) => {\n  const fmt = getFromList(list, ul, dl, k);\n  return fmt.replace(sprintfRegex, sprintfMatcher(args));\n};\n\n/**\n * Translates a given flat tree of locales\n *\n * Will automatically detect the current locale from the user.\n *\n * Returns a function that takes a key and returns the correct string.\n *\n * @example\n *  translatableFlat({en_EN: 'Hello World'}); // => 'Hello World'\n *\n * @param {object} list The tree of translations\n * @param {string} defaultValue Default value if none found\n * @return {string} The translated string\n */\nexport const translatableFlat = core => (list, defaultValue) => {\n  const {defaultLocale, userLocale} = getLocale(core, 'language');\n\n  return list[userLocale] || list[defaultLocale] || list[FALLBACK_LOCALE] || defaultValue;\n};\n\n/**\n * Translates a given tree of locales.\n *\n * Will automatically detect the current locale from the user.\n *\n * Returns a `translate` function that takes a key and list of arguments.\n *\n * @see translate\n * @example\n *  translatable({en_EN: {foo: 'Hello {0}'}})\n *    ('foo', 'World'); // => 'Hello World'\n * @param {string} k List key\n * @param {...args} Format arguments\n * @return {Function} A translation function\n */\nexport const translatable = core => list => {\n  const {defaultLocale, userLocale} = getLocale(core, 'language');\n\n  return (k, ...args) => translate(\n    list,\n    userLocale,\n    defaultLocale,\n    k,\n    ...args\n  );\n};\n\n/**\n * Formats a given Date to a specified format\n *\n * Will automatically detect the current locale from the user.\n *\n * Formats are 'shortDate', 'mediumDate', 'longDate', 'fullDate',\n *       'shortTime' and 'longTime'\n *\n * @param {Date} date Date object\n * @param {string} fmt Format\n * @return {string}\n */\nexport const format = core => (date, fmt) => {\n  const {defaultLocale, userLocale} = getLocale(core, 'format.' + fmt);\n  const useFormat = userLocale || defaultLocale || fmt;\n\n  return dateformat(date, useFormat);\n};\n\n/**\n * Returns the navigator language\n * @param {object} [nav]\n * @return {string}\n */\nexport const browserLocale = (nav = {}) => {\n  const browserLanguage = nav.userLanguage || nav.language || '';\n  const get = l => prefixMap[l] ? prefixMap[l] : (l.match(/_/)\n    ? l\n    : (l ? `${l}_${l.toUpperCase()}` : ''));\n\n  const langs = (nav.languages || [browserLanguage])\n    .map(l => get(l.replace('-', '_')))\n    .filter(str => !!str);\n\n  return langs[langs.length - 1];\n};\n\n/**\n * Figures out what locale the browser is running as\n *\n * @param {string} [defaultLocale=en_EN] Default locale if none found\n * @return {string} The browser locale\n */\nexport const clientLocale = (() => {\n  const lang = browserLocale(navigator);\n\n  return (defaultLocale = FALLBACK_LOCALE, acceptedLocales = []) => {\n    const found = lang || defaultLocale;\n\n    if (acceptedLocales.lenght > 0 && acceptedLocales.indexOf(lang) === -1) {\n      return defaultLocale;\n    }\n\n    return found;\n  };\n})();\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2020, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\nexport default class Splash {\n  constructor(core) {\n    this.core = core;\n    this.$loading = document.createElement('div');\n    this.$loading.className = 'osjs-boot-splash';\n    this.$loading.appendChild(document.createTextNode('Loading...'));\n\n    core.on('osjs/core:boot', () => this.show());\n    core.on('osjs/core:booted', () => this.destroy());\n    core.on('osjs/core:logged-in', () => this.show());\n    core.on('osjs/core:started', () => this.destroy());\n  }\n\n  show() {\n    if (!this.$loading.parentNode) {\n      this.core.$root.appendChild(this.$loading);\n    }\n  }\n\n  destroy() {\n    if (this.$loading.parentNode) {\n      this.$loading.remove();\n    }\n  }\n}\n","export default __webpack_public_path__ + \"f4cfc6708cf6bfc17d4b1e775f594ae2.png\";","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2020, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\nimport {clientLocale} from './utils/locale.js';\nimport defaultWallpaper from './styles/wallpaper.png';\nimport defaultIcon from './styles/logo-blue-32x32.png';\n\nconst createUri = str => str\n  .replace(/(index\\.(html?|php))$/, '')\n  .replace(/\\/?$/, '/');\n\nconst pathname = createUri(window.location.pathname);\n\nconst href = createUri(window.location.href);\n\nconst languages = {\n  en_EN: 'English',\n  nb_NO: 'Norwegian, Norsk (bokmål)',\n  vi_VN: 'Vietnamese, Vietnamese',\n  fr_FR: 'French',\n  de_DE: 'German',\n  sl_SI: 'Slovenian, Slovenščina',\n  zh_CN: 'Chinese (simplified)',\n  fa_FA: 'Persian',\n  pt_BR: 'Português (Brasil)'\n};\n\nexport const defaultConfiguration = {\n  development: !(process.env.NODE_ENV || '').match(/^prod/i),\n  standalone: false,\n  languages,\n\n  http: {\n    ping: true, // By default maxAge / 2\n    public: pathname,\n    uri: href\n  },\n\n  ws: {\n    connectInterval: 5000,\n    uri: href.replace(/^http/, 'ws'),\n    disabled: false\n  },\n\n  packages: {\n    manifest: '/metadata.json',\n    metadata: []\n  },\n\n  // FIXME: Move into packages above ?!\n  application: {\n    pinned: [],\n    autostart: [],\n    categories: {\n      development: {\n        label: 'LBL_APP_CAT_DEVELOPMENT',\n        icon: 'applications-development'\n      },\n      science: {\n        label: 'LBL_APP_CAT_SCIENCE',\n        icon: 'applications-science'\n      },\n      games: {\n        label: 'LBL_APP_CAT_GAMES',\n        icon: 'applications-games'\n      },\n      graphics: {\n        label: 'LBL_APP_CAT_GRAPHICS',\n        icon: 'applications-graphics'\n      },\n      network: {\n        label: 'LBL_APP_CAT_NETWORK',\n        icon: 'applications-internet'\n      },\n      multimedia: {\n        label: 'LBL_APP_CAT_MULTIMEDIA',\n        icon: 'applications-multimedia'\n      },\n      office: {\n        label: 'LBL_APP_CAT_OFFICE',\n        icon: 'applications-office'\n      },\n      system: {\n        label: 'LBL_APP_CAT_SYSTEM',\n        icon: 'applications-system'\n      },\n      utilities: {\n        label: 'LBL_APP_CAT_UTILITIES',\n        icon: 'applications-utilities'\n      },\n      other: {\n        label: 'LBL_APP_CAT_OTHER',\n        icon: 'applications-other'\n      }\n    }\n  },\n\n  auth: {\n    ui: {},\n    login: {\n      username: null,\n      password: null\n    },\n  },\n\n  settings: {\n    lock: [],\n\n    defaults: {\n      'osjs/default-application': {},\n      'osjs/session': [],\n      'osjs/desktop': {},\n      'osjs/locale': {}\n    }\n  },\n\n  search: {\n    enabled: true\n  },\n\n  notifications: {\n    native: false\n  },\n\n  desktop: {\n    lock: false,\n    contextmenu: {\n      enabled: true,\n      defaults: true\n    },\n\n    settings: {\n      font: 'Roboto',\n      theme: 'StandardTheme',\n      sounds: 'FreedesktopSounds',\n      icons: 'GnomeIcons',\n      animations: false,\n      panels: [{\n        position: 'top',\n        items: [\n          {name: 'menu'},\n          {name: 'windows'},\n          {name: 'tray'},\n          {name: 'clock'}\n        ]\n      }],\n      widgets: [],\n      keybindings: {\n        'open-application-menu': 'shift+alt+a',\n        'close-window': 'shift+alt+w'\n      },\n      notifications: {\n        position: 'top-right'\n      },\n      background: {\n        src: defaultWallpaper,\n        color: '#572a79',\n        style: 'cover'\n      },\n      iconview: {\n        enabled: false,\n        path: 'home:/.desktop',\n        fontColorStyle: 'system',\n        fontColor: '#ffffff'\n      }\n    }\n  },\n\n  locale: {\n    language: clientLocale('en_EN', Object.keys(languages)),\n    rtl: ['az', 'fa', 'he', 'uz', 'ar'],\n    format: {\n      shortDate: 'yyyy-mm-dd',\n      mediumDate: 'dS mmm yyyy',\n      longDate: 'dS mmmm yyyy',\n      fullDate: 'dddd dS mmmm yyyy',\n      shortTime: 'HH:MM',\n      longTime: 'HH:MM:ss'\n    }\n  },\n\n  windows: {\n    lofi: false,\n    mobile: false, // Trigger for setting mobile UI\n    template: null, // A string. See 'window.js' for example\n    moveKeybinding: 'ctrl'\n  },\n\n  vfs: {\n    watch: false,\n    defaultPath: 'home:/',\n    defaultAdapter: 'system',\n    adapters: {},\n    mountpoints: [{\n      name: 'apps',\n      label: 'Applications',\n      adapter: 'apps',\n      icon: defaultIcon,\n      attributes: {\n        visibility: 'restricted',\n        readOnly: true\n      }\n    }, {\n      name: 'osjs',\n      label: 'OS.js',\n      adapter: 'system',\n      icon: {name: 'folder-publicshare'}\n    }, {\n      name: 'home',\n      label: 'Home',\n      adapter: 'system',\n      icon: {name: 'user-home'}\n    }],\n    icons: {\n      '^application/zip': {name: 'package-x-generic'},\n      '^application/javascript': {name: 'text-x-script'},\n      '^application/json': {name: 'text-x-script'},\n      '^application/x-python': {name: 'text-x-script'},\n      '^application/php': {name: 'text-x-script'},\n      '^application/pdf': {name: 'x-office-document'},\n      '^application/rtf': {name: 'x-office-document'},\n      '^application/msword': {name: 'x-office-document'},\n      '^application/(xz|tar|gzip)': {name: 'package-x-generic'},\n      '^text/css': {name: 'text-x-script'},\n      '^text/html': {name: 'text-html'},\n      '^(application|text)/xml': {name: 'text-html'},\n      '^application': {name: 'application-x-executable'},\n      '^text': {name: 'text-x-generic'},\n      '^audio': {name: 'audio-x-generic'},\n      '^video': {name: 'video-x-generic'},\n      '^image': {name: 'image-x-generic'}\n    }\n  },\n\n  providers: {\n    globalBlacklist: [\n      'osjs/websocket',\n      'osjs/clipboard',\n      'osjs/gapi'\n    ],\n    globalWhitelist: []\n  }\n};\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2020, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\n/*\n * Creates URL request path\n */\nconst encodeQueryData = data => Object.keys(data)\n  .filter(k => typeof data[k] !== 'object')\n  .map(k => encodeURIComponent(k) + '=' + encodeURIComponent(data[k]))\n  .join('&');\n\nconst bodyTypes = [\n  window.ArrayBuffer,\n  window.ArrayBufferView,\n  window.Blob,\n  window.File,\n  window.URLSearchParams,\n  window.FormData\n].filter(t => !!t);\n\n/*\n * Creates fetch() options\n */\nconst createFetchOptions = (url, options, type) => {\n  const fetchOptions = {\n    credentials: 'same-origin',\n    method: 'get',\n    headers: {},\n    ...options\n  };\n\n  if (type === 'json') {\n    fetchOptions.headers = {\n      ...fetchOptions.headers,\n      'Accept': 'application/json, text/plain, */*',\n      'Content-Type': 'application/json'\n    };\n  }\n\n  if (fetchOptions.body && fetchOptions.method.toLowerCase() === 'get') {\n    url += '?' + encodeQueryData(fetchOptions.body);\n    delete fetchOptions.body;\n  }\n\n  const hasBody = typeof fetchOptions.body !== 'undefined';\n  const stringBody = typeof fetchOptions.body === 'string';\n\n  if (type === 'json' && (hasBody && !stringBody)) {\n    if (!(fetchOptions.body instanceof FormData)) {\n      const found = bodyTypes.find(t => (fetchOptions.body instanceof t));\n      if (!found) {\n        fetchOptions.body = JSON.stringify(fetchOptions.body);\n      }\n    }\n  }\n\n  return [url, fetchOptions];\n};\n\n/**\n * Make a HTTP request\n *\n * @param {string} url The endpoint\n * @param {Options} [options] fetch options\n * @param {string} [type] Request / Response type\n * @return {*}\n */\nexport const fetch = (url, options = {}, type = null) => {\n  const [target, fetchOptions] = createFetchOptions(url, options, type);\n\n  const createErrorRejection = (response, error) =>\n    Promise.reject(new Error(error\n      ? error\n      : `${response.status} (${response.statusText})`));\n\n  return window.fetch(target, fetchOptions)\n    .then(response => {\n      if (!response.ok) {\n        const contentType = response.headers.get('content-type');\n        const method = contentType && contentType.indexOf('application/json') !== -1\n          ? 'json'\n          : 'text';\n\n        return response[method]()\n          .then(data => createErrorRejection(response, data.error));\n      }\n\n      return type === 'json'\n        ? response.json()\n        : response;\n    });\n};\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2020, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\nexport const urlResolver = configuration => {\n  const {http, ws} = configuration;\n\n  return (endpoint = '/', options = {}, metadata = {}) => {\n    if (typeof endpoint !== 'string') {\n      return http.public;\n    } else if (endpoint.match(/^(http|ws|ftp)s?:/i)) {\n      return endpoint;\n    }\n\n    const {type, prefix} = {\n      type: null,\n      prefix: options.type === 'websocket',\n      ...options\n    };\n\n    const str = type === 'websocket' ? ws.uri : http.uri;\n\n    let url = endpoint.replace(/^\\/+/, '');\n    if (metadata.type) {\n      const path = endpoint.replace(/^\\/?/, '/');\n      const type = metadata.type === 'theme' ? 'themes' : (\n        metadata.type === 'icons' ? 'icons' : 'apps'\n      );\n\n      url = `${type}/${metadata.name}${path}`;\n    }\n\n    return prefix\n      ? str.replace(/\\/$/, '') + url.replace(/^\\/?/, '/')\n      : http.public.replace(/^\\/?/, '/') + url;\n  };\n};\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2020, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\nimport Application from './application';\nimport Websocket from './websocket';\nimport Splash from './splash';\nimport {CoreBase} from '@osjs/common';\nimport {defaultConfiguration} from './config';\nimport {fetch} from './utils/fetch';\nimport {urlResolver} from './utils/url';\nimport logger from './logger';\n\n/**\n * Core\n *\n * @desc Main class for OS.js service providers and bootstrapping.\n */\nexport default class Core extends CoreBase {\n\n  /**\n   * Create core instance\n   * @param {object} config Configuration tree\n   * @param {object} [options] Options\n   * @param {Element} [options.root] The root DOM element for elements\n   * @param {Element} [options.resourceRoot] The root DOM element for resources\n   * @param {String[]} [options.classNames] List of class names to apply to root dom element\n   */\n  constructor(config = {}, options = {}) {\n    options = {\n      classNames: ['osjs-root'],\n      root: document.body,\n      ...options || {}\n    };\n\n    super(defaultConfiguration, config, options);\n\n    this.logger = logger;\n    this.ws = null;\n    this.ping = null;\n    this.splash = new Splash(this);\n    this.$root = options.root;\n    this.$resourceRoot = options.resourceRoot || document.querySelector('head');\n    this.requestOptions = {};\n    this.urlResolver = urlResolver(this.configuration);\n    this.user = {\n      id: null,\n      username: 'osjs',\n      groups: []\n    };\n\n    this.options.classNames.forEach(n => this.$root.classList.add(n));\n\n    const {uri} = this.configuration.ws;\n    if (!uri.match(/^wss?:/)) {\n      const {protocol, host} = window.location;\n\n      this.configuration.ws.uri = protocol.replace(/^http/, 'ws') + '//' + host + uri.replace(/^\\/+/, '/');\n    }\n  }\n\n  /**\n   * Destroy core instance\n   */\n  destroy() {\n    if (this.destroyed) {\n      return Promise.resolve();\n    }\n\n    this.emit('osjs/core:destroy');\n\n    this.ping = clearInterval(this.ping);\n\n    Application.destroyAll();\n\n    if (this.ws) {\n      this.ws.close();\n    }\n\n    this.user = null;\n    this.ws = null;\n    this.connecting = false;\n    this.connectfailed = false;\n    this.ping = null;\n\n    return super.destroy();\n  }\n\n  /**\n   * Boots up OS.js\n   * @return {Promise<boolean, Error>}\n   */\n  boot() {\n    const done = e => {\n      if (e) {\n        logger.error('Error while booting', e);\n      }\n\n      console.groupEnd();\n\n      return this.start();\n    };\n\n    if (this.booted) {\n      return Promise.resolve(false);\n    }\n\n    console.group('Core::boot()');\n\n    this._attachEvents();\n    this.emit('osjs/core:boot');\n\n    return super.boot()\n      .then(() => {\n        this.emit('osjs/core:booted');\n\n        if (this.has('osjs/auth')) {\n          return this.make('osjs/auth').show(user => {\n            this.user = user;\n\n            if (this.has('osjs/settings')) {\n              this.make('osjs/settings').load()\n                .then(() => done())\n                .catch(() => done());\n            } else {\n              done();\n            }\n          });\n        } else {\n          logger.debug('OS.js STARTED WITHOUT ANY AUTHENTICATION');\n        }\n\n        return done();\n      }).catch(done);\n  }\n\n  /**\n   * Starts all core services\n   * @return {Promise<boolean, Error>}\n   */\n  start() {\n    const connect = () => new Promise((resolve, reject) => {\n      try {\n        const valid = this._createConnection(error => error ? reject(error) : resolve());\n        if (valid === false) {\n          // We can skip the connection\n          resolve();\n        }\n      } catch (e) {\n        reject(e);\n      }\n    });\n\n    const done = (err) => {\n      this.emit('osjs/core:started');\n\n      if (err) {\n        logger.warn('Error while starting', err);\n      }\n\n      console.groupEnd();\n\n      return !err;\n    };\n\n    if (this.started) {\n      return Promise.resolve(false);\n    }\n\n    console.group('Core::start()');\n\n    this.emit('osjs/core:start');\n\n    this._createListeners();\n\n    return super.start()\n      .then(result => {\n        console.groupEnd();\n\n        if (result) {\n          return connect()\n            .then(() => done())\n            .catch(err => done(err));\n        }\n\n        return false;\n      }).catch(done);\n  }\n\n  /**\n   * Attaches some internal events\n   */\n  _attachEvents() {\n    // Attaches sounds for certain events\n    this.on('osjs/core:started', () => {\n      if (this.has('osjs/sounds')) {\n        this.make('osjs/sounds').play('service-login');\n      }\n    });\n\n    this.on('osjs/core:destroy', () => {\n      if (this.has('osjs/sounds')) {\n        this.make('osjs/sounds').play('service-logout');\n      }\n    });\n\n    // Forwards messages to an application from internal websocket\n    this.on('osjs/application:socket:message', ({pid, args}) => {\n      const found = Application.getApplications()\n        .find(proc => proc && proc.pid === pid);\n\n      if (found) {\n        found.emit('ws:message', ...args);\n      }\n    });\n\n    // Sets up a server ping\n    this.on('osjs/core:connected', config => {\n      const enabled = this.config('http.ping');\n\n      if (enabled) {\n        const pingTime = typeof enabled === 'number'\n          ? enabled\n          : config.cookie.maxAge / 2;\n\n        this.ping = setInterval(() => {\n          if (this.ws) {\n            if (this.ws.connected && !this.ws.reconnecting) {\n              this.request('/ping').catch(e => logger.warn('Error on ping', e));\n            }\n          }\n        }, pingTime);\n      }\n    });\n\n  }\n\n  /**\n   * Creates the main connection to server\n   * @param {Function} cb Callback function\n   * @return {boolean}\n   */\n  _createConnection(cb) {\n    if (this.configuration.standalone || this.configuration.ws.disabled) {\n      return false;\n    }\n\n    const {uri} = this.config('ws');\n    let wasConnected = false;\n\n    logger.debug('Creating websocket connection on', uri);\n\n    this.ws = new Websocket('CoreSocket', uri, {\n      interval: this.config('ws.connectInterval', 1000)\n    });\n\n    this.ws.once('connected', () => {\n      // Allow for some grace-time in case we close prematurely\n      setTimeout(() => {\n        wasConnected = true;\n        cb();\n      }, 100);\n    });\n\n    this.ws.on('connected', (ev, reconnected) => {\n      this.emit('osjs/core:connect', ev, reconnected);\n    });\n\n    this.ws.once('failed', ev => {\n      if (!wasConnected) {\n        cb(new Error('Connection closed'));\n        this.emit('osjs/core:connection-failed', ev);\n      }\n    });\n\n    this.ws.on('disconnected', ev => {\n      this.emit('osjs/core:disconnect', ev);\n    });\n\n    this.ws.on('message', ev => {\n      try {\n        const data = JSON.parse(ev.data);\n        const params = data.params || [];\n        this.emit(data.name, ...params);\n      } catch (e) {\n        logger.warn('Exception on websocket message', e);\n      }\n    });\n\n    return true;\n  }\n\n  /**\n   * Creates event listeners*\n   */\n  _createListeners() {\n    const handle = data => {\n      const {pid, wid, args} = data;\n\n      const proc = Application.getApplications()\n        .find(p => p.pid === pid);\n\n      const win = proc\n        ? proc.windows.find(w => w.wid === wid)\n        : null;\n\n      if (win) {\n        win.emit('iframe:get', ...(args || []));\n      }\n    };\n\n    window.addEventListener('message', ev => {\n      const message = ev.data || {};\n      if (message && message.name === 'osjs/iframe:message') {\n        handle(...(message.params || []));\n      }\n    });\n  }\n\n  /**\n   * Creates an URL based on configured public path\n   *\n   * @desc If you give a options.type, the URL will be resolved\n   * to the correct resource.\n   *\n   * @param {string} [endpoint=/] Endpoint\n   * @param {object} [options] Additional options for resolving url\n   * @param {boolean} [options.prefix=false] Returns a full URL complete with scheme, etc. (will always be true on websocket)\n   * @param {string} [options.type] Optional URL type (websocket)\n   * @param {PackageMetadata} [metadata] A package metadata\n   * @return {string}\n   */\n  url(endpoint = '/', options = {}, metadata = {}) {\n    return this.urlResolver(endpoint, options, metadata);\n  }\n\n\n  /**\n   * Make a HTTP request\n   *\n   * @desc This is a wrapper for making a 'fetch' request with some helpers\n   * and integration with OS.js\n   * @param {string} url The endpoint\n   * @param {Options} [options] fetch options\n   * @param {string} [type] Request / Response type\n   * @param {boolean} [force=false] Force request even when in standalone mode\n   * @return {*}\n   */\n  request(url, options = {}, type = null, force = false) {\n    const _ = this.has('osjs/locale')\n      ? this.make('osjs/locale').translate\n      : t => t;\n\n    if (this.config('standalone') && !force) {\n      return Promise.reject(new Error(_('ERR_REQUEST_STANDALONE')));\n    }\n\n    if (!url.match(/^((http|ws|ftp)s?:)/i)) {\n      url = this.url(url);\n      // FIXME: Deep merge\n      options = {\n        ...options || {},\n        ...this.requestOptions || {}\n      };\n    }\n\n    return fetch(url, options, type)\n      .catch(error => {\n        logger.warn(error);\n\n        throw new Error(_('ERR_REQUEST_NOT_OK', error));\n      });\n  }\n\n  /**\n   * Create an application from a package\n   *\n   * @param {string} name Package name\n   * @param {object} [args] Launch arguments\n   * @param {object} [options] Launch options\n   * @see {Packages}\n   * @return {Application}\n   */\n  run(name, args = {}, options = {}) {\n    logger.debug('Core::run()', name, args, options);\n\n    return this.make('osjs/packages').launch(name, args, options);\n  }\n\n  /**\n   * Spawns an application based on the file given\n   * @param {object} file A file object\n   * @param {object} [options] Options\n   * @param {boolean} [options.useDefault] Use saved default application preference\n   * @param {boolean} [options.forceDialog] Force application choice dialog on multiple choices\n   * @return {Boolean|Application}\n   */\n  open(file, options = {}) {\n    if (file.mime === 'osjs/application') {\n      return this.run(file.path.split('/').pop());\n    }\n\n    const run = app => this.run(app, {file}, options);\n\n    const compatible = this.make('osjs/packages')\n      .getCompatiblePackages(file.mime);\n\n    if (compatible.length > 0) {\n      if (compatible.length > 1) {\n        try {\n          this._openApplicationDialog(options, compatible, file, run);\n\n          return true;\n        } catch (e) {\n          logger.warn('Exception on compability check', e);\n        }\n      }\n\n      run(compatible[0].name);\n\n      return Promise.resolve(true);\n    }\n\n    return Promise.resolve(false);\n  }\n\n  /**\n   * Wrapper method to create an application choice dialog\n   */\n  _openApplicationDialog(options, compatible, file, run) {\n    const _ = this.make('osjs/locale').translate;\n    const useDefault = options.useDefault && this.has('osjs/settings');\n    const setDefault = name => this.make('osjs/settings')\n      .set('osjs/default-application', file.mime, name)\n      .save();\n\n    const value = useDefault\n      ? this.make('osjs/settings').get('osjs/default-application', file.mime)\n      : null;\n\n    const type = useDefault\n      ? 'defaultApplication'\n      : 'choice';\n\n    const args = {\n      title: _('LBL_LAUNCH_SELECT'),\n      message: _('LBL_LAUNCH_SELECT_MESSAGE', file.path),\n      choices: compatible.reduce((o, i) => ({...o, [i.name]: i.name}), {}),\n      value\n    };\n\n    if (value && !options.forceDialog) {\n      run(value);\n    } else {\n      this.make('osjs/dialog', type, args, (btn, choice) => {\n        if (btn === 'ok') {\n          if (type === 'defaultApplication') {\n            if (useDefault) {\n              setDefault(choice.checked ? choice.value : null);\n            }\n\n            run(choice.value);\n          } else if (choice) {\n            run(choice);\n          }\n        }\n      });\n    }\n  }\n\n  /**\n   * Removes an event handler\n   * @see EventHandler#off\n   */\n  off(name, callback = null, force = false) {\n    if (name.match(/^osjs\\//) && typeof callback !== 'function') {\n      throw new TypeError('The callback must be a function');\n    }\n\n    return super.off(name, callback, force);\n  }\n\n  /**\n   * Sends a 'broadcast' event with given arguments\n   * to all applications matching given filter\n   *\n   * @param {string|Function} pkg The filter\n   * @param {string} name The event name\n   * @param {*} ...args Arguments to pass to emit\n   * @return {string[]} List of application names emitted to\n   */\n  broadcast(pkg, name, ...args) {\n    const filter = typeof pkg === 'function'\n      ? pkg\n      : p => p.metadata.name === pkg;\n\n\n    const apps = Application\n      .getApplications()\n      .filter(filter);\n\n    return apps.map(proc => {\n      proc.emit(name, ...args);\n\n      return proc.name;\n    });\n  }\n\n  /**\n   * Set the internal fetch/request options\n   * @param {object} options Request options\n   */\n  setRequestOptions(options) {\n    this.requestOptions = {...options};\n  }\n\n  /**\n   * Gets the current user\n   * @return {Map<string,*>} User object\n   */\n  getUser() {\n    return {...this.user};\n  }\n\n}\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2020, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\nconst modifierNames =  ['ctrl', 'shift', 'alt', 'meta'];\n\n/**\n * Checks if keycombo matches\n * @param {string} combo Key combo\n * @param {Event} ev Event\n * @return {boolean}\n */\nexport const matchKeyCombo = (combo, ev) => {\n  const checkKeys = String(combo).toLowerCase().split('+');\n  const keyName = String(ev.key).toLowerCase();\n  const validKeypress = checkKeys.every(k => modifierNames.indexOf(k) !== -1\n    ? ev[k + 'Key']\n    : keyName === k);\n\n  return validKeypress;\n};\n\n/**\n * Normalizes event input (position)\n */\nexport const getEvent = (ev) => {\n  let {clientX, clientY, target} = ev;\n  const touch = ev.touches || ev.changedTouches || [];\n\n  if (touch.length) {\n    clientX = touch[0].clientX;\n    clientY = touch[0].clientY;\n  }\n\n  return {clientX, clientY, touch: touch.length > 0, target};\n};\n\n/**\n * Creates a double-tap event handler\n * @param {number} [timeout=250] Timeout\n * @return {Function} Handler with => (ev, cb)\n */\nexport const doubleTap = (timeout = 250) => {\n  let tapped = false;\n  let timer;\n\n  return (ev, cb) => {\n    timer = clearTimeout(timer);\n    timer = setTimeout(() => (tapped = false), timeout);\n\n    if (tapped) {\n      ev.preventDefault();\n      return cb(ev);\n    }\n\n    tapped = true;\n\n    return false;\n  };\n};\n","export function h(name, attributes) {\n  var rest = []\n  var children = []\n  var length = arguments.length\n\n  while (length-- > 2) rest.push(arguments[length])\n\n  while (rest.length) {\n    var node = rest.pop()\n    if (node && node.pop) {\n      for (length = node.length; length--; ) {\n        rest.push(node[length])\n      }\n    } else if (node != null && node !== true && node !== false) {\n      children.push(node)\n    }\n  }\n\n  return typeof name === \"function\"\n    ? name(attributes || {}, children)\n    : {\n        nodeName: name,\n        attributes: attributes || {},\n        children: children,\n        key: attributes && attributes.key\n      }\n}\n\nexport function app(state, actions, view, container) {\n  var map = [].map\n  var rootElement = (container && container.children[0]) || null\n  var oldNode = rootElement && recycleElement(rootElement)\n  var lifecycle = []\n  var skipRender\n  var isRecycling = true\n  var globalState = clone(state)\n  var wiredActions = wireStateToActions([], globalState, clone(actions))\n\n  scheduleRender()\n\n  return wiredActions\n\n  function recycleElement(element) {\n    return {\n      nodeName: element.nodeName.toLowerCase(),\n      attributes: {},\n      children: map.call(element.childNodes, function(element) {\n        return element.nodeType === 3 // Node.TEXT_NODE\n          ? element.nodeValue\n          : recycleElement(element)\n      })\n    }\n  }\n\n  function resolveNode(node) {\n    return typeof node === \"function\"\n      ? resolveNode(node(globalState, wiredActions))\n      : node != null\n        ? node\n        : \"\"\n  }\n\n  function render() {\n    skipRender = !skipRender\n\n    var node = resolveNode(view)\n\n    if (container && !skipRender) {\n      rootElement = patch(container, rootElement, oldNode, (oldNode = node))\n    }\n\n    isRecycling = false\n\n    while (lifecycle.length) lifecycle.pop()()\n  }\n\n  function scheduleRender() {\n    if (!skipRender) {\n      skipRender = true\n      setTimeout(render)\n    }\n  }\n\n  function clone(target, source) {\n    var out = {}\n\n    for (var i in target) out[i] = target[i]\n    for (var i in source) out[i] = source[i]\n\n    return out\n  }\n\n  function setPartialState(path, value, source) {\n    var target = {}\n    if (path.length) {\n      target[path[0]] =\n        path.length > 1\n          ? setPartialState(path.slice(1), value, source[path[0]])\n          : value\n      return clone(source, target)\n    }\n    return value\n  }\n\n  function getPartialState(path, source) {\n    var i = 0\n    while (i < path.length) {\n      source = source[path[i++]]\n    }\n    return source\n  }\n\n  function wireStateToActions(path, state, actions) {\n    for (var key in actions) {\n      typeof actions[key] === \"function\"\n        ? (function(key, action) {\n            actions[key] = function(data) {\n              var result = action(data)\n\n              if (typeof result === \"function\") {\n                result = result(getPartialState(path, globalState), actions)\n              }\n\n              if (\n                result &&\n                result !== (state = getPartialState(path, globalState)) &&\n                !result.then // !isPromise\n              ) {\n                scheduleRender(\n                  (globalState = setPartialState(\n                    path,\n                    clone(state, result),\n                    globalState\n                  ))\n                )\n              }\n\n              return result\n            }\n          })(key, actions[key])\n        : wireStateToActions(\n            path.concat(key),\n            (state[key] = clone(state[key])),\n            (actions[key] = clone(actions[key]))\n          )\n    }\n\n    return actions\n  }\n\n  function getKey(node) {\n    return node ? node.key : null\n  }\n\n  function eventListener(event) {\n    return event.currentTarget.events[event.type](event)\n  }\n\n  function updateAttribute(element, name, value, oldValue, isSvg) {\n    if (name === \"key\") {\n    } else if (name === \"style\") {\n      if (typeof value === \"string\") {\n        element.style.cssText = value\n      } else {\n        if (typeof oldValue === \"string\") oldValue = element.style.cssText = \"\"\n        for (var i in clone(oldValue, value)) {\n          var style = value == null || value[i] == null ? \"\" : value[i]\n          if (i[0] === \"-\") {\n            element.style.setProperty(i, style)\n          } else {\n            element.style[i] = style\n          }\n        }\n      }\n    } else {\n      if (name[0] === \"o\" && name[1] === \"n\") {\n        name = name.slice(2)\n\n        if (element.events) {\n          if (!oldValue) oldValue = element.events[name]\n        } else {\n          element.events = {}\n        }\n\n        element.events[name] = value\n\n        if (value) {\n          if (!oldValue) {\n            element.addEventListener(name, eventListener)\n          }\n        } else {\n          element.removeEventListener(name, eventListener)\n        }\n      } else if (\n        name in element &&\n        name !== \"list\" &&\n        name !== \"type\" &&\n        name !== \"draggable\" &&\n        name !== \"spellcheck\" &&\n        name !== \"translate\" &&\n        !isSvg\n      ) {\n        element[name] = value == null ? \"\" : value\n      } else if (value != null && value !== false) {\n        element.setAttribute(name, value)\n      }\n\n      if (value == null || value === false) {\n        element.removeAttribute(name)\n      }\n    }\n  }\n\n  function createElement(node, isSvg) {\n    var element =\n      typeof node === \"string\" || typeof node === \"number\"\n        ? document.createTextNode(node)\n        : (isSvg = isSvg || node.nodeName === \"svg\")\n          ? document.createElementNS(\n              \"http://www.w3.org/2000/svg\",\n              node.nodeName\n            )\n          : document.createElement(node.nodeName)\n\n    var attributes = node.attributes\n    if (attributes) {\n      if (attributes.oncreate) {\n        lifecycle.push(function() {\n          attributes.oncreate(element)\n        })\n      }\n\n      for (var i = 0; i < node.children.length; i++) {\n        element.appendChild(\n          createElement(\n            (node.children[i] = resolveNode(node.children[i])),\n            isSvg\n          )\n        )\n      }\n\n      for (var name in attributes) {\n        updateAttribute(element, name, attributes[name], null, isSvg)\n      }\n    }\n\n    return element\n  }\n\n  function updateElement(element, oldAttributes, attributes, isSvg) {\n    for (var name in clone(oldAttributes, attributes)) {\n      if (\n        attributes[name] !==\n        (name === \"value\" || name === \"checked\"\n          ? element[name]\n          : oldAttributes[name])\n      ) {\n        updateAttribute(\n          element,\n          name,\n          attributes[name],\n          oldAttributes[name],\n          isSvg\n        )\n      }\n    }\n\n    var cb = isRecycling ? attributes.oncreate : attributes.onupdate\n    if (cb) {\n      lifecycle.push(function() {\n        cb(element, oldAttributes)\n      })\n    }\n  }\n\n  function removeChildren(element, node) {\n    var attributes = node.attributes\n    if (attributes) {\n      for (var i = 0; i < node.children.length; i++) {\n        removeChildren(element.childNodes[i], node.children[i])\n      }\n\n      if (attributes.ondestroy) {\n        attributes.ondestroy(element)\n      }\n    }\n    return element\n  }\n\n  function removeElement(parent, element, node) {\n    function done() {\n      parent.removeChild(removeChildren(element, node))\n    }\n\n    var cb = node.attributes && node.attributes.onremove\n    if (cb) {\n      cb(element, done)\n    } else {\n      done()\n    }\n  }\n\n  function patch(parent, element, oldNode, node, isSvg) {\n    if (node === oldNode) {\n    } else if (oldNode == null || oldNode.nodeName !== node.nodeName) {\n      var newElement = createElement(node, isSvg)\n      parent.insertBefore(newElement, element)\n\n      if (oldNode != null) {\n        removeElement(parent, element, oldNode)\n      }\n\n      element = newElement\n    } else if (oldNode.nodeName == null) {\n      element.nodeValue = node\n    } else {\n      updateElement(\n        element,\n        oldNode.attributes,\n        node.attributes,\n        (isSvg = isSvg || node.nodeName === \"svg\")\n      )\n\n      var oldKeyed = {}\n      var newKeyed = {}\n      var oldElements = []\n      var oldChildren = oldNode.children\n      var children = node.children\n\n      for (var i = 0; i < oldChildren.length; i++) {\n        oldElements[i] = element.childNodes[i]\n\n        var oldKey = getKey(oldChildren[i])\n        if (oldKey != null) {\n          oldKeyed[oldKey] = [oldElements[i], oldChildren[i]]\n        }\n      }\n\n      var i = 0\n      var k = 0\n\n      while (k < children.length) {\n        var oldKey = getKey(oldChildren[i])\n        var newKey = getKey((children[k] = resolveNode(children[k])))\n\n        if (newKeyed[oldKey]) {\n          i++\n          continue\n        }\n\n        if (newKey != null && newKey === getKey(oldChildren[i + 1])) {\n          if (oldKey == null) {\n            removeElement(element, oldElements[i], oldChildren[i])\n          }\n          i++\n          continue\n        }\n\n        if (newKey == null || isRecycling) {\n          if (oldKey == null) {\n            patch(element, oldElements[i], oldChildren[i], children[k], isSvg)\n            k++\n          }\n          i++\n        } else {\n          var keyedNode = oldKeyed[newKey] || []\n\n          if (oldKey === newKey) {\n            patch(element, keyedNode[0], keyedNode[1], children[k], isSvg)\n            i++\n          } else if (keyedNode[0]) {\n            patch(\n              element,\n              element.insertBefore(keyedNode[0], oldElements[i]),\n              keyedNode[1],\n              children[k],\n              isSvg\n            )\n          } else {\n            patch(element, oldElements[i], null, children[k], isSvg)\n          }\n\n          newKeyed[newKey] = children[k]\n          k++\n        }\n      }\n\n      while (i < oldChildren.length) {\n        if (getKey(oldChildren[i]) == null) {\n          removeElement(element, oldElements[i], oldChildren[i])\n        }\n        i++\n      }\n\n      for (var i in oldKeyed) {\n        if (!newKeyed[i]) {\n          removeElement(element, oldKeyed[i][0], oldKeyed[i][1])\n        }\n      }\n    }\n    return element\n  }\n}\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2020, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\n/**\n * Get parent directory\n * @param {string} path Directory\n * @return {string} Parent directory\n */\nexport const parentDirectory = path => path\n  .replace(/\\/$/, '')\n  .split('/')\n  .filter((item, index, arr) => index < (arr.length - 1))\n  .join('/')\n  .replace(/(\\/+)?$/, '/');\n\n/**\n * Joins paths\n * @param {string[]} args paths\n * @return {string}\n */\nexport const pathJoin = (...args) => args\n  .map((str, index) => {\n    if (index > 0) {\n      str = str.replace(/^\\/?/, '');\n    }\n    return str.replace(/\\/?$/, '');\n  })\n  .join('/');\n\n/*\n * Sort by locale string\n */\nconst sortString = (k, d) => (a, b) => d === 'asc'\n  ? String(a[k]).localeCompare(b[k])\n  : String(b[k]).localeCompare(a[k]);\n\n/*\n * Sort by date\n */\nconst sortDate = (k, d) => (a, b) => d === 'asc'\n  ? (new Date(a[k])) > (new Date(b[k]))\n  : (new Date(b[k])) > (new Date(a[k]));\n\n/*\n * Sort by educated guess\n */\nconst sortDefault = (k, d) => (a, b) =>\n  (a[k] < b[k])\n    ? -1\n    : ((a[k] > b[k])\n      ? (d === 'asc' ? 1 : 0)\n      : (d === 'asc' ? 0 : 1));\n\n/*\n * Sorts an array of files\n */\nconst sortFn = t => {\n  if (t === 'string') {\n    return sortString;\n  } else if (t === 'date') {\n    return sortDate;\n  }\n\n  return sortDefault;\n};\n\n/*\n * Map of sorters from readdir attributes\n */\nconst sortMap = {\n  size: sortFn('number'),\n  mtime: sortFn('date'),\n  ctime: sortFn('date'),\n  atime: sortFn('date')\n};\n\n/**\n * Creates \"special\" directory entries\n * @param {string} path The path to the readdir root\n * @return {Object[]}\n */\nconst createSpecials = path => {\n  const specials = [];\n\n  const stripped = path.replace(/\\/+/g, '/')\n    .replace(/^(\\w+):/, '') || '/';\n\n  if (stripped !== '/') {\n    specials.push({\n      isDirectory: true,\n      isFile: false,\n      mime: null,\n      size: 0,\n      stat: {},\n      filename: '..',\n      path: parentDirectory(path) || '/'\n    });\n  }\n\n  return specials;\n};\n\n/**\n * Creates a FileReader (promisified)\n * @param {string} method The method to call\n * @param {ArrayBuffer} ab The ArrayBuffer\n * @param {string} mime The MIME type\n * @return {Promise}\n */\nconst createFileReader = (method, ab, mime) => new Promise((resolve, reject) => {\n  const b = new Blob([ab], {type: mime});\n  const r = new FileReader();\n  r.onerror = e => reject(e);\n  r.onloadend = () => resolve(r.result);\n  r[method](b);\n});\n\n/**\n * Converts a number (bytez) into human-readable string\n * @param {Number} bytes Input\n * @param {Boolean} [si=false] Use SI units\n * @return {string}\n */\nexport const humanFileSize = (bytes, si = false) => {\n  if (isNaN(bytes) || typeof bytes !== 'number') {\n    bytes = 0;\n  }\n\n  const thresh = si ? 1000 : 1024;\n  const units = si\n    ? ['kB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB']\n    : ['KiB', 'MiB', 'GiB', 'TiB', 'PiB', 'EiB', 'ZiB', 'YiB'];\n\n  if (bytes < thresh) {\n    return bytes + ' B';\n  }\n\n  let u = -1;\n  do {\n    bytes /= thresh;\n    ++u;\n  } while (bytes >= thresh);\n\n  return `${bytes.toFixed(1)} ${units[u]}`;\n};\n\n/**\n * Transforms a readdir result\n * @param {object} root The path to the readdir root\n * @param Object[] files An array of readdir results\n * @param {object} options Options\n * @param {Boolean} [options.showHiddenFiles=true] Show hidden files\n * @param {Function} [options.filter] A filter\n * @param {string} [options.sortBy='filename'] Sort by this attribute\n * @param {string} [options.sortDir='asc'] Sort in this direction\n * @return {Object[]}\n */\nexport const transformReaddir = ({path}, files, options = {}) => {\n  options = {\n    showHiddenFiles: false,\n    sortBy: 'filename',\n    sortDir: 'asc',\n    ...options\n  };\n\n  let {sortDir, sortBy, filter} = options;\n  if (typeof filter !== 'function') {\n    filter = () => true;\n  }\n\n  if (['asc', 'desc'].indexOf(sortDir) === -1) {\n    sortDir = 'asc';\n  }\n\n  const filterHidden = options.showHiddenFiles\n    ? () => true\n    : file => file.filename.substr(0, 1) !== '.';\n\n  const sorter = sortMap[sortBy]\n    ? sortMap[sortBy]\n    : sortFn('string');\n\n  const modify = (file) => ({\n    ...file,\n    humanSize: humanFileSize(file.size)\n  });\n\n  const sortedSpecial = createSpecials(path)\n    .sort(sorter(sortBy, sortDir))\n    .map(modify);\n\n  const sortedDirectories = files.filter(file => file.isDirectory)\n    .sort(sorter(sortBy, sortDir))\n    .filter(filterHidden)\n    .filter(filter)\n    .map(modify);\n\n  const sortedFiles = files.filter(file => !file.isDirectory)\n    .sort(sorter(sortBy, sortDir))\n    .filter(filterHidden)\n    .filter(filter)\n    .map(modify);\n\n  return [\n    ...sortedSpecial,\n    ...sortedDirectories,\n    ...sortedFiles\n  ];\n};\n\n/**\n * Transform an ArrayBuffer\n * @param {ArrayBuffer} ab The ArrayBuffer\n * @param {string} mime The MIME type\n * @param {string} type Transform to this type\n * @return {DOMString|string|Blob|ArrayBuffer}\n */\nexport const transformArrayBuffer = (ab, mime, type) => {\n  if (type === 'string') {\n    return createFileReader('readAsText', ab, mime);\n  } else if (type === 'uri') {\n    return createFileReader('readAsDataURL', ab, mime);\n  } else if (type === 'blob') {\n    return Promise.resolve(new Blob([ab], {type: mime}));\n  }\n\n  return Promise.resolve(ab);\n};\n\n/**\n * Gets an icon from file stat\n * @param {object} file The file stat object\n * @return {string|object}\n */\nexport const getFileIcon = map => {\n  const find = file => {\n    const found = Object.keys(map).find(re => {\n      const regexp = new RegExp(re);\n      return regexp.test(file.mime);\n    });\n\n    return found\n      ? map[found]\n      : {name: 'application-x-executable'};\n  };\n\n  return file => file.isDirectory\n    ? {name: 'folder'}\n    : find(file);\n};\n\n/**\n * Creates a file iter for scandir\n * @param {object} stat file stat\n * @return {object}\n */\nexport const createFileIter = stat => ({\n  isDirectory: false,\n  isFile: true,\n  mime: 'application/octet-stream',\n  icon: null,\n  size: -1,\n  path: null,\n  filename: null,\n  label: null,\n  stat: {},\n  id: null,\n  parent_id: null,\n  ...stat\n});\n\n/**\n * Get basename of a file\n * @param {string} path The path\n * @return {string}\n */\nexport const basename = path => path.split('/').reverse()[0];\n\n/*\n * Get path of a file\n * @param {string} path The path\n * @return {string}\n */\nexport const pathname = path => {\n  const split = path.split('/');\n  split.splice(split.length - 1, 1);\n  return split.join('/');\n};\n\n/**\n * Gets prefix from vfs path\n * @param {string} str Input\n * @return {string}\n */\nexport const parseMontpointPrefix = str => {\n  const re = /^([\\w-_]+):+(.*)/;\n\n  const match = String(str)\n    .replace(/\\+/g, '/')\n    .match(re);\n\n  const [prefix] = Array.from(match || [])\n    .slice(1);\n\n  return prefix;\n};\n\n/**\n * Filters a mountpoint by user groups\n * @return {boolean}\n */\nexport const filterMountByGroups = userGroups => (mountGroups, strict = true) =>\n  mountGroups instanceof Array\n    ? mountGroups[strict ? 'every' : 'some'](g => userGroups.indexOf(g) !== -1)\n    : true;\n\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2020, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\nimport {EventEmitter} from '@osjs/event-emitter';\nimport {h, app} from 'hyperapp';\nimport {doubleTap} from '../../utils/input';\nimport {pathJoin} from '../../utils/vfs';\nimport {invertHex} from '../../utils/colors';\n\nconst tapper = doubleTap();\n\nconst validVfsDrop = data => data && data.path;\n\nconst onDropAction = actions => (ev, data, files, shortcut = true) => {\n  if (validVfsDrop(data)) {\n    actions.addEntry({entry: data, shortcut});\n  } else if (files.length > 0) {\n    actions.uploadEntries(files);\n  }\n};\n\nconst isRootElement = ev =>\n  ev.target && ev.target.classList.contains('osjs-desktop-iconview__wrapper');\n\nconst view = (fileIcon, themeIcon, droppable) => (state, actions) =>\n  h('div', {\n    class: 'osjs-desktop-iconview__wrapper',\n    oncontextmenu: ev => {\n      if (isRootElement(ev)) {\n        actions.openContextMenu({ev});\n      }\n    },\n    onclick: ev => {\n      if (isRootElement(ev)) {\n        actions.selectEntry({index: -1});\n      }\n    },\n    oncreate: el => {\n      droppable(el, {\n        ondrop: (ev, data, files) => {\n          if (ev.shiftKey && validVfsDrop(data)) {\n            actions.openDropContextMenu({ev, data, files});\n          } else {\n            onDropAction(actions)(ev, data, files);\n          }\n        }\n      });\n    }\n  }, state.entries.map((entry, index) => {\n    return h('div', {\n      class: 'osjs-desktop-iconview__entry' + (\n        state.selected === index\n          ? ' osjs-desktop-iconview__entry--selected'\n          : ''\n      ),\n      oncontextmenu: ev => actions.openContextMenu({ev, entry, index}),\n      ontouchstart: ev => tapper(ev, () => actions.openEntry({ev, entry, index})),\n      ondblclick: ev => actions.openEntry({ev, entry, index}),\n      onclick: ev => actions.selectEntry({ev, entry, index})\n    }, [\n      h('div', {\n        class: 'osjs-desktop-iconview__entry__inner'\n      }, [\n        h('div', {\n          class: 'osjs-desktop-iconview__entry__icon'\n        }, [\n          h('img', {\n            src: entry.icon ? entry.icon : themeIcon(fileIcon(entry).name),\n            class: 'osjs-desktop-iconview__entry__icon__icon'\n          }),\n          entry.shortcut !== false\n            ? h('img', {\n              src: themeIcon('emblem-symbolic-link'),\n              class: 'osjs-desktop-iconview__entry__icon__shortcut'\n            })\n            : null\n        ]),\n        h('div', {\n          class: 'osjs-desktop-iconview__entry__label'\n        }, entry.filename)\n      ])\n    ]);\n  }));\n\nconst createShortcuts = (root, readfile, writefile) => {\n  const read = () => {\n    const filename = pathJoin(root, '.shortcuts.json');\n\n    return readfile(filename)\n      .then(contents => JSON.parse(contents))\n      .catch(error => ([]));\n  };\n\n  const write = shortcuts => {\n    const filename = pathJoin(root, '.shortcuts.json');\n    const contents = JSON.stringify(shortcuts || []);\n\n    return writefile(filename, contents)\n      .catch(() => 0);\n  };\n\n  const add = entry => read(root)\n    .then(shortcuts => ([...shortcuts, entry]))\n    .then(write);\n\n  const remove = index => read(root)\n    .then(shortcuts => {\n      shortcuts.splice(index, 1);\n      return shortcuts;\n    })\n    .then(write);\n\n  return {read, add, remove};\n};\n\nconst readDesktopFolder = (root, readdir, shortcuts) => {\n  const read = () => readdir(root, {\n    showHiddenFiles: false\n  })\n    .then(files => files.map(s => ({shortcut: false, ...s})));\n\n  const readShortcuts = () => shortcuts.read()\n    .then(shortcuts => shortcuts.map((s, index) => ({shortcut: index, ...s})));\n\n  return () => {\n    return Promise.all([readShortcuts(), read()])\n      .then(results => [].concat(...results));\n  };\n};\n\n/**\n * Desktop Icon View\n */\nexport class DesktopIconView extends EventEmitter {\n\n  /**\n   * @param {Core} core Core reference\n   */\n  constructor(core) {\n    super('DesktopIconView');\n\n    this.core = core;\n    this.$root = null;\n    this.iconview = null;\n    this.root = 'home:/.desktop';\n  }\n\n  destroy() {\n    if (this.$root && this.$root.parentNode) {\n      this.$root.parentNode.removeChild(this.$root);\n    }\n\n    this.iconview = null;\n    this.$root = null;\n\n    this.emit('destroy');\n  }\n\n  /**\n   * @param {object} rect Rectangle from desktop\n   */\n  resize(rect) {\n    if (!this.$root) {\n      return;\n    }\n\n    this.$root.style.top = `${rect.top}px`;\n    this.$root.style.left = `${rect.left}px`;\n    this.$root.style.bottom = `${rect.bottom}px`;\n    this.$root.style.right = `${rect.right}px`;\n  }\n\n  _render(root) {\n    const oldRoot = this.root;\n    if (root) {\n      this.root = root;\n    }\n\n    if (this.$root) {\n      if (this.root !== oldRoot) {\n        this.iconview.reload();\n      }\n\n      return false;\n    }\n\n    return true;\n  }\n\n  render(root) {\n    if (!this._render(root)) {\n      return;\n    }\n\n    this.$root = document.createElement('div');\n    this.$root.className = 'osjs-desktop-iconview';\n    this.core.$root.appendChild(this.$root);\n\n    const {droppable} = this.core.make('osjs/dnd');\n    const {icon: fileIcon} = this.core.make('osjs/fs');\n    const {icon: themeIcon} = this.core.make('osjs/theme');\n    const {copy, readdir, readfile, writefile, unlink, mkdir} = this.core.make('osjs/vfs');\n    const error = err => console.error(err);\n    const shortcuts = createShortcuts(root, readfile, writefile);\n    const read = readDesktopFolder(root, readdir, shortcuts);\n\n    this.iconview = app({\n      selected: -1,\n      entries: []\n    }, {\n      setEntries: entries => ({entries}),\n\n      openDropContextMenu: ({ev, data, files}) => {\n        this.createDropContextMenu(ev, data, files);\n      },\n\n      openContextMenu: ({ev, entry, index}) => {\n        if (entry) {\n          this.createFileContextMenu(ev, entry);\n\n          return {selected: index};\n        } else {\n          this.createRootContextMenu(ev);\n\n          return {selected: -1};\n        }\n      },\n\n      openEntry: ({entry, forceDialog}) => {\n        if (entry.isDirectory) {\n          this.core.run('FileManager', {\n            path: entry\n          });\n        } else if (entry.mime === 'osjs/application') {\n          this.core.run(entry.filename);\n        } else {\n          this.core.open(entry, {\n            useDefault: true,\n            forceDialog\n          });\n        }\n\n        return {selected: -1};\n      },\n\n      selectEntry: ({index}) => ({selected: index}),\n\n      uploadEntries: files => {\n        // TODO\n      },\n\n      addEntry: ({entry, shortcut}) => (state, actions) => {\n        const dest = `${root}/${entry.filename}`;\n\n        mkdir(root)\n          .catch(() => true)\n          .then(() => {\n            if (shortcut || entry.mime === 'osjs/application') {\n              return shortcuts.add(entry);\n            }\n\n            return copy(entry, dest)\n              .then(() => actions.reload())\n              .catch(error);\n          })\n          .then(() => actions.reload());\n\n        return {selected: -1};\n      },\n\n      removeEntry: entry => (state, actions) => {\n        if (entry.shortcut !== false) {\n          shortcuts.remove(entry.shortcut)\n            .then(() => actions.reload())\n            .catch(error);\n        } else {\n          unlink(entry)\n            .then(() => actions.reload())\n            .catch(error);\n        }\n\n        return {selected: -1};\n      },\n\n      reload: () => (state, actions) => {\n        read()\n          .then(entries => entries.filter(e => e.filename !== '..'))\n          .then(entries => actions.setEntries(entries));\n      }\n\n    }, view(fileIcon, themeIcon, droppable), this.$root);\n\n    this.applySettings();\n    this.iconview.reload();\n  }\n\n  createFileContextMenu(ev, entry) {\n    const _ = this.core.make('osjs/locale').translate;\n\n    this.core.make('osjs/contextmenu', {\n      position: ev,\n      menu: [{\n        label: _('LBL_OPEN'),\n        onclick: () => this.iconview.openEntry({entry, forceDialog: false})\n      }, {\n        label: _('LBL_OPEN_WITH'),\n        onclick: () => this.iconview.openEntry({entry, forceDialog: true})\n      }, {\n        label: entry.shortcut !== false ? _('LBL_REMOVE_SHORTCUT') : _('LBL_DELETE'),\n        onclick: () => this.iconview.removeEntry(entry)\n      }]\n    });\n  }\n\n  createDropContextMenu(ev, data, files) {\n    const _ = this.core.make('osjs/locale').translate;\n\n    const action = shortcut => onDropAction(this.iconview)(ev, data, files, shortcut);\n\n    this.core.make('osjs/contextmenu', {\n      position: ev,\n      menu: [{\n        label: _('LBL_COPY'),\n        onclick: () => action(false)\n      }, {\n        label: _('LBL_CREATE_SHORTCUT'),\n        onclick: () => action(true)\n      }]\n    });\n  }\n\n  createRootContextMenu(ev) {\n    this.core.make('osjs/desktop')\n      .openContextMenu(ev);\n  }\n\n  applySettings() {\n    if (!this.$root) {\n      return;\n    }\n\n    const settings = this.core\n      .make('osjs/settings');\n\n    const defaults = this.core\n      .config('desktop.settings');\n\n    const fontColorStyle = settings\n      .get('osjs/desktop', 'iconview.fontColorStyle', defaults.iconview.fontColorStyle);\n\n    const fontColor = settings\n      .get('osjs/desktop', 'iconview.fontColor', '#ffffff', defaults.iconview.fontColor);\n\n    const backgroundColor = settings\n      .get('osjs/desktop', 'background.color', defaults.background.color);\n\n    const styles = {\n      system: 'inherit',\n      invert: invertHex(backgroundColor),\n      custom: fontColor\n    };\n\n    this.$root.style.color = styles[fontColorStyle];\n  }\n}\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2020, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\n/**\n * Inverts a HEX color\n * @link https://stackoverflow.com/a/51568508\n */\nexport const invertHex = hex => '#' + hex\n  .match(/[a-f0-9]{2}/ig)\n  .map(e => (255 - parseInt(e, 16) | 0)\n    .toString(16)\n    .replace(/^([a-f0-9])$/, '0$1')\n  )\n  .join('');\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2020, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\nimport {h, app} from 'hyperapp';\nimport {EventEmitter} from '@osjs/event-emitter';\n\nconst createView = (core, fs, icon, _) => {\n  const resultView = ({results, index}, actions) => results.map((r, i) => h('li', {\n    onclick: () => actions.open(i),\n    onupdate: el => {\n      if (i === index) {\n        el.scrollIntoView();\n      }\n    },\n    class: [\n      'osjs-search-result',\n      index === i ? 'osjs__active' : ''\n    ].join(' ')\n  }, [\n    h('img', {src: icon(fs.icon(r).name + '.png')}),\n    h('span', {}, `${r.path} (${r.mime})`)\n  ]));\n\n  return (state, actions) => h('div', {\n    class: 'osjs-search-container osjs-notification',\n    style: {\n      display: state.visible ? undefined : 'none'\n    }\n  }, [\n    h('input', {\n      type: 'text',\n      placeholder: _('LBL_SEARCH_PLACEHOLDER'),\n      class: 'osjs-search-input',\n      value: state.query,\n      onblur: () => {\n        if (!state.value) {\n          setTimeout(() => actions.toggle(false), 300);\n        }\n      },\n      oninput: ev => actions.setQuery(ev.target.value),\n      onkeydown: ev => {\n        if (ev.keyCode === 38) { // Up\n          actions.setPreviousIndex();\n        } else if (ev.keyCode === 40) { // Down\n          actions.setNextIndex();\n        } else if (ev.keyCode === 27) { // Escape\n          actions.resetIndex();\n\n          if (state.index === -1) {\n            actions.hide();\n          }\n        }\n      },\n      onkeypress: ev => {\n        if (ev.keyCode === 13) {\n          if (state.index >= 0) {\n            actions.open(state.index);\n          } else {\n            actions.search(state.query.replace(/\\*?$/, '*').replace(/^\\*?/, '*'));\n          }\n        }\n      }\n    }),\n    h('div', {\n      'data-error': !!state.error,\n      class: 'osjs-search-message',\n      style: {\n        display: (state.error || state.status) ? 'block' : 'none'\n      }\n    }, state.error || state.status),\n    h('ol', {\n      class: 'osjs-search-results',\n      style: {\n        display: state.results.length ? undefined : 'none'\n      }\n    }, resultView(state, actions))\n  ]);\n};\n\n/**\n * Search UI Adapter\n */\nconst create = (core, $element) => {\n  const _ = core.make('osjs/locale').translate;\n  const fs = core.make('osjs/fs');\n  const {icon} = core.make('osjs/theme');\n  const view = createView(core, fs, icon, _);\n  const ee = new EventEmitter('SearchUI');\n\n  const hyperapp = app({\n    query: '',\n    index: -1,\n    status: undefined,\n    error: null,\n    visible: false,\n    results: []\n  }, {\n    search: query => {\n      ee.emit('search', query);\n\n      return {status: _('LBL_SEARCH_WAIT')};\n    },\n    open: index => (state, actions) => {\n      const iter = state.results[index];\n      if (iter) {\n        ee.emit('open', iter);\n      }\n\n      actions.toggle(false);\n    },\n    resetIndex: () => () => ({\n      index: -1\n    }),\n    setNextIndex: () => state => ({\n      index: (state.index + 1) % state.results.length\n    }),\n    setPreviousIndex: () => state => ({\n      index: state.index <= 0 ? state.results.length - 1 : state.index - 1\n    }),\n    setError: error => () => ({\n      error,\n      status: undefined,\n      index: -1\n    }),\n    setResults: results => () => ({\n      results,\n      index: -1,\n      status: _('LBL_SEARCH_RESULT', results.length),\n    }),\n    setQuery: query => () => ({\n      query\n    }),\n    hide: () => {\n      ee.emit('hide');\n    },\n    toggle: visible => state => ({\n      query: '',\n      results: [],\n      index: -1,\n      status: undefined,\n      error: null,\n      visible: typeof visible === 'boolean' ? visible : !state.visible\n    })\n  }, view, $element);\n\n  ee.on('error', error => hyperapp.setError(error));\n  ee.on('success', results => hyperapp.setResults(results));\n  ee.on('toggle', toggle => hyperapp.toggle(toggle));\n  ee.on('focus', () => {\n    const el = $element.querySelector('.osjs-search-input');\n    if (el) {\n      el.focus();\n    }\n  });\n\n  return ee;\n};\n\nexport default create;\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2020, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\nimport Window from './window';\nimport createUI from './adapters/ui/search';\nimport logger from './logger';\n\n/**\n * Search Service\n */\nexport default class Search {\n  constructor(core) {\n    this.core = core;\n    this.ui = null;\n    this.focusLastWindow = null;\n    this.$element = document.createElement('div');\n  }\n\n  destroy() {\n    if (this.ui) {\n      this.ui.destroy();\n    }\n  }\n\n  /**\n   * Initializes Search Service\n   */\n  init() {\n    const {icon} = this.core.make('osjs/theme');\n    const _ = this.core.make('osjs/locale').translate;\n\n    this.$element.className = 'osjs-search';\n    this.core.$root.appendChild(this.$element);\n\n    this.core.make('osjs/tray').create({\n      title: _('LBL_SEARCH_TOOLTOP', 'F3'),\n      icon: icon('system-search.png')\n    }, () => this.show());\n\n    this.ui = createUI(this.core, this.$element);\n    this.ui.on('hide', () => this.hide());\n    this.ui.on('open', iter => this.core.open(iter));\n    this.ui.on('search', query => {\n      this.search(query)\n        .then(results => this.ui.emit('success', results))\n        .catch(error => this.ui.emit('error', error));\n    });\n  }\n\n  /**\n   * Performs a search across all mounts\n   * @param {string} pattern Search query\n   * @return {Promise<FileMetadata[], Error>}\n   */\n  search(pattern) {\n    const vfs = this.core.make('osjs/vfs');\n    const promises = this.core.make('osjs/fs')\n      .mountpoints()\n      .map(mount => `${mount.name}:/`)\n      .map(path => {\n        return vfs.search({path}, pattern)\n          .catch(error => {\n            logger.warn('Error while searching', error);\n            return [];\n          });\n      });\n\n    return Promise.all(promises)\n      .then(lists => [].concat(...lists));\n  }\n\n  /**\n   * Focuses UI\n   */\n  focus() {\n    if (this.ui) {\n      this.ui.emit('focus');\n    }\n  }\n\n  /**\n   * Hides UI\n   */\n  hide() {\n    if (this.ui) {\n      this.ui.emit('toggle', false);\n\n      const win = Window.lastWindow();\n      if (this.focusLastWindow && win) {\n        win.focus();\n      }\n    }\n  }\n\n  /**\n   * Shows UI\n   */\n  show() {\n    if (this.ui) {\n      const win = Window.lastWindow();\n\n      this.focusLastWindow = win && win.blur();\n\n      this.ui.emit('toggle', true);\n      setTimeout(() => this.focus(), 1);\n    }\n  }\n}\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2020, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\nimport {EventEmitter} from '@osjs/event-emitter';\nimport Application from './application';\nimport {handleTabOnTextarea} from './utils/dom';\nimport {matchKeyCombo} from './utils/input';\nimport {DesktopIconView} from './adapters/ui/iconview';\nimport Window from './window';\nimport Search from './search';\nimport merge from 'deepmerge';\nimport logger from './logger';\n\nconst TEMPLATE = subtract => `\n  .osjs-root[data-mobile=true] .osjs-window,\n  .osjs-window[data-maximized=true] {\n    top: ${subtract.top}px !important;\n    left: ${subtract.left}px !important;\n    right: ${subtract.right}px !important;\n    bottom: ${subtract.bottom}px !important;\n    width: calc(100% -  ${subtract.left + subtract.right}px) !important;\n    height: calc(100% - ${subtract.top + subtract.bottom}px) !important;\n  }\n`;\n\n/*\n * Creates a set of styles based on background settings\n */\nconst applyBackgroundStyles = (core, background) => {\n  const {$root} = core;\n\n  const styles = {\n    backgroundRepeat: 'no-repeat',\n    backgroundPosition: '50% 50%',\n    backgroundSize: 'auto',\n    backgroundColor: background.color,\n    backgroundImage: 'none'\n  };\n\n  if (background.style === 'cover' || background.style === 'contain') {\n    styles.backgroundSize = background.style;\n  } else if (background.style === 'repeat') {\n    styles.backgroundRepeat = 'repeat';\n  }\n\n  if (background.style !== 'color') {\n    if (background.src === undefined) {\n      styles.backgroundImage = undefined;\n    } else if (typeof background.src === 'string') {\n      styles.backgroundImage = `url(${background.src})`;\n    } else if (background.src) {\n      core.make('osjs/vfs')\n        .url(background.src)\n        .then(src => {\n          setTimeout(() => ($root.style.backgroundImage = `url(${src})`), 1);\n        })\n        .catch(error => logger.warn('Error while setting wallpaper from VFS', error));\n    }\n  }\n\n  Object.keys(styles).forEach(k => ($root.style[k] = styles[k]));\n};\n\n/*\n * Creates a rectangle with the realestate panels takes up\n */\nconst createPanelSubtraction = (panel, panels) => {\n  const subtraction = {top: 0, left: 0, right: 0, bottom: 0};\n  const set = p => (subtraction[p.options.position] = p.$element.offsetHeight);\n\n  if (panels.length > 0) {\n    panels.forEach(set);\n  } else {\n    // Backward compability\n    set(panel);\n  }\n\n  return subtraction;\n};\n\nconst isVisible = w => w &&\n  !w.getState('minimized') &&\n  w.getState('focused');\n\n/**\n * Desktop Class\n *\n * @desc Handles the Desktop\n */\nexport default class Desktop extends EventEmitter {\n\n  /**\n   * Create Desktop\n   *\n   * @param {Core} core Core reference\n   */\n  constructor(core, options) {\n    super('Desktop');\n\n    this.core = core;\n    this.options = {\n      contextmenu: [],\n      ...options\n    };\n    this.$theme = [];\n    this.$icons = [];\n    this.$styles = document.createElement('style');\n    this.$styles.setAttribute('type', 'text/css');\n    this.contextmenuEntries = [];\n    this.search = core.config('search.enabled') ? new Search(core) : null;\n    this.iconview = new DesktopIconView(this.core);\n    this.keyboardContext = null;\n\n    this.subtract = {\n      left: 0,\n      top: 0,\n      right: 0,\n      bottom: 0\n    };\n  }\n\n  /**\n   * Destroy Desktop\n   */\n  destroy() {\n    if (this.search) {\n      this.search = this.search.destroy();\n    }\n\n    if (this.iconview) {\n      this.iconview.destroy();\n    }\n\n    if (this.$styles && this.$styles.parentNode) {\n      this.$styles.remove();\n    }\n\n    this.$styles = null;\n\n    this._removeIcons();\n    this._removeTheme();\n  }\n\n  /**\n   * Initializes Desktop\n   */\n  init() {\n    this.initConnectionEvents();\n    this.initUIEvents();\n    this.initDragEvents();\n    this.initKeyboardEvents();\n    this.initGlobalKeyboardEvents();\n    this.initMouseEvents();\n    this.initBaseEvents();\n    this.initLocales();\n    this.initDeveloperTray();\n\n    this.core.$resourceRoot.appendChild(this.$styles);\n  }\n\n  initConnectionEvents() {\n    this.core.on('osjs/core:disconnect', ev => {\n      logger.warn('Connection closed', ev);\n\n      const _ = this.core.make('osjs/locale').translate;\n      this.core.make('osjs/notification', {\n        title: _('LBL_CONNECTION_LOST'),\n        message: _('LBL_CONNECTION_LOST_MESSAGE')\n      });\n    });\n\n    this.core.on('osjs/core:connect', (ev, reconnected) => {\n      logger.debug('Connection opened');\n\n      if (reconnected) {\n        const _ = this.core.make('osjs/locale').translate;\n        this.core.make('osjs/notification', {\n          title: _('LBL_CONNECTION_RESTORED'),\n          message: _('LBL_CONNECTION_RESTORED_MESSAGE')\n        });\n      }\n    });\n\n    this.core.on('osjs/core:connection-failed', (ev) => {\n      logger.warn('Connection failed');\n\n      const _ = this.core.make('osjs/locale').translate;\n      this.core.make('osjs/notification', {\n        title: _('LBL_CONNECTION_FAILED'),\n        message: _('LBL_CONNECTION_FAILED_MESSAGE')\n      });\n    });\n  }\n\n  initUIEvents() {\n    this.core.on(['osjs/panel:create', 'osjs/panel:destroy'], (panel, panels = []) => {\n      this.subtract = createPanelSubtraction(panel, panels);\n\n      try {\n        this._updateCSS();\n        Window.getWindows().forEach(w => w.clampToViewport());\n        this._updateIconview();\n      } catch (e) {\n        logger.warn('Panel event error', e);\n      }\n      this.core.emit('osjs/desktop:transform', this.getRect());\n    });\n\n    this.core.on('osjs/window:transitionend', (...args) => {\n      this.emit('theme:window:transitionend', ...args);\n    });\n\n    this.core.on('osjs/window:change', (...args) => {\n      this.emit('theme:window:change', ...args);\n    });\n  }\n\n  initDeveloperTray() {\n    if (!this.core.config('development')) {\n      return;\n    }\n\n    // Creates tray\n    const tray = this.core.make('osjs/tray').create({\n      title: 'OS.js developer tools'\n    }, (ev) => this.onDeveloperMenu(ev));\n\n    this.core.on('destroy', () => tray.destroy());\n  }\n\n  initDragEvents() {\n    // Handles dnd\n    this.core.$root.addEventListener('dragover', e => {\n      e.preventDefault();\n    });\n\n    this.core.$root.addEventListener('drop', e => {\n      e.preventDefault();\n    });\n  }\n\n  initKeyboardEvents() {\n    const forwardKeyEvent = (n, e) => {\n      const w = Window.lastWindow();\n      if (isVisible(w)) {\n        w.emit(n, e, w);\n      }\n    };\n\n    const isWithinContext = (target) => this.keyboardContext &&\n      this.keyboardContext.contains(target);\n\n    const isWithinWindow = (w, target) => w &&\n      w.$element.contains(target);\n\n    const isWithin = (w, target) => isWithinWindow(w, target) ||\n      isWithinContext(target);\n\n    ['keydown', 'keyup', 'keypress'].forEach(n => {\n      this.core.$root.addEventListener(n, e => forwardKeyEvent(n, e));\n    });\n\n    this.core.$root.addEventListener('keydown', e => {\n      if (!e.target) {\n        return;\n      }\n\n      if (e.keyCode === 114) { // F3\n        e.preventDefault();\n\n        if (this.search) {\n          this.search.show();\n        }\n      } else if (e.keyCode === 9) { // Tab\n        const {tagName} = e.target;\n        const isInput = ['INPUT', 'TEXTAREA', 'SELECT', 'BUTTON'].indexOf(tagName) !== -1;\n        const w = Window.lastWindow();\n\n        if (isWithin(w, e.target)) {\n          if (isInput) {\n            if (tagName === 'TEXTAREA') {\n              handleTabOnTextarea(e);\n            }\n          } else {\n            e.preventDefault();\n          }\n        } else {\n          e.preventDefault();\n        }\n      }\n    });\n  }\n\n  initGlobalKeyboardEvents() {\n    let keybindings = [];\n\n    const defaults = this.core.config('desktop.settings.keybindings', {});\n\n    const reload = () => {\n      keybindings = this.core.make('osjs/settings')\n        .get('osjs/desktop', 'keybindings', defaults);\n    };\n\n    window.addEventListener('keydown', ev => {\n      Object.keys(keybindings).some(eventName => {\n        const combo = keybindings[eventName];\n        const result = matchKeyCombo(combo, ev);\n        if (result) {\n          this.core.emit('osjs/desktop:keybinding:' + eventName, ev);\n        }\n      });\n    });\n\n    this.core.on('osjs/settings:load', reload);\n    this.core.on('osjs/settings:save', reload);\n    this.core.on('osjs/core:started', reload);\n\n    const closeBindingName = 'osjs/desktop:keybinding:close-window';\n    const closeBindingCallback = () => {\n      const w = Window.lastWindow();\n      if (isVisible(w)) {\n        w.close();\n      }\n    };\n    this.core.on(closeBindingName, closeBindingCallback);\n  }\n\n  initMouseEvents() {\n    // Custom context menu\n    this.core.$root.addEventListener('contextmenu', ev => {\n      if (ev.target === this.core.$root) {\n        this.onContextMenu(ev);\n      }\n    });\n\n    // A hook to prevent iframe events when dragging mouse\n    window.addEventListener('mousedown', () => {\n      let moved = false;\n\n      const onmousemove = () => {\n        if (!moved) {\n          moved = true;\n\n          this.core.$root.setAttribute('data-mousemove', String(true));\n        }\n      };\n\n      const onmouseup = () => {\n        moved = false;\n\n        this.core.$root.setAttribute('data-mousemove', String(false));\n        window.removeEventListener('mousemove', onmousemove);\n        window.removeEventListener('mouseup', onmouseup);\n      };\n\n      window.addEventListener('mousemove', onmousemove);\n      window.addEventListener('mouseup', onmouseup);\n    });\n  }\n\n  initBaseEvents() {\n    // Resize hook\n    let resizeDebounce;\n    window.addEventListener('resize', () => {\n      clearTimeout(resizeDebounce);\n      resizeDebounce = setTimeout(() => this._updateCSS(), 200);\n    });\n\n    // Prevent navigation\n    history.pushState(null, null, document.URL);\n    window.addEventListener('popstate', () => {\n      history.pushState(null, null, document.URL);\n    });\n\n    // Prevents background scrolling on iOS\n    this.core.$root.addEventListener('touchmove', e => e.preventDefault());\n  }\n\n  initLocales() {\n    // Right-to-left support triggers\n    const rtls = this.core.config('locale.rtl');\n    const checkRTL = () => {\n      const locale = this.core.make('osjs/locale')\n        .getLocale()\n        .split('_')[0]\n        .toLowerCase();\n\n      const isRtl = rtls.indexOf(locale) !== -1;\n      this.core.$root.setAttribute('data-dir', isRtl ? 'rtl' : 'ltr');\n    };\n    this.core.on('osjs/settings:load', checkRTL);\n    this.core.on('osjs/settings:save', checkRTL);\n    this.core.on('osjs/core:started', checkRTL);\n  }\n\n  start() {\n    if (this.search) {\n      this.search.init();\n    }\n\n    this._updateCSS();\n    this._updateIconview();\n  }\n\n  _updateIconview() {\n    if (this.iconview) {\n      this.iconview.resize(this.getRect());\n      this.iconview.applySettings();\n    }\n  }\n\n  /**\n   * Update CSS\n   */\n  _updateCSS() {\n    if (!this.$styles) {\n      return;\n    }\n\n    const mobile = this.core.config('windows.mobile');\n    const isMobile = !mobile ? false : this.core.$root.offsetWidth <= mobile;\n    this.core.$root.setAttribute('data-mobile', isMobile);\n\n    this.$styles.innerHTML = TEMPLATE(this.subtract);\n  }\n\n  addContextMenu(entries) {\n    this.contextmenuEntries = this.contextmenuEntries.concat(entries);\n  }\n\n  /**\n   * Applies settings and updates desktop\n   * @param {object} [settings] Use this set instead of loading from settings\n   */\n  applySettings(settings) {\n    const lockSettings = this.core.config('desktop.lock');\n    const defaultSettings = this.core.config('desktop.settings');\n    let newSettings;\n\n    if (lockSettings) {\n      newSettings = defaultSettings;\n    } else {\n      const userSettings = settings\n        ? settings\n        : this.core.make('osjs/settings').get('osjs/desktop');\n\n      newSettings = merge(defaultSettings, userSettings, {\n        arrayMerge: (dest, source) => source\n      });\n    }\n\n    const applyOverlays = (test, list) => {\n      if (this.core.has(test)) {\n        const instance = this.core.make(test);\n        instance.removeAll();\n        list.forEach(item => instance.create(item));\n      }\n    };\n\n    const applyCss = ({font, background}) => {\n      this.core.$root.style.fontFamily = `${font}, sans-serif`;\n\n      applyBackgroundStyles(this.core, background);\n\n    };\n\n    applyCss(newSettings);\n\n    // TODO: Multiple panels\n    applyOverlays('osjs/panels', (newSettings.panels || []).slice(-1));\n    applyOverlays('osjs/widgets', newSettings.widgets);\n\n    this.applyTheme(newSettings.theme);\n    this.applyIcons(newSettings.icons);\n\n    this.applyIconView(newSettings.iconview);\n\n    this.core.emit('osjs/desktop:applySettings');\n\n    return {...newSettings};\n  }\n\n  /**\n   * Removes current style theme from DOM\n   */\n  _removeTheme() {\n    this.emit('theme:destroy');\n\n    this.off([\n      'theme:init',\n      'theme:destroy',\n      'theme:window:change',\n      'theme:window:transitionend'\n    ]);\n\n    this.$theme.forEach(el => {\n      if (el && el.parentNode) {\n        el.remove();\n      }\n    });\n\n    this.$theme = [];\n  }\n\n  /**\n   * Removes current icon theme from DOM\n   */\n  _removeIcons() {\n    this.$icons.forEach(el => {\n      if (el && el.parentNode) {\n        el.remove();\n      }\n    });\n\n    this.$icons = [];\n  }\n\n  /**\n   * Adds or removes the icon view\n   */\n  applyIconView(settings) {\n    if (!this.iconview) {\n      return;\n    }\n\n    if (settings.enabled) {\n      this.iconview.render(settings.path);\n      this.iconview.resize(this.getRect());\n    } else {\n      this.iconview.destroy();\n    }\n  }\n\n  /**\n   * Sets the current icon theme from settings\n   */\n  applyIcons(name) {\n    name = name || this.core.config('desktop.icons');\n\n    return this._applyTheme(name)\n      .then(({elements, errors, callback, metadata}) => {\n        this._removeIcons();\n\n        this.$icons = Object.values(elements);\n\n        this.emit('icons:init');\n      });\n  }\n\n  /**\n   * Sets the current style theme from settings\n   */\n  applyTheme(name) {\n    name = name || this.core.config('desktop.theme');\n\n    return this._applyTheme(name)\n      .then(({elements, errors, callback, metadata}) => {\n        this._removeTheme();\n\n        if (callback && metadata) {\n          try {\n            callback(this.core, this, {}, metadata);\n          } catch (e) {\n            logger.warn('Exception while calling theme callback', e);\n          }\n        }\n\n        this.$theme = Object.values(elements);\n\n        this.emit('theme:init');\n      });\n  }\n\n  _applyTheme(name, cb) {\n    return this.core.make('osjs/packages')\n      .launch(name)\n      .then(result => {\n        if (result.errors.length) {\n          logger.error(result.errors);\n        }\n\n        return result;\n      });\n  }\n\n  _applySettingsByKey(k, v) {\n    return this.core.make('osjs/settings')\n      .set('osjs/desktop', k, v)\n      .save()\n      .then(() => this.applySettings());\n  }\n\n  onDeveloperMenu(ev) {\n    const _ = this.core.make('osjs/locale').translate;\n    const s = this.core.make('osjs/settings').get();\n\n    const storageItems = Object.keys(s)\n      .map(k => ({\n        label: k,\n        onclick: () => {\n          this.core.make('osjs/settings')\n            .clear(k)\n            .then(() => this.applySettings());\n        }\n      }));\n\n    this.core.make('osjs/contextmenu').show({\n      position: ev,\n      menu: [\n        {\n          label: _('LBL_KILL_ALL'),\n          onclick: () => Application.destroyAll()\n        },\n        {\n          label: _('LBL_APPLICATIONS'),\n          items: Application.getApplications().map(proc => ({\n            label: `${proc.metadata.name} (${proc.pid})`,\n            items: [\n              {\n                label: _('LBL_KILL'),\n                onclick: () => proc.destroy()\n              },\n              {\n                label: _('LBL_RELOAD'),\n                onclick: () => proc.relaunch()\n              }\n            ]\n          }))\n        },\n        {\n          label: 'Clear Storage',\n          items: storageItems\n        }\n      ]\n    });\n  }\n\n  onContextMenu(ev) {\n    const lockSettings = this.core.config('desktop.lock');\n    const extras = [].concat(...this.contextmenuEntries.map(e => typeof e === 'function' ? e() : e));\n    const config = this.core.config('desktop.contextmenu');\n    const hasIconview = this.core.make('osjs/settings').get('osjs/desktop', 'iconview.enabled');\n\n    if (config === false || config.enabled === false) {\n      return;\n    }\n\n    const useDefaults = config === true || config.defaults; // NOTE: Backward compability\n\n    const _ = this.core.make('osjs/locale').translate;\n    const __ = this.core.make('osjs/locale').translatableFlat;\n\n    const themes = this.core.make('osjs/packages')\n      .getPackages(p => p.type === 'theme');\n\n    const defaultItems = lockSettings ? [] : [{\n      label: _('LBL_DESKTOP_SELECT_WALLPAPER'),\n      onclick: () => {\n        this.core.make('osjs/dialog', 'file', {\n          mime: ['^image']\n        }, (btn, file) => {\n          if (btn === 'ok') {\n            this._applySettingsByKey('background.src', file);\n          }\n        });\n      }\n    }, {\n      label: _('LBL_DESKTOP_SELECT_THEME'),\n      items: themes.map(t => ({\n        label: __(t.title, t.name),\n        onclick: () => {\n          this._applySettingsByKey('theme', t.name);\n        }\n      }))\n    }];\n\n    if (hasIconview && this.iconview) {\n      defaultItems.push({\n        label: _('LBL_REFRESH'),\n        onclick: () => this.iconview.iconview.reload()\n      });\n    }\n\n    const base = useDefaults === 'function'\n      ? config.defaults(this, defaultItems)\n      : (useDefaults ? defaultItems : []);\n\n    const provided = typeof this.options.contextmenu === 'function'\n      ? this.options.contextmenu(this, defaultItems)\n      : this.options.contextmenu || [];\n\n    const menu = [\n      ...base,\n      ...provided,\n      ...extras\n    ];\n\n    if (menu.length) {\n      this.core.make('osjs/contextmenu').show({\n        menu,\n        position: ev\n      });\n    }\n  }\n\n  /**\n   * Sets the keyboard context.\n   *\n   * Used for tabbing and other special events\n   *\n   * @param {Element} [ctx]\n   */\n  setKeyboardContext(ctx) {\n    this.keyboardContext = ctx;\n  }\n\n  /**\n   * Gets the rectangle of available space\n   *\n   * @desc This is based on any panels etc taking up space\n   * @return {object}\n   */\n  getRect() {\n    const root = this.core.$root;\n    const {left, top, right, bottom} = this.subtract;\n    const width = root.offsetWidth - left - right;\n    const height = root.offsetHeight - top - bottom;\n\n    return {width, height, top, bottom, left, right};\n  }\n}\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2020, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\nimport {h, app} from 'hyperapp';\nimport {createNativeNotification} from './utils/dom';\nimport logger from './logger';\n\n/**\n * Notification\n *\n * @desc Class that creates a notification\n */\nexport default class Notification {\n\n  /**\n   * Create notification\n   *\n   * @param {Core} core Core reference\n   * @param {Element} root Root DOM element\n   * @param {object} options Options\n   * @param {string} options.title Title\n   * @param {string} options.message Message\n   * @param {string} [options.sound=message] Sound to play\n   * @param {string} [options.icon] Icon source\n   * @param {number} [options.timeout=5000] Timeout value (0=infinite)\n   * @param {string} [options.className] Adds a DOM class name to notification\n   */\n  constructor(core, root, options = {}) {\n    const defaultLabel = core.make('osjs/locale')\n      .translate('LBL_NOTIFICATION');\n\n    /**\n     * Core instance reference\n     * @type {Core}\n     */\n    this.core = core;\n\n    /**\n     * Root node reference\n     * @type {Element}\n     */\n    this.$root = root;\n\n    /**\n     * Notification DOM node\n     * @type {Element}\n     */\n    this.$element = document.createElement('div');\n\n    /**\n     * The notification destruction state\n     * @type {Boolean}\n     */\n    this.destroyed = false;\n\n    /**\n     * Options\n     * @type {Object}\n     */\n    this.options = {\n      icon: null,\n      title: defaultLabel,\n      message: defaultLabel,\n      timeout: 5000,\n      native: core.config('notifications.native', false),\n      sound: 'message',\n      className: '',\n      ...options\n    };\n\n    this.core.emit('osjs/notification:create', this);\n  }\n\n  /**\n   * Destroy notification\n   */\n  destroy() {\n    if (this.destroyed) {\n      return;\n    }\n\n    this.destroyed = true;\n    this.core.emit('osjs/notification:destroy', this);\n\n    this.$element.remove();\n    this.$element = null;\n    this.$root = null;\n  }\n\n  /**\n   * Render notification\n   * @return {<Promise<boolean, Error>}\n   */\n  render() {\n    const onclick = () => this.destroy();\n\n    const renderCustom = () => {\n      const view = state => h('div', {\n        class: 'osjs-notification-wrapper',\n        'data-has-icon': !!state.icon,\n        style: {\n          backgroundImage: state.icon ? `url(${state.icon})` : undefined\n        }\n      }, [\n        h('div', {class: 'osjs-notification-title'}, state.title),\n        h('div', {class: 'osjs-notification-message'}, state.message),\n      ]);\n\n      this.$element.classList.add('osjs-notification');\n      if (this.options.className) {\n        this.$element.classList.add(this.options.className);\n      }\n\n      if (this.options.timeout) {\n        setTimeout(() => this.destroy(), this.options.timeout);\n      }\n\n      this.$element.addEventListener('click', onclick);\n\n      this.$root.appendChild(this.$element);\n\n      app(this.options, {}, view, this.$element);\n\n      return Promise.resolve(true);\n    };\n\n    if (this.options.native) {\n      return createNativeNotification(this.options, onclick)\n        .catch(err => {\n          logger.warn('Error on native notification', err);\n          return renderCustom();\n        });\n    }\n\n    if (this.options.sound) {\n      this.core.make('osjs/sounds')\n        .play(this.options.sound);\n    }\n\n    return renderCustom();\n  }\n\n}\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2020, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\nimport Notification from './notification';\nimport {createCssText} from './utils/dom';\n\n/**\n * Handles Notifications\n */\nexport default class Notifications {\n\n  /**\n   * @param {Core} core OS.js Core instance reference\n   */\n  constructor(core) {\n    this.core = core;\n  }\n\n  /**\n   * Destroy notification handler\n   */\n  destroy() {\n    this.$element.remove();\n    this.$element = null;\n  }\n\n  /**\n   * Initialize notification handler\n   */\n  init() {\n    this.$element = document.createElement('div');\n    this.$element.classList.add('osjs-notifications');\n    this.core.$root.appendChild(this.$element);\n\n    this.core.on('osjs/desktop:applySettings', () => {\n      this.setElementStyles();\n    });\n\n    this.setElementStyles();\n  }\n\n  /**\n   * Create a new notification\n   * @param {object} options See notification class for options\n   * @return {Notification}\n   */\n  create(options) {\n    if (!options) {\n      throw new Error('Notification options not given');\n    }\n\n    const notification = new Notification(this.core, this.$element, options);\n    notification.render();\n    return notification;\n  }\n\n  /**\n   * Sets the element styles\n   */\n  setElementStyles() {\n    const styles = createCssText(this.createElementStyles());\n    this.$element.style.cssText = styles;\n  }\n\n  /**\n   * Creates a new CSS style object\n   * @return {object}\n   */\n  createElementStyles() {\n    const defaultPosition = this.core\n      .config('desktop.settings.notifications.position', 'top-right');\n\n    const position = this.core.make('osjs/settings')\n      .get('osjs/desktop', 'notifications.position', defaultPosition);\n\n    if (position.split('-').length !== 2) {\n      return {};\n    }\n\n    return ['left', 'right', 'top', 'bottom']\n      .reduce((carry, key) => ({\n        [key]: position.indexOf(key) === -1 ? 'auto' : '0',\n        ...carry\n      }), {});\n  }\n}\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2020, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\nimport {supportsPassive} from './utils/dom';\nimport {getEvent, matchKeyCombo} from './utils/input';\nimport {resizer, mover, getMediaQueryName, getCascadePosition} from './utils/windows';\n\nconst isPassive = supportsPassive();\nconst touchArg = isPassive ? {passive: true} : false;\n\n/*\n * Map of available \"actions\"\n */\nconst actionMap = {\n  maximize: (win) => win.maximize() ? null : win.restore(),\n  minimize: (win) => win.minimize(),\n  close: (win) => win.close()\n};\n\n/**\n * Default Window Behavior\n *\n * @desc Controls certain events and their interaction with a window\n */\nexport default class WindowBehavior {\n  /**\n   * Create window behavior\n   *\n   * @param {Core} core Core reference\n   */\n  constructor(core) {\n    this.core = core;\n\n    this.lastAction = null;\n    this.$lofi = document.createElement('div');\n    this.$lofi.className = 'osjs-window-behavior-lofi';\n  }\n\n  /**\n   * Initializes window behavior\n   * @param {Window} win Window reference\n   */\n  init(win) {\n    const ontouchstart = ev => this.mousedown(ev, win);\n    const onmousedown = ev => this.mousedown(ev, win);\n    const onclick = ev => this.click(ev, win);\n    const ondblclick = ev => this.dblclick(ev, win);\n\n    const onicondblclick = ev => {\n      ev.stopPropagation();\n      ev.preventDefault();\n      this.iconDblclick(ev, win);\n    };\n\n    const oniconclick = ev => {\n      ev.stopPropagation();\n      ev.preventDefault();\n\n      this.iconClick(ev, win);\n    };\n\n    const ontrasitionend = ev => {\n      if (win) {\n        win.emit('transitionend');\n      }\n\n      this.core.emit('osjs/window:transitionend', ev, win);\n    };\n\n    win.$element.addEventListener('touchstart', ontouchstart, touchArg);\n    win.$element.addEventListener('mousedown', onmousedown);\n    win.$element.addEventListener('click', onclick);\n    win.$element.addEventListener('dblclick', ondblclick);\n    win.$element.addEventListener('transitionend', ontrasitionend);\n\n    if (win.$icon) {\n      win.$icon.addEventListener('dblclick', onicondblclick);\n      win.$icon.addEventListener('click', oniconclick);\n    }\n\n    win.on('resized,rendered', () => {\n      win.setState('media', getMediaQueryName(win));\n    });\n\n    win.on('destroy', () => {\n      if (win.$element) {\n        win.$element.removeEventListener('touchstart', ontouchstart, touchArg);\n        win.$element.removeEventListener('mousedown', onmousedown);\n        win.$element.removeEventListener('click', onclick);\n        win.$element.removeEventListener('dblclick', ondblclick);\n        win.$element.removeEventListener('transitionend', ontrasitionend);\n      }\n\n      if (win.$icon) {\n        win.$icon.removeEventListener('dblclick', onicondblclick);\n        win.$icon.removeEventListener('click', oniconclick);\n      }\n    });\n\n    const rect = this.core.has('osjs/desktop')\n      ? this.core.make('osjs/desktop').getRect()\n      : {top: 0, left: 0};\n\n    const {top, left} = getCascadePosition(win, rect, win.state.position);\n    win.state.position.top = top;\n    win.state.position.left = left;\n    win.state.media = getMediaQueryName(win);\n  }\n\n  /**\n   * Handles Mouse Click Event\n   * @param {Event} ev Browser Event\n   * @param {Window} win Window reference\n   */\n  click(ev, win) {\n    if (this.lastAction) {\n      return;\n    }\n\n    const target = ev.target;\n    const hitButton = target.classList.contains('osjs-window-button');\n\n    if (hitButton) {\n      const action =  ev.target.getAttribute('data-action');\n      actionMap[action](win);\n    }\n  }\n\n  /**\n   * Handles Mouse Double Click Event\n   * @param {Event} ev Browser Event\n   * @param {Window} win Window reference\n   */\n  dblclick(ev, win) {\n    if (this.lastAction) {\n      return;\n    }\n\n    const target = ev.target;\n    const hitTitle = target.classList.contains('osjs-window-header');\n\n    if (hitTitle) {\n      if (win.state.maximized) {\n        win.restore();\n      } else if (win.state.minimized) {\n        win.raise();\n      } else {\n        win.maximize();\n      }\n    }\n  }\n\n  /**\n   * Handles Mouse Down Event\n   * @param {Event} ev Browser Event\n   * @param {Window} win Window reference\n   */\n  mousedown(ev, win) {\n    let attributeSet = false;\n\n    const {moveable, resizable} = win.attributes;\n    const {lofi, moveKeybinding} = this.core.config('windows');\n    const {clientX, clientY, touch, target} = getEvent(ev);\n\n    const checkMove = matchKeyCombo(moveKeybinding, ev)\n      ? win.$element.contains(target)\n      : target.classList.contains('osjs-window-header');\n\n    const rect = this.core.has('osjs/desktop')\n      ? this.core.make('osjs/desktop').getRect()\n      : {top: 0, left: 0};\n\n    const resize = target.classList.contains('osjs-window-resize')\n      ? resizer(win, target)\n      : null;\n\n    const move = checkMove\n      ? mover(win, rect)\n      : null;\n\n    let actionCallback;\n\n    const mousemove = (ev) => {\n      if (!isPassive) {\n        ev.preventDefault();\n      }\n\n      if ((!moveable && move) || (!resizable && resize)) {\n        return;\n      }\n\n      const transformedEvent = getEvent(ev);\n      const posX = resize ? Math.max(rect.left, transformedEvent.clientX) : transformedEvent.clientX;\n      const posY = resize ? Math.max(rect.top, transformedEvent.clientY) : transformedEvent.clientY;\n      const diffX = posX - clientX;\n      const diffY = posY - clientY;\n\n      if (resize) {\n        const {width, height, top, left} = resize(diffX, diffY);\n\n        actionCallback = () => {\n          win._setState('dimension', {width, height}, false);\n          win._setState('position', {top, left}, false);\n        };\n\n        if (lofi) {\n          this.$lofi.style.top = `${top}px`;\n          this.$lofi.style.left = `${left}px`;\n          this.$lofi.style.width = `${width}px`;\n          this.$lofi.style.height = `${height}px`;\n        } else {\n          actionCallback();\n        }\n\n        this.lastAction = 'resize';\n      } else if (move) {\n        const position = move(diffX, diffY);\n\n        actionCallback = () => {\n          win._setState('position', position, false);\n        };\n\n        if (lofi) {\n          this.$lofi.style.top = `${position.top}px`;\n          this.$lofi.style.left = `${position.left}px`;\n        } else {\n          actionCallback();\n        }\n\n        this.lastAction = 'move';\n      }\n\n      if (this.lastAction) {\n        win._setState(this.lastAction === 'move' ? 'moving' : 'resizing', true); // NOTE: This also updates DOM!\n\n        if (!attributeSet) {\n          this.core.$root.setAttribute('data-window-action', String(true));\n          attributeSet = true;\n        }\n      }\n    };\n\n    const mouseup = () => {\n      if (touch) {\n        document.removeEventListener('touchmove', mousemove, touchArg);\n        document.removeEventListener('touchend', mouseup, touchArg);\n      } else {\n        document.removeEventListener('mousemove', mousemove);\n        document.removeEventListener('mouseup', mouseup);\n      }\n\n      if (lofi) {\n        this.$lofi.remove();\n\n        if (actionCallback) {\n          actionCallback();\n        }\n\n        actionCallback = undefined;\n      }\n\n      if (this.lastAction === 'move') {\n        win.emit('moved', {...win.state.position}, win);\n        win._setState('moving', false);\n      } else if (this.lastAction === 'resize') {\n        win.emit('resized', {...win.state.dimension}, win);\n        win._setState('resizing', false);\n      }\n\n      this.core.$root.setAttribute('data-window-action', String(false));\n    };\n\n\n    if (!win.focus()) {\n      win.setNextZindex();\n    }\n\n    if (move || resize) {\n      if (touch) {\n        document.addEventListener('touchmove', mousemove, touchArg);\n        document.addEventListener('touchend', mouseup, touchArg);\n      } else {\n        document.addEventListener('mousemove', mousemove);\n        document.addEventListener('mouseup', mouseup);\n      }\n    }\n\n    this.lastAction = null;\n\n    if (this.core.has('osjs/contextmenu')) {\n      this.core.make('osjs/contextmenu').hide();\n    }\n\n    if (lofi) {\n      this.$lofi.style.zIndex = win.state.zIndex + 1;\n      this.$lofi.style.top = `${win.state.position.top}px`;\n      this.$lofi.style.left = `${win.state.position.left}px`;\n      this.$lofi.style.width = `${win.state.dimension.width}px`;\n      this.$lofi.style.height = `${win.state.dimension.height}px`;\n\n      if (!this.$lofi.parentNode) {\n        document.body.appendChild(this.$lofi);\n      }\n    }\n  }\n\n  /**\n   * Handles Icon Double Click Event\n   * @param {Event} ev Browser Event\n   * @param {Window} win Window reference\n   */\n  iconDblclick(ev, win) {\n    win.close();\n  }\n\n  /**\n   * Handles Icon Click Event\n   * @param {Event} ev Browser Event\n   * @param {Window} win Window reference\n   */\n  iconClick(ev, win) {\n    const {minimized, maximized} = win.state;\n    const {minimizable, maximizable, closeable} = win.attributes;\n    const _ = this.core.make('osjs/locale').translate;\n\n    this.core.make('osjs/contextmenu', {\n      position: ev,\n      menu: [{\n        label: minimized ? _('LBL_RAISE') : _('LBL_MINIMIZE'),\n        disabled: !minimizable,\n        onclick: () => minimized ? win.raise() : win.minimize()\n      }, {\n        label: maximized ? _('LBL_RESTORE') : _('LBL_MAXIMIZE'),\n        disabled: !maximizable,\n        onclick: () => maximized ? win.restore() : win.maximize()\n      }, {\n        label: _('LBL_CLOSE'),\n        disabled: !closeable,\n        onclick: () => win.close()\n      }]\n    });\n  }\n}\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2020, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\nimport {h, app} from 'hyperapp';\nimport {EventEmitter} from '@osjs/event-emitter';\n\nconst createAttributes = (props, field, disabled) => {\n  disabled = disabled ? 'disabled' : undefined;\n  if (field.tagName === 'input') {\n    if (field.attributes.type !== 'submit') {\n      return {\n        autocapitalize: 'off',\n        autocomplete: 'new-' + field.attributes.name,\n        disabled,\n        oncreate: el => (el.value = props[field.attributes.name] || field.value || ''),\n        ...field.attributes\n      };\n    }\n  }\n\n  return {disabled, ...field.attributes};\n};\n\nconst createFields = (props, fields, disabled) => {\n  const children = f => {\n    if (f.tagName === 'select' && f.choices) {\n      return f.choices.map(c => h('option', {\n        current: c.current ? 'current' : undefined,\n        value: c.value\n      }, c.label));\n    }\n\n    return f.children || [];\n  };\n\n  return fields.map(f => h('div', {\n    class: 'osjs-login-field osjs-login-field-' + f.tagName\n  }, h(f.tagName, createAttributes(props, f, disabled), children(f))));\n};\n\nconst createView = (options) => {\n  const {src, position} = options.logo;\n\n  const logo = () =>\n    h('div', {\n      class: 'osjs-login-logo',\n      'data-position': position,\n      style: {\n        backgroundImage: `url('${src}')`\n      }\n    });\n\n  const fields = state => {\n    const result = createFields(state, options.fields, state.loading);\n\n    if (src && position === 'bottom') {\n      result.push(logo());\n    }\n\n    if (options.stamp) {\n      result.push(h('div', {\n        class: 'osjs-login-stamp'\n      }, options.stamp));\n    }\n\n    return result;\n  };\n\n  return (state, actions) => {\n    const header = [];\n\n    if (options.title) {\n      header.push(h('div', {\n        class: 'osjs-login-header'\n      }, h('span', {}, options.title)));\n    }\n\n    if (src && ['top', 'middle'].indexOf(position) !== -1) {\n      const m = position === 'top'\n        ? 'unshift'\n        : 'push';\n\n      header[m](logo());\n    }\n\n    const createSide = side => position === side\n      ? h('div', {'data-position': position}, logo())\n      : null;\n\n    const left = () => createSide('left');\n    const right = () => createSide('right');\n    const middle = () => h('div', {class: 'osjs-login-content'}, children);\n\n    const formFields = fields(state);\n\n    const children = [\n      ...header,\n\n      h('div', {\n        class: 'osjs-login-error',\n        style: {display: state.error ? 'block' : 'none'}\n      }, h('span', {}, state.error)),\n      h('form', {\n        loading: false,\n        method: 'post',\n        action: '#',\n        autocomplete: 'off',\n        onsubmit: actions.submit\n      }, formFields)\n    ];\n\n    return h('div', {\n      class: 'osjs-login',\n      id: options.id,\n      style: {display: state.hidden ? 'none' : undefined}\n    }, [left(), middle(), right()].filter(el => !!el));\n  };\n};\n\n/**\n * Login UI Adapter\n */\nconst create = (options, login, startHidden, $container) => {\n  const ee = new EventEmitter('LoginUI');\n  const view = createView(options);\n  const a = app({\n    hidden: startHidden,\n    ...login\n  }, {\n    setLoading: loading => ({loading}),\n    setError: error => ({error, hidden: false}),\n    submit: ev => state => {\n      ev.preventDefault();\n\n      if (state.loading) {\n        return;\n      }\n\n      const values = Array.from(ev.target.elements)\n        .filter(el => el.type !== 'submit')\n        .reduce((o, el) => ({...o, [el.name] : el.value}), {});\n\n      ee.emit('login:post', values);\n    }\n  }, view, $container);\n\n  ee.on('login:start', () => a.setLoading(true));\n  ee.on('login:stop', () => a.setLoading(false));\n  ee.on('login:error', err => a.setError(err));\n\n  return ee;\n};\n\nexport default create;\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2020, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\nimport {EventEmitter} from '@osjs/event-emitter';\nimport createUI from './adapters/ui/login';\n\n\n/**\n * OS.js Login UI\n *\n * @desc Handles the Login UI and its events\n */\nexport default class Login extends EventEmitter {\n\n  /**\n   * Create authentication handler\n   *\n   * @param {Core} core Core reference\n   * @param {object} [options] Options\n   * @param {string} [options.title] Title\n   * @param {object[]} [options.fields] Fields\n   */\n  constructor(core, options) {\n    super('Login');\n\n    this.$container = null;\n    this.core = core;\n    this.options = {\n      id: 'osjs-login',\n      title: 'Welcome to OS.js',\n      stamp: core.config('version'),\n      logo: {\n        position: 'top',\n        src: null\n      },\n      fields: [{\n        tagName: 'input',\n        attributes: {\n          name: 'username',\n          type: 'text',\n          placeholder: 'Username'\n        }\n      }, {\n        tagName: 'input',\n        attributes: {\n          name: 'password',\n          type: 'password',\n          placeholder: 'Password'\n        }\n      }, {\n        tagName: 'input',\n        attributes: {\n          type: 'submit',\n          value: 'Login'\n        }\n      }],\n      ...options\n    };\n  }\n\n  /**\n   * Initializes the UI\n   */\n  init(startHidden) {\n    this.$container = document.createElement('div');\n    this.$container.id = this.options.id;\n    this.$container.className = 'osjs-login-base';\n    this.core.$root.classList.add('login');\n    this.core.$root.appendChild(this.$container);\n\n    this.render(startHidden);\n  }\n\n  /**\n   * Destroys the UI\n   */\n  destroy() {\n    this.core.$root.classList.remove('login');\n\n    if (this.$container) {\n      this.$container.remove();\n    }\n  }\n\n  /**\n   * Renders the UI\n   */\n  render(startHidden) {\n    const login = this.core.config('auth.login', {});\n    const ui = createUI(this.options, login, startHidden, this.$container);\n\n    ui.on('login:post', values => this.emit('login:post', values));\n    this.on('login:start', () => ui.emit('login:start'));\n    this.on('login:stop', () => ui.emit('login:stop'));\n    this.on('login:error', err => ui.emit('login:error', err));\n  }\n\n}\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2020, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\n/**\n * Server Auth adapter\n * @param {Core} core Core reference\n * @param {object} [options] Adapter options\n */\nconst serverAuth = (core, options) => {\n  const request = (endpoint, params = {}) => core.request(endpoint, {\n    method: 'POST',\n    body: JSON.stringify(params)\n  }, 'json');\n\n  return {\n    register: (values) => request('/register', values),\n    login: (values) => request('/login', values),\n    logout: () =>  request('/logout')\n  };\n};\n\nexport default serverAuth;\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2020, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\n/**\n * LocalStorage Auth adapter\n * @param {Core} core Core reference\n * @param {object} [options] Adapter options\n */\nconst localStorageAuth = (core, options) => ({\n  login: (values) => Promise.resolve(values)\n});\n\nexport default localStorageAuth;\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2020, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\nimport Login from './login';\nimport serverAuth  from './adapters/auth/server';\nimport localStorageAuth from './adapters/auth/localstorage';\nimport logger from './logger';\n\n/**\n * Handles Authentication\n */\nexport default class Auth {\n\n  /**\n   * @param {Core} core OS.js Core instance reference\n   * @param {object} [args.ui] Options for default login UI adapter\n   * @param {Function} [args.adapter] Custom login adapter\n   * @param {Function} [args.login] Custom UI\n   * @param {object} [args.config] Configuration object to be passed on\n   */\n  constructor(core, args = {}) {\n    const defaultUi = core.config('auth.ui', {});\n\n    const defaultAdapters = {\n      server: serverAuth,\n      localStorage: localStorageAuth\n    };\n\n    const adapter = core.config('standalone')\n      ? localStorageAuth\n      : typeof args.adapter === 'function'\n        ? args.adapter\n        : defaultAdapters[args.adapter || 'server'];\n\n    this.ui = args.login\n      ? args.login(core, args.config || {})\n      : new Login(core, args.ui || defaultUi);\n\n    this.adapter = {\n      login: () => Promise.reject(new Error('Not implemented')),\n      logout: () => Promise.reject(new Error('Not implemented')),\n      register: () => Promise.reject(new Error('Not implemented')),\n      init: () => Promise.resolve(true),\n      destroy: () => {},\n      ...adapter(core, args.config || {})\n    };\n\n    this.callback = function() {};\n    this.core = core;\n  }\n\n  /**\n   * Initializes authentication handler\n   */\n  init() {\n    this.ui.on('login:post', values => this.login(values));\n\n    return this.adapter.init();\n  }\n\n  /**\n   * Destroy authentication handler\n   */\n  destroy() {\n    this.ui.destroy();\n  }\n\n  /**\n   * Run the shutdown procedure\n   */\n  shutdown(reload) {\n    try {\n      this.core.destroy();\n    } catch (e) {\n      logger.warn('Exception on destruction', e);\n    }\n\n    this.core.emit('osjs/core:logged-out');\n\n    if (reload) {\n      setTimeout(() => {\n        window.location.reload();\n        // FIXME Reload, not refresh\n        // this.core.boot();\n      }, 1);\n    }\n  }\n\n  /**\n   * Shows Login UI\n   * @return {Promise<boolean, Error>}\n   */\n  show(cb) {\n    const login = this.core.config('auth.login', {});\n    const autologin = login.username && login.password;\n\n    this.callback = cb;\n    this.ui.init(autologin);\n\n    if (autologin) {\n      return this.login(login);\n    }\n\n    return Promise.resolve(true);\n  }\n\n  /**\n   * Performs a login\n   * @param {object} values Form values as JSON\n   */\n  login(values) {\n    this.ui.emit('login:start');\n\n    return this.adapter\n      .login(values)\n      .then(response => {\n        if (response) {\n          this.ui.destroy();\n          this.callback(response);\n\n          this.core.emit('osjs/core:logged-in');\n          this.ui.emit('login:stop');\n\n          return true;\n        }\n\n        return false;\n      })\n      .catch(e => {\n        if (this.core.config('development')) {\n          logger.warn('Exception on login', e);\n        }\n\n        this.ui.emit('login:error', 'Login failed');\n        this.ui.emit('login:stop');\n\n        return false;\n      });\n  }\n\n  /**\n   * Performs a logout\n   * @param {boolean} [reload=true] Reload client afterwards\n   */\n  logout(reload = true) {\n    return this.adapter.logout(reload)\n      .then(response => {\n        if (!response) {\n          return false;\n        }\n\n        this.shutdown(reload);\n\n        return true;\n      });\n  }\n\n  /**\n   * Performs a register call\n   * @param {object} values Form values as JSON\n   * @return {Promise<*>}\n   */\n  register(values) {\n    return this.adapter.register(values);\n  }\n}\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2020, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\nimport Application from './application';\nimport logger from './logger';\n\n/**\n * Session Handler\n *\n * @desc Handles Sessions\n */\nexport default class Session {\n\n  /**\n   * Creates the Session Handler\n   *\n   * @param {Core} core Core reference\n   */\n  constructor(core) {\n    /**\n     * Core instance reference\n     * @type {Core}\n     */\n    this.core = core;\n  }\n\n  /**\n   * Destroys instance\n   */\n  destroy() {\n  }\n\n  /**\n   * Saves session\n   */\n  save() {\n    const apps = Application.getApplications()\n      .filter(a => a.options.sessionable !== false);\n\n    const session = apps.map(app => app.getSession());\n\n    return this.core.make('osjs/settings')\n      .set('osjs/session', null, session)\n      .save();\n  }\n\n  /**\n   * Loads session\n   * @param {boolean} [fresh=false] Kill all current applications first\n   */\n  load(fresh = false) {\n    if (fresh) {\n      Application.destroyAll();\n    }\n\n    let session = this.core.make('osjs/settings')\n      .get('osjs/session');\n\n    if (session && !(session instanceof Array)) {\n      session = Object.values(session);\n    }\n\n    if (session) {\n      console.group('Session::load()');\n\n      session.forEach(app => {\n        try {\n          this.core.run(app.name, app.args, {\n            restore: {\n              windows: app.windows\n            }\n          });\n        } catch (e) {\n          logger.warn('Error while loading session entry', e);\n        }\n      });\n\n      console.groupEnd();\n    }\n\n    return Promise.resolve(true);\n  }\n}\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2020, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\nimport {style, script} from './dom';\nimport logger from '../logger';\n\n/**\n * The Preloader loads styles and scripts\n */\nexport default class Preloader {\n\n  constructor(root) {\n    /**\n     * A list of cached preloads\n     * @type {String[]}\n     */\n    this.loaded = [];\n\n    this.$root = root;\n  }\n\n  destroy() {\n    this.loaded = [];\n  }\n\n  /**\n   * Loads all resources required for a package\n   * @param {string[]} list A list of resources\n   * @param {boolean} [force=false] Force loading even though previously cached\n   * @return {Promise<string[]>} A list of failed resources\n   */\n  load(list, force = false) {\n    const cached = entry => force\n      ? false\n      : this.loaded.find(src => src === entry);\n\n    const promises = list\n      .filter(entry => !cached(entry))\n      .map(entry => {\n        logger.debug('Packages::preload()', entry);\n\n        const p = entry.match(/\\.js$/)\n          ? script(this.$root, entry)\n          : style(this.$root, entry);\n\n        return p\n          .then(el => ({success: true, entry, el}))\n          .catch(error => ({success: false, entry, error}));\n      });\n\n    return Promise.all(promises)\n      .then(results => this._load(results, cached));\n  }\n\n  /**\n   * Checks the loaded list\n   * @param {Object[]} results Preload results\n   * @param {string[]} cached Already cached preloads\n   */\n  _load(results, cached) {\n    const successes = results.filter(res => res.success);\n    successes.forEach(entry => {\n      if (!cached(entry)) {\n        this.loaded.push(entry);\n      }\n    });\n\n    const failed = results.filter(res => !res.success);\n    failed.forEach(failed => logger.warn('Failed loading', failed.entry, failed.error));\n\n    return {\n      errors: failed.map(failed => failed.entry),\n      elements: successes.reduce((result, iter) => {\n        return {...result, [iter.entry]: iter.el};\n      }, {})\n    };\n  }\n}\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2020, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\nimport Application from './application';\nimport Preloader from './utils/preloader';\nimport logger from './logger';\n\n/**\n * A registered package reference\n * @property {Object} metadata Package metadata\n * @property {Function} callback Callback to instanciate\n * @typedef PackageReference\n */\n\n/**\n * A package metadata\n * @property {string} name The package name\n * @property {string} [category] Package category\n * @property {string} [icon] Package icon\n * @property {boolean} [singleton] If only one instance allowed\n * @property {boolean} [autostart] Autostart on boot\n * @property {boolean} [hidden] Hide from launch menus etc.\n * @property {string} [server] Server script filename\n * @property {string[]} [groups] Only available for users in this group\n * @property {string[]} [files] Files to preload\n * @property {Map<String, String>} title A map of locales and titles\n * @property {Map<String, String>} description A map of locales and titles\n * @typedef PackageMetadata\n */\n\n/**\n * Package Manager\n *\n * @desc Handles indexing, loading and launching of OS.js packages\n */\nexport default class Packages {\n\n  /**\n   * Create package manage\n   *\n   * @param {Core} core Core reference\n   */\n  constructor(core) {\n    /**\n     * Core instance reference\n     * @type {Core}\n     */\n    this.core = core;\n\n    /**\n     * A list of registered packages\n     * @type {PackageReference[]}\n     */\n    this.packages = [];\n\n    /**\n     * The lost of loaded package metadata\n     * @type {PackageMetadata[]}\n     */\n    this.metadata = [];\n\n    /**\n     * A list of running application names\n     * @desc Mainly used for singleton awareness\n     * @type {string[]}\n     */\n    this._running = [];\n\n    /**\n     * Preloader\n     * @type {Preloader}\n     */\n    this.preloader = new Preloader(core.$resourceRoot);\n\n    /**\n     * If inited\n     * @type {boolean}\n     */\n    this.inited = false;\n  }\n\n  /**\n   * Destroy package manager\n   */\n  destroy() {\n    this.packages = [];\n    this.metadata = [];\n\n    this.preloader.destroy();\n  }\n\n  /**\n   * Initializes package manager\n   * @return {Promise<boolean, Error>}\n   */\n  init() {\n    logger.debug('Packages::init()');\n\n    if (!this.inited) {\n      this.core.on('osjs/core:started', () => this._autostart());\n    }\n\n    this.metadata = this.core.config('packages.metadata', [])\n      .map(iter => ({type: 'application', ...iter}));\n\n    this.inited = true;\n\n    const manifest = this.core.config('packages.manifest');\n\n    return manifest\n      ? this.core.request(manifest, {}, 'json', true)\n        .then(metadata => this.addPackages(metadata))\n        .then(() => true)\n        .catch(error => logger.error(error))\n      : Promise.resolve(true);\n  }\n\n  /**\n   * Launches a (application) package\n   *\n   * @param {string} name Package name\n   * @param {object} [args] Launch arguments\n   * @param {object} [options] Launch options\n   * @param {boolean} [options.forcePreload=false] Force preload reloading\n   * @see PackageServiceProvider\n   * @throws {Error}\n   * @return {Promise<Application, Error>}\n   */\n  launch(name, args = {}, options = {}) {\n    logger.debug('Packages::launch()', name, args, options);\n\n    const _ = this.core.make('osjs/locale').translate;\n    const metadata = this.metadata.find(pkg => pkg.name === name);\n    if (!metadata) {\n      throw new Error(_('ERR_PACKAGE_NOT_FOUND', name));\n    }\n\n    if (['theme', 'icons', 'sounds'].indexOf(metadata.type) !== -1) {\n      return this._launchTheme(name, metadata);\n    }\n\n    return this._launchApplication(name, metadata, args, options);\n  }\n\n  /**\n   * Launches an application package\n   *\n   * @param {string} name Application package name\n   * @param {Metadata} metadata Application metadata\n   * @param {Map<string, *>} args Launch arguments\n   * @param {object} options Launch options\n   */\n  _launchApplication(name, metadata, args, options) {\n    let signaled = false;\n\n    if (metadata.singleton) {\n      const foundApp = Application.getApplications()\n        .find(app => app.metadata.name === metadata.name);\n\n      if (foundApp) {\n        foundApp.emit('attention', args, options);\n        signaled = true;\n\n        return Promise.resolve(foundApp);\n      }\n\n      const found = this._running.filter(n => n === name);\n\n      if (found.length > 0) {\n        return new Promise((resolve, reject) => {\n          this.core.once(`osjs/application:${name}:launched`, a => {\n            if (signaled) {\n              resolve(a);\n            } else {\n              a.emit('attention', args, options);\n              resolve(a);\n            }\n          });\n        });\n      }\n    }\n\n    this.core.emit('osjs/application:launch', name, args, options);\n\n    this._running.push(name);\n\n    return this._launch(name, metadata, args, options);\n  }\n\n  /**\n   * Launches a (theme) package\n   *\n   * @param {string} name Package name\n   * @param {Metadata} metadata Application metadata\n   * @throws {Error}\n   * @return {Promise<object, Error>}\n   */\n  _launchTheme(name, metadata) {\n    const preloads = (metadata.files || [])\n      .map(f => this.core.url(f, {}, ({\n        type: metadata.type,\n        ...metadata\n      })));\n\n    return this.preloader.load(preloads)\n      .then(result => {\n        return {\n          elements: {},\n          ...result,\n          ...this.packages.find(pkg => pkg.metadata.name === name) || {}\n        };\n      });\n  }\n\n  /**\n   * Wrapper for launching a (application) package\n   *\n   * @param {string} name Package name\n   * @param {object} args Launch arguments\n   * @param {object} options Launch options\n   * @return {Promise<Application>}\n   */\n  _launch(name, metadata, args, options) {\n    const _ = this.core.make('osjs/locale').translate;\n\n    const dialog = e => {\n      if (this.core.has('osjs/dialog')) {\n        this.core.make('osjs/dialog', 'alert', {\n          type: 'error',\n          title: _('ERR_PACKAGE_EXCEPTION', name),\n          message: _('ERR_PACKAGE_EXCEPTION', name),\n          error: e\n        }, () => { /* noop */});\n      } else {\n        alert(`${_('ERR_PACKAGE_EXCEPTION', name)}: ${e.stack || e}`);\n      }\n    };\n\n    const fail = err => {\n      this.core.emit('osjs/application:launched', name, false);\n      this.core.emit(`osjs/application:${name}:launched`, false);\n\n      dialog(err);\n\n      throw new Error(err);\n    };\n\n    const preloads = metadata.files\n      .map(f => this.core.url(f, {}, {type: 'apps', ...metadata}));\n\n    const create = found => {\n      let app;\n\n      try {\n        console.group('Packages::_launch()');\n        app = found.callback(this.core, args, options, found.metadata);\n\n        if (app instanceof Application) {\n          app.on('destroy', () => {\n            const foundIndex = this._running.findIndex(n => n === name);\n            if (foundIndex !== -1) {\n              this._running.splice(foundIndex, 1);\n            }\n          });\n        } else {\n          logger.warn('The application', name, 'did not return an Application instance from registration');\n        }\n      } catch (e) {\n        dialog(e);\n\n        logger.warn('Exception when launching', name, e);\n      } finally {\n        this.core.emit('osjs/application:launched', name, app);\n        this.core.emit(`osjs/application:${name}:launched`, app);\n        console.groupEnd();\n      }\n\n      return app;\n    };\n\n    return this.preloader.load(preloads, options.forcePreload === true)\n      .then(({errors}) => {\n        if (errors.length) {\n          fail(_('ERR_PACKAGE_LOAD', name, errors.join(', ')));\n        }\n\n        const found = this.packages.find(pkg => pkg.metadata.name === name);\n        if (!found) {\n          fail(_('ERR_PACKAGE_NO_RUNTIME', name));\n        }\n\n        return create(found);\n      });\n  }\n\n  /**\n   * Autostarts tagged packages\n   */\n  _autostart() {\n    const meta = this.metadata\n      .filter(pkg => pkg.autostart === true);\n\n    const configured = this.core\n      .config('application.autostart', [])\n      .map(value => typeof value === 'string' ? {name: value} : value);\n\n    [...meta, ...configured].forEach(({name, args}) => this.launch(name, args || {}));\n  }\n\n  /**\n   * Registers a package\n   *\n   * @param {string} name Package name\n   * @param {Function} callback Callback function to construct application instance\n   * @throws {Error}\n   */\n  register(name, callback) {\n    logger.debug('Packages::register()', name);\n\n    const _ = this.core.make('osjs/locale').translate;\n    const metadata = this.metadata.find(pkg => pkg.name === name);\n    if (!metadata) {\n      throw new Error(_('ERR_PACKAGE_NO_METADATA', name));\n    }\n\n    const foundIndex = this.packages.findIndex(pkg => pkg.metadata.name === name);\n    if (foundIndex !== -1) {\n      this.packages.splice(foundIndex, 1);\n    }\n\n    this.packages.push({\n      metadata,\n      callback\n    });\n  }\n\n  /**\n   * Adds a set of packages\n   * @param {PackageMetadata[]} list Package list\n   * @return {PackageMetadata[]} Current list of packages\n   */\n  addPackages(list) {\n    if (list instanceof Array) {\n      const append = list\n        .map(iter => ({\n          type: 'application',\n          files: [],\n          ...iter\n        }));\n\n      this.metadata = [...this.metadata, ...append];\n    }\n\n    return this.getPackages();\n  }\n\n  /**\n   * Gets a list of packages (metadata)\n   * @param {Function} [filter] A filter function\n   * @return {PackageMetadata[]}\n   */\n  getPackages(filter) {\n    filter = filter || (() => true);\n\n    const user = this.core.getUser();\n    const metadata = this.metadata.map(m => ({...m}));\n\n    const filterGroups = iter => {\n      const m = iter.strictGroups === false ? 'some' : 'every';\n\n      return iter.groups instanceof Array\n        ? iter.groups[m](g => user.groups.indexOf(g) !== -1)\n        : true;\n    };\n\n    const filterBlacklist = iter => user.blacklist instanceof Array\n      ? user.blacklist.indexOf(iter.name) === -1\n      : true;\n\n    return metadata\n      .filter(filterGroups)\n      .filter(filterBlacklist)\n      .filter(filter);\n  }\n\n  /**\n   * Gets a list of packages compatible with the given mime type\n   * @param {string} mimeType MIME Type\n   * @see PackageManager#getPackages\n   * @return {PackageMetadata[]}\n   */\n  getCompatiblePackages(mimeType) {\n    return this.getPackages(meta => {\n      if (meta.mimes) {\n        return !!meta.mimes.find(mime => {\n          try {\n            const re = new RegExp(mime);\n            return re.test(mimeType);\n          } catch (e) {\n            logger.warn('Compability check failed', e);\n          }\n\n          return mime === mimeType;\n        });\n      }\n\n      return false;\n    });\n  }\n\n  /**\n   * Gets a list of running packages\n   * @return {string[]}\n   */\n  running() {\n    return this._running;\n  }\n}\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2020, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\nimport logger from './logger';\nimport defaultIcon from './styles/logo-blue-32x32.png';\n\n/**\n * A Tray Icon (\"Entry\")\n * @property {Object} entry The given entry data\n * @property {Function} update Updates entry with given data\n * @property {Function} destroy Destroy the entry\n * @typedef TrayEntry\n */\n\n/**\n * Tray Handler\n *\n * @desc Handles OS.js Tray Icons\n */\nexport default class Tray {\n\n  /**\n   * Creates the Tray Handler\n   *\n   * @param {Core} core Core reference\n   */\n  constructor(core) {\n    /**\n     * Core instance reference\n     * @type {Core}\n     */\n    this.core = core;\n\n    /**\n     * All Tray entries\n     * @type {TrayEntry[]}\n     */\n    this.entries = [];\n  }\n\n  destroy() {\n    this.entries = [];\n  }\n\n  /**\n   * Creates a new Tray entry\n   * @param {object} options Options\n   * @param {string} [options.icon] Icon source\n   * @param {string} [options.title] The title and tooltip\n   * @param {Function} [options.onclick] The callback function for clicks\n   * @param {Function} [options.oncontextmenu] The callback function for contextmenu\n   * @param {Function} [handler] The callback function for all events\n   * @return {TrayEntry}\n   */\n  create(options, handler) {\n    const defaultTitle = this.core.make('osjs/locale')\n      .translate('LBL_TRAY');\n\n    handler = handler || (() => {});\n\n    const entry = {\n      icon: defaultIcon,\n      title: defaultTitle,\n      onclick: handler,\n      oncontextmenu: handler,\n      handler,\n      ...options\n    };\n\n    logger.debug('Created new tray entry', entry);\n\n    this.entries.push(entry);\n\n    this.core.emit('osjs/tray:create', entry);\n    this.core.emit('osjs/tray:update', this.entries);\n\n    const obj = {\n      entry,\n      update: u => {\n        Object.keys(u).forEach(k => (entry[k] = u[k]));\n\n        this.core.emit('osjs/tray:update', this.entries);\n      },\n      destroy: () => this.remove(entry)\n    };\n\n    return obj;\n  }\n\n  /**\n   * Removes a Tray entry\n   * @param {TrayEntry} entry The tray entry\n   */\n  remove(entry) {\n    const foundIndex = this.entries.findIndex(e => e === entry);\n    if (foundIndex !== -1) {\n      this.entries.splice(foundIndex, 1);\n\n      this.core.emit('osjs/tray:remove', entry);\n      this.core.emit('osjs/tray:update', this.entries);\n    }\n  }\n\n  /**\n   * @return {TrayEntry[]}\n   */\n  list() {\n    return this.entries;\n  }\n\n}\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2020, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\n/**\n * @property {string} [type] Optional data type\n * @property {*} data\n * @typedef CliboardData\n */\n\nexport default class Clipboard {\n\n  /**\n   * Create new clipboard\n   */\n  constructor() {\n    /**\n     * @type {CliboardData}\n     */\n    this.clipboard = undefined;\n\n    this.clear();\n  }\n\n  /**\n   * Destroy clipboard\n   */\n  destroy() {\n    this.clear();\n  }\n\n  /**\n   * Clear clipboard\n   */\n  clear() {\n    this.clipboard = {data: undefined, type: undefined};\n  }\n\n  /**\n   * Set clipboard data\n   * @param {*} data Clipboard data. For async data, provide a function that returns a promise\n   * @param {string} [type] Optional type used by applications for identifying content\n   */\n  set(data, type) {\n    this.clipboard = {data, type};\n  }\n\n  /**\n   * Checks if current clipboard data has this type\n   * @param {string|RegExp} type Data type\n   * @return {boolean}\n   */\n  has(type) {\n    if (type instanceof RegExp) {\n      return typeof this.clipboard.type === 'string' &&\n        !!this.clipboard.type.match(type);\n    }\n    return this.clipboard.type === type;\n  }\n\n  /**\n   * Gets clipboard data\n   * @param {boolean} [clear=false] Clear clipboard\n   * @return {Promise<*>}\n   */\n  get(clear = false) {\n    const {data} = this.clipboard;\n    const result = typeof data === 'function'\n      ? data()\n      : data;\n\n    if (clear) {\n      this.clear();\n    }\n\n    return Promise.resolve(result);\n  }\n}\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2020, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\nexport const en_EN = {\n  // Core\n  ERR_REQUEST_STANDALONE: 'Cannot make requests in standalone mode.',\n  ERR_REQUEST_NOT_OK: 'An error occured while performing a request: {0}',\n  ERR_VFS_MOUNT_NOT_FOUND: 'Filesystem \\'{0}\\' not found',\n  ERR_VFS_MOUNT_NOT_FOUND_FOR: 'Filesystem not found for \\'{0}\\'',\n  ERR_VFS_MOUNT_NOT_MOUNTED: 'Filesystem \\'{0}\\' not mounted',\n  ERR_VFS_MOUNT_ALREADY_MOUNTED: 'Filesystem \\'{0}\\' already mounted',\n  ERR_VFS_PATH_FORMAT_INVALID: 'Given path \\'{0}\\' does not match \\'name:/path\\'',\n  ERR_PACKAGE_NOT_FOUND: 'Package Metadata \\'{0}\\' not found',\n  ERR_PACKAGE_LOAD: 'Package Loading \\'{0}\\' failed: {1}',\n  ERR_PACKAGE_NO_RUNTIME: 'Package Runtime \\'{0}\\' not found',\n  ERR_PACKAGE_NO_METADATA: 'Metadata not found for \\'{0}\\'. Is it in the manifest?',\n  ERR_PACKAGE_EXCEPTION: 'An exception occured in \\'{0}\\'',\n  ERR_WINDOW_ID_EXISTS: 'Window with ID \\'{0}\\' already exists',\n  ERR_INVALID_LOCALE: 'Invalid locale \\'{0}\\'',\n  LBL_CONNECTION_LOST: 'Connection Lost',\n  LBL_CONNECTION_LOST_MESSAGE: 'The connection to the OS.js was lost. Reconnecting....',\n  LBL_CONNECTION_RESTORED: 'Connection Restored',\n  LBL_CONNECTION_RESTORED_MESSAGE: 'The connection to the OS.js server was restored.',\n  LBL_CONNECTION_FAILED: 'Connection Failed',\n  LBL_CONNECTION_FAILED_MESSAGE: 'The connection to the OS.js could not be established. Some features might not work properly.',\n\n  // Application categories\n  LBL_APP_CAT_DEVELOPMENT: 'Development',\n  LBL_APP_CAT_SCIENCE: 'Science',\n  LBL_APP_CAT_GAMES: 'Games',\n  LBL_APP_CAT_GRAPHICS: 'Graphics',\n  LBL_APP_CAT_NETWORK: 'Network',\n  LBL_APP_CAT_MULTIMEDIA: 'Multimedia',\n  LBL_APP_CAT_OFFICE: 'Office',\n  LBL_APP_CAT_SYSTEM: 'System',\n  LBL_APP_CAT_UTILITIES: 'Utilities',\n  LBL_APP_CAT_OTHER: 'Other',\n\n  // UI\n  LBL_LAUNCH_SELECT: 'Select application',\n  LBL_LAUNCH_SELECT_MESSAGE: 'Select application for \\'{0}\\'',\n  LBL_DESKTOP_SELECT_WALLPAPER: 'Select wallpaper',\n  LBL_DESKTOP_SELECT_THEME: 'Select theme',\n  LBL_SEARCH_TOOLTOP: 'Search Filesystem ({0})',\n  LBL_SEARCH_PLACEHOLDER: 'Search filesystems...',\n  LBL_SEARCH_WAIT: 'Searching...',\n  LBL_SEARCH_RESULT: 'Showing {0} results',\n\n  // FS\n  LBL_FS_B: 'B',\n  LBL_FS_M: 'M',\n  LBL_FS_G: 'G',\n  LBL_FS_KIB: 'KiB',\n  LBL_FS_MIB: 'MiB',\n  LBL_FS_GIB: 'GiB',\n\n  // Generic\n  LBL_TOP: 'Top',\n  LBL_LEFT: 'Left',\n  LBL_RIGHT: 'Right',\n  LBL_BOTTOM: 'Bottom',\n  LBL_MENU: 'Menu',\n  LBL_ERROR: 'Error',\n  LBL_INFO: 'Info',\n  LBL_MESSAGE: 'Message',\n  LBL_WARNINIG: 'Warning',\n  LBL_SUCCESS: 'Success',\n  LBL_FAILURE: 'Failure',\n  LBL_WINDOW: 'Window',\n  LBL_WINDOWS: 'Windows',\n  LBL_NOTIFICATION: 'Notification',\n  LBL_NOTIFICATIONS: 'Notifications',\n  LBL_TRAY: 'Tray Entry',\n  LBL_NAME: 'Name',\n  LBL_TYPE: 'Type',\n  LBL_SIZE: 'Size',\n  LBL_FILE: 'File',\n  LBL_NEW: 'New',\n  LBL_OPEN: 'Open',\n  LBL_OPEN_WITH: 'Open with...',\n  LBL_SAVE: 'Save',\n  LBL_SAVEAS: 'Save As',\n  LBL_OK: 'OK',\n  LBL_ABORT: 'Abort',\n  LBL_CANCEL: 'Cancel',\n  LBL_CLOSE: 'Close',\n  LBL_QUIT: 'Quit',\n  LBL_YES: 'Yes',\n  LBL_NO: 'No',\n  LBL_GO: 'Go',\n  LBL_MKDIR: 'Create new directory',\n  LBL_MKFILE: 'Create new file',\n  LBL_COPY: 'Copy',\n  LBL_PASTE: 'Paste',\n  LBL_CUT: 'Cut',\n  LBL_MOVE: 'Move',\n  LBL_RENAME: 'Rename',\n  LBL_DELETE: 'Delete',\n  LBL_DOWNLOAD: 'Download',\n  LBL_REFRESH: 'Refresh',\n  LBL_RELOAD: 'Reload',\n  LBL_HOME: 'Home',\n  LBL_VIEW: 'View',\n  LBL_HELP: 'Help',\n  LBL_ABOUT: 'About',\n  LBL_APPLICATION: 'Application',\n  LBL_APPLICATIONS: 'Applications',\n  LBL_KILL: 'Kill',\n  LBL_KILL_ALL: 'Kill all',\n  LBL_MINIMIZE: 'Minimize',\n  LBL_MAXIMIZE: 'Maximize',\n  LBL_RESTORE: 'Restore',\n  LBL_RAISE: 'Raise',\n  LBL_SHADE: 'Shade',\n  LBL_UNSHADE: 'Unshade',\n  LBL_ONTOP: 'On top',\n  LBL_RESIZE: 'Resize',\n  LBL_BACK: 'Back',\n  LBL_FORWARD: 'Forward',\n  LBL_UPLOAD: 'Upload',\n  LBL_IMAGE: 'Image',\n  LBL_CREATE_SHORTCUT: 'Create shortcut',\n  LBL_REMOVE_SHORTCUT: 'Remove shortcut',\n  LBL_EDIT: 'Edit'\n};\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2020, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Julien Gomes Dias <abld@abld.info>\n * @licence Simplified BSD License\n */\n\nexport const fr_FR = {\n  // Core\n  ERR_REQUEST_STANDALONE: 'Impossible d\\'effectuer des requêtes en mode autonome.',\n  ERR_REQUEST_NOT_OK: 'Une erreur s\\'est produite en exécutant une requête : {0}',\n  ERR_VFS_MOUNT_NOT_FOUND: 'Système de fichier \\'{0}\\' absent',\n  ERR_VFS_MOUNT_NOT_FOUND_FOR: 'Système de fichier pour \\'{0}\\' absent',\n  ERR_VFS_MOUNT_NOT_MOUNTED: 'Le système de fichier \\'{0}\\' n\\'est pas encore monté',\n  ERR_VFS_MOUNT_ALREADY_MOUNTED: 'Le système de fichier \\'{0}\\' est déjà monté',\n  ERR_VFS_PATH_FORMAT_INVALID: 'Le dossier \\'{0}\\' ne correspond pas \\'name:/path\\'',\n  ERR_PACKAGE_NOT_FOUND: 'Les métadonnées du paquet \\'{0}\\' n\\'ont pas été touvées',\n  ERR_PACKAGE_LOAD: 'Le chargement du paquet \\'{0}\\' a échoué: {1}',\n  ERR_PACKAGE_NO_RUNTIME: 'Durée d\\'exécution du paquet \\'{0}\\' absente',\n  ERR_PACKAGE_NO_METADATA: 'Métadonnée absentes pour \\'{0}\\'. Sont-elles dans le manifeste ?',\n  ERR_PACKAGE_EXCEPTION: 'Une exception s\\'est produite dans \\'{0}\\'',\n  ERR_WINDOW_ID_EXISTS: 'La fénêtre avec l\\'identifiant \\'{0}\\' existe déjà',\n  ERR_INVALID_LOCALE: 'Paramètre de langue invalide \\'{0}\\'',\n  LBL_CONNECTION_LOST: 'Connexion perdue',\n  LBL_CONNECTION_LOST_MESSAGE: 'La connexion à OS.js a été perdue. Reconnexion...',\n  LBL_CONNECTION_RESTORED: 'Connexion Restaurée',\n  LBL_CONNECTION_RESTORED_MESSAGE: 'La connexion à OS.js a été restaurée.',\n\n  // Application categories\n  LBL_APP_CAT_DEVELOPMENT: 'Développement',\n  LBL_APP_CAT_SCIENCE: 'Science',\n  LBL_APP_CAT_GAMES: 'Jeux',\n  LBL_APP_CAT_GRAPHICS: 'Graphisme',\n  LBL_APP_CAT_NETWORK: 'Réseau',\n  LBL_APP_CAT_MULTIMEDIA: 'Multimédia',\n  LBL_APP_CAT_OFFICE: 'Bureautique',\n  LBL_APP_CAT_SYSTEM: 'Système',\n  LBL_APP_CAT_UTILITIES: 'Utilitaires',\n  LBL_APP_CAT_OTHER: 'Autre',\n\n  // UI\n  LBL_LAUNCH_SELECT: 'Sélectionner l\\'application',\n  LBL_LAUNCH_SELECT_MESSAGE: 'Sélectionner l\\'application pour \\'{0}\\'',\n  LBL_DESKTOP_SELECT_WALLPAPER: 'Sélectionner le fond d\\'écran',\n  LBL_DESKTOP_SELECT_THEME: 'Sélectionner le thème',\n  LBL_SEARCH_TOOLTOP: 'Recherche d\\'un système de fichier ({0})',\n  LBL_SEARCH_PLACEHOLDER: 'Recherche des systèmes de fichiers...',\n  LBL_SEARCH_WAIT: 'Recherche...',\n  LBL_SEARCH_RESULT: 'Affichage des résultats {0}',\n\n  // FS\n  LBL_FS_B: 'B',\n  LBL_FS_M: 'M',\n  LBL_FS_G: 'G',\n  LBL_FS_KIB: 'KiB',\n  LBL_FS_MIB: 'MiB',\n  LBL_FS_GIB: 'GiB',\n\n  // Generic\n  LBL_TOP: 'En Haut',\n  LBL_LEFT: 'À Gauche',\n  LBL_RIGHT: 'À Droite',\n  LBL_BOTTOM: 'En Bas',\n  LBL_MENU: 'Menu',\n  LBL_ERROR: 'Erreur',\n  LBL_INFO: 'Info',\n  LBL_MESSAGE: 'Message',\n  LBL_WARNINIG: 'Attention',\n  LBL_SUCCESS: 'Succés',\n  LBL_FAILURE: 'Échec',\n  LBL_WINDOW: 'Fenêtre',\n  LBL_WINDOWS: 'Fenêtres',\n  LBL_NOTIFICATION: 'Notification',\n  LBL_NOTIFICATIONS: 'Notifications',\n  LBL_TRAY: 'Accès au plateau',\n  LBL_NAME: 'Nom',\n  LBL_TYPE: 'Type',\n  LBL_SIZE: 'Taille',\n  LBL_FILE: 'Fichier',\n  LBL_NEW: 'Nouveau',\n  LBL_OPEN: 'Ouvrir',\n  LBL_SAVE: 'Sauvegarder',\n  LBL_SAVEAS: 'Sauvegarder comme',\n  LBL_OK: 'OK',\n  LBL_ABORT: 'Abandonner',\n  LBL_CANCEL: 'Annuler',\n  LBL_CLOSE: 'Fermer',\n  LBL_QUIT: 'Quitter',\n  LBL_YES: 'Oui',\n  LBL_NO: 'Non',\n  LBL_GO: 'C\\'est parti !',\n  LBL_MKDIR: 'Créer nouveau dossier',\n  LBL_MKFILE: 'Créer nouveau fichier',\n  LBL_COPY: 'Copier',\n  LBL_PASTE: 'Coller',\n  LBL_CUT: 'Couper',\n  LBL_MOVE: 'Déplacer',\n  LBL_RENAME: 'Renommer',\n  LBL_DELETE: 'Supprimer',\n  LBL_DOWNLOAD: 'Télécharger',\n  LBL_REFRESH: 'Rafraichir',\n  LBL_RELOAD: 'Recharger',\n  LBL_HOME: 'Accueil',\n  LBL_VIEW: 'Aperçu',\n  LBL_HELP: 'Aide',\n  LBL_ABOUT: 'À propos',\n  LBL_APPLICATION: 'Application',\n  LBL_APPLICATIONS: 'Applications',\n  LBL_KILL: 'Tuer',\n  LBL_KILL_ALL: 'Tuer tout'\n};\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2020, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\nexport const nb_NO = {\n  // Core\n  ERR_REQUEST_STANDALONE: 'Kan ikke gjøre spørringer i standalone modus.',\n  ERR_REQUEST_NOT_OK: 'En feil oppstod under spørring: {0}',\n  ERR_VFS_MOUNT_NOT_FOUND: 'Filsystem \\'{0}\\' ikke funnet',\n  ERR_VFS_MOUNT_NOT_FOUND_FOR: 'Filsystem ikke funnet for \\'{0}\\'',\n  ERR_VFS_MOUNT_NOT_MOUNTED: 'Filsystem \\'{0}\\' ikke montert',\n  ERR_VFS_MOUNT_ALREADY_MOUNTED: 'Filesystem \\'{0}\\' allerede montert',\n  ERR_VFS_PATH_FORMAT_INVALID: 'Angitt sti \\'{0}\\' tilfredstiller ikke format \\'name:/path\\'',\n  ERR_PACKAGE_NOT_FOUND: 'Pakke Metadata \\'{0}\\' ikke funnet',\n  ERR_PACKAGE_LOAD: 'Pakke Lasting \\'{0}\\' feilet: {1}',\n  ERR_PACKAGE_NO_RUNTIME: 'Pakke Runtime \\'{0}\\' ikke funnet',\n  ERR_PACKAGE_NO_METADATA: 'Metadata ikke funnet for \\'{0}\\'. Er den i manifestet?',\n  ERR_PACKAGE_EXCEPTION: 'En unntaksfeil oppstod i \\'{0}\\'',\n  ERR_WINDOW_ID_EXISTS: 'Vindu med ID \\'{0}\\' eksisterer allerede',\n  ERR_INVALID_LOCALE: 'Ugyldig lokalisering \\'{0}\\'',\n  LBL_CONNECTION_LOST: 'Tilkobling tapt',\n  LBL_CONNECTION_LOST_MESSAGE: 'Tilkobling til OS.js var tapt. Kobler til på nytt....',\n  LBL_CONNECTION_RESTORED: 'Tilkobling gjenopprettet',\n  LBL_CONNECTION_RESTORED_MESSAGE: 'Tilkobling til OS.js var gjenopprettet.',\n  LBL_CONNECTION_FAILED: 'Tilkobling feilet',\n  LBL_CONNECTION_FAILED_MESSAGE: 'Tilkobling til OS.js var ikke vellykket. Noen egenskaper er utilgjenglig.',\n\n  // Application categories\n  LBL_APP_CAT_DEVELOPMENT: 'Utvikling',\n  LBL_APP_CAT_SCIENCE: 'Vitenskap',\n  LBL_APP_CAT_GAMES: 'Spill',\n  LBL_APP_CAT_GRAPHICS: 'Grafikk',\n  LBL_APP_CAT_NETWORK: 'Nettverk',\n  LBL_APP_CAT_MULTIMEDIA: 'Multimedia',\n  LBL_APP_CAT_OFFICE: 'Kontor',\n  LBL_APP_CAT_SYSTEM: 'System',\n  LBL_APP_CAT_UTILITIES: 'Verktøy',\n  LBL_APP_CAT_OTHER: 'Andre',\n\n  // UI\n  LBL_LAUNCH_SELECT: 'Velg applikasjon',\n  LBL_LAUNCH_SELECT_MESSAGE: 'Velg applikasjon for \\'{0}\\'',\n  LBL_DESKTOP_SELECT_WALLPAPER: 'Velg bakgrunnsbilde',\n  LBL_DESKTOP_SELECT_THEME: 'Velg tema',\n  LBL_SEARCH_TOOLTOP: 'Søk i filsystemer ({0})',\n  LBL_SEARCH_PLACEHOLDER: 'Søker filsystemer...',\n  LBL_SEARCH_WAIT: 'Søker...',\n  LBL_SEARCH_RESULT: 'Viser {0} resultater',\n\n  // FS\n  LBL_FS_B: 'B',\n  LBL_FS_M: 'M',\n  LBL_FS_G: 'G',\n  LBL_FS_KIB: 'KiB',\n  LBL_FS_MIB: 'MiB',\n  LBL_FS_GIB: 'GiB',\n\n  // Generic\n  LBL_TOP: 'Topp',\n  LBL_LEFT: 'Venstre',\n  LBL_RIGHT: 'Høyre',\n  LBL_BOTTOM: 'Bunn',\n  LBL_MENU: 'Meny',\n  LBL_ERROR: 'Feil',\n  LBL_INFO: 'Info',\n  LBL_MESSAGE: 'Melding',\n  LBL_WARNINIG: 'Advarsel',\n  LBL_SUCCESS: 'Velykket',\n  LBL_FAILURE: 'Svikt',\n  LBL_WINDOW: 'Vindu',\n  LBL_WINDOWS: 'Vinduer',\n  LBL_NOTIFICATION: 'Notifikasjon',\n  LBL_NOTIFICATIONS: 'Notifikasjoner',\n  LBL_TRAY: 'Tray Oppføring',\n  LBL_NAME: 'Navn',\n  LBL_TYPE: 'Type',\n  LBL_SIZE: 'Størrelse',\n  LBL_FILE: 'Fil',\n  LBL_NEW: 'Ny',\n  LBL_OPEN: 'Åpne',\n  LBL_OPEN_WITH: 'Åpne med...',\n  LBL_SAVE: 'Lagre',\n  LBL_SAVEAS: 'Lagre Som',\n  LBL_OK: 'OK',\n  LBL_ABORT: 'Abort',\n  LBL_CANCEL: 'Avbryt',\n  LBL_CLOSE: 'Lukk',\n  LBL_QUIT: 'Slutt',\n  LBL_YES: 'Ja',\n  LBL_NO: 'Nei',\n  LBL_GO: 'Gå',\n  LBL_MKDIR: 'Lag ny mappe',\n  LBL_MKFILE: 'Lag ny fil',\n  LBL_COPY: 'Kopier',\n  LBL_PASTE: 'Lim inn',\n  LBL_CUT: 'Kutt',\n  LBL_MOVE: 'Flytt',\n  LBL_RENAME: 'Navngi',\n  LBL_DELETE: 'Slett',\n  LBL_DOWNLOAD: 'Last ned',\n  LBL_REFRESH: 'Gjenoppfrisk',\n  LBL_RELOAD: 'Last på nytt',\n  LBL_HOME: 'Hjem',\n  LBL_VIEW: 'Visning',\n  LBL_HELP: 'Hjelp',\n  LBL_ABOUT: 'Om',\n  LBL_APPLICATION: 'Applikasjon',\n  LBL_APPLICATIONS: 'Applikasjoner',\n  LBL_KILL: 'Drep',\n  LBL_KILL_ALL: 'Drep alle',\n  LBL_MINIMIZE: 'Minimisèr',\n  LBL_MAXIMIZE: 'Maksimisèr',\n  LBL_RESTORE: 'Gjenopprett',\n  LBL_RAISE: 'Løft',\n  LBL_SHADE: 'Rull opp',\n  LBL_UNSHADE: 'Rull ned',\n  LBL_ONTOP: 'Alltid øverst',\n  LBL_RESIZE: 'Endre størrelse',\n  LBL_BACK: 'Tilbake',\n  LBL_FORWARD: 'Frem',\n  LBL_UPLOAD: 'Last opp',\n  LBL_IMAGE: 'Bilde',\n  LBL_CREATE_SHORTCUT: 'Lag til snarvei',\n  LBL_REMOVE_SHORTCUT: 'Fjern snarvei',\n  LBL_EDIT: 'Rediger'\n};\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2020, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Filip Š <projects@filips.com>\n * @licence Simplified BSD License\n */\n\nexport const sl_SI = {\n  // Core\n  ERR_REQUEST_STANDALONE: 'Zahteve v samostojnem načinu niso mogoče.',\n  ERR_REQUEST_NOT_OK: 'Pri zahtevi je prišlo do napake: {0}',\n  ERR_VFS_MOUNT_NOT_FOUND: 'Datotečni sistem \\'{0}\\' ni najden',\n  ERR_VFS_MOUNT_NOT_FOUND_FOR: 'Datotečni sistem ni najden \\'{0}\\'',\n  ERR_VFS_MOUNT_NOT_MOUNTED: 'Datotečni sistem \\'{0}\\' ni nameščen',\n  ERR_VFS_MOUNT_ALREADY_MOUNTED: 'Datotečni sistem \\'{0}\\' že nameščen',\n  ERR_VFS_PATH_FORMAT_INVALID: 'Podana pot \\'{0}\\' se ne ujema z \\'name:/path\\'',\n  ERR_PACKAGE_NOT_FOUND: 'Metapodatki paketa \\'{0}\\' niso najdeni',\n  ERR_PACKAGE_LOAD: 'Pri nalaganju pageta \\'{0}\\' je prišlo do napake: {1}',\n  ERR_PACKAGE_NO_RUNTIME: 'Koda paketa \\'{0}\\' ni najdena',\n  ERR_PACKAGE_NO_METADATA: 'Metapodatki \\'{0}\\' niso najdeni. Ali so v datoteki manifest?',\n  ERR_PACKAGE_EXCEPTION: 'Sprožena je bila izjema v \\'{0}\\'',\n  ERR_WINDOW_ID_EXISTS: 'Okno z ID-jem \\'{0}\\' že obstaja',\n  ERR_INVALID_LOCALE: 'Neveljaven prevod \\'{0}\\'',\n  LBL_CONNECTION_LOST: 'Izguba povezave',\n  LBL_CONNECTION_LOST_MESSAGE: 'Povezava do strežnika je bila izgubljena. Ponovno povezovanje ...',\n  LBL_CONNECTION_RESTORED: 'Vzpostavitev povezave',\n  LBL_CONNECTION_RESTORED_MESSAGE: 'Povezava do strežnika je bila ponovno vzpostavljena.',\n  LBL_CONNECTION_FAILED: 'Povezava ni uspela',\n  LBL_CONNECTION_FAILED_MESSAGE: 'Povezave z OS.js ni bilo mogoče vzpostaviti. Nekatere funkcije morda ne bodo delovale pravilno.',\n\n  // Application categories\n  LBL_APP_CAT_DEVELOPMENT: 'Razvoj',\n  LBL_APP_CAT_SCIENCE: 'Znanost',\n  LBL_APP_CAT_GAMES: 'Igre',\n  LBL_APP_CAT_GRAPHICS: 'Grafika',\n  LBL_APP_CAT_NETWORK: 'Omrežje',\n  LBL_APP_CAT_MULTIMEDIA: 'Multimedija',\n  LBL_APP_CAT_OFFICE: 'Pisarna',\n  LBL_APP_CAT_SYSTEM: 'Sistem',\n  LBL_APP_CAT_UTILITIES: 'Orodja',\n  LBL_APP_CAT_OTHER: 'Drugo',\n\n  // UI\n  LBL_LAUNCH_SELECT: 'Izberite aplikacijo',\n  LBL_LAUNCH_SELECT_MESSAGE: 'Izberite aplikacijo za \\'{0}\\'',\n  LBL_DESKTOP_SELECT_WALLPAPER: 'Izberite ozadje',\n  LBL_DESKTOP_SELECT_THEME: 'Izberite temo',\n  LBL_SEARCH_TOOLTOP: 'Išči datotečni sistem ({0})',\n  LBL_SEARCH_PLACEHOLDER: 'Iskanje po datotečnih sistemih ...',\n  LBL_SEARCH_WAIT: 'Iskanje ...',\n  LBL_SEARCH_RESULT: 'Prikaz {0} rezultatov',\n\n  // FS\n  LBL_FS_B: 'B',\n  LBL_FS_M: 'M',\n  LBL_FS_G: 'G',\n  LBL_FS_KIB: 'KiB',\n  LBL_FS_MIB: 'MiB',\n  LBL_FS_GIB: 'GiB',\n\n  // Generic\n  LBL_TOP: 'Zgoraj',\n  LBL_LEFT: 'Levo',\n  LBL_RIGHT: 'Desno',\n  LBL_BOTTOM: 'Spodaj',\n  LBL_MENU: 'Meni',\n  LBL_ERROR: 'Napaka',\n  LBL_INFO: 'Informacije',\n  LBL_MESSAGE: 'Sporočilo',\n  LBL_WARNINIG: 'Opozorilo',\n  LBL_SUCCESS: 'Uspeh',\n  LBL_FAILURE: 'Neuspeh',\n  LBL_WINDOW: 'Okno',\n  LBL_WINDOWS: 'Okna',\n  LBL_NOTIFICATION: 'Obvestilo',\n  LBL_NOTIFICATIONS: 'Obvestila',\n  LBL_TRAY: 'Element vrstice',\n  LBL_NAME: 'Ime',\n  LBL_TYPE: 'Vrsta',\n  LBL_SIZE: 'Velikost',\n  LBL_FILE: 'Datoteka',\n  LBL_NEW: 'Novo',\n  LBL_OPEN: 'Odpri',\n  LBL_SAVE: 'Shrani',\n  LBL_SAVEAS: 'Shrani kot',\n  LBL_OK: 'V redu',\n  LBL_ABORT: 'Prekini',\n  LBL_CANCEL: 'Prekliči',\n  LBL_CLOSE: 'Zapri',\n  LBL_QUIT: 'Izklopi',\n  LBL_YES: 'Da',\n  LBL_NO: 'Ne',\n  LBL_GO: 'Pojdi',\n  LBL_MKDIR: 'Ustvari novo mapo',\n  LBL_MKFILE: 'Ustvari novo datoteko',\n  LBL_COPY: 'Kopiraj',\n  LBL_PASTE: 'Prilepi',\n  LBL_CUT: 'Izreži',\n  LBL_MOVE: 'Premakni',\n  LBL_RENAME: 'Preimenuj',\n  LBL_DELETE: 'Izbriši',\n  LBL_DOWNLOAD: 'Prenesi',\n  LBL_REFRESH: 'Osveži',\n  LBL_RELOAD: 'Osveži',\n  LBL_HOME: 'Domov',\n  LBL_VIEW: 'Pogled',\n  LBL_HELP: 'Pomoč',\n  LBL_ABOUT: 'O programu',\n  LBL_APPLICATION: 'Aplikacija',\n  LBL_APPLICATIONS: 'Aplikacije',\n  LBL_KILL: 'Končaj',\n  LBL_KILL_ALL: 'Končaj vse',\n  LBL_MINIMIZE: 'Pomanjšaj',\n  LBL_MAXIMIZE: 'Povečaj',\n  LBL_RESTORE: 'Obnovi',\n  LBL_RAISE: 'Dvigni',\n  LBL_SHADE: 'Zasenči',\n  LBL_UNSHADE: 'Odsenči',\n  LBL_ONTOP: 'Na vrhu',\n  LBL_RESIZE: 'Spremeni velikost',\n  LBL_BACK: 'Nazaj',\n  LBL_FORWARD: 'Naprej',\n  LBL_UPLOAD: 'Naloži',\n  LBL_IMAGE: 'Slika'\n};\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2020, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Nguyễn Anh Khoa <khoaakt@gmail.com>\n * @licence Simplified BSD License\n */\n\nexport const vi_VN = {\n  // Core\n  ERR_REQUEST_STANDALONE: 'Không thể gửi yêu cầu ở chế độ độc lập.',\n  ERR_REQUEST_NOT_OK: 'Đã xảy ra lỗi khi thực hiện yêu cầu: {0}',\n  ERR_VFS_MOUNT_NOT_FOUND: 'Không tìm thấy hệ thống tập tin \\'{0}\\'',\n  ERR_VFS_MOUNT_NOT_FOUND_FOR: 'Không tìm thấy hệ thống tập tin cho \\'{0}\\'',\n  ERR_VFS_MOUNT_NOT_MOUNTED: 'Hệ thống tập tin \\'{0}\\' không được gắn kết',\n  ERR_VFS_MOUNT_ALREADY_MOUNTED: 'Hệ thống tập tin \\'{0}\\' đã được gắn kết',\n  ERR_VFS_PATH_FORMAT_INVALID: 'Định dạng đường dẫn \\'{0}\\' không khớp với \\'name:/path\\'',\n  ERR_PACKAGE_NOT_FOUND: 'Không tìm thấy siêu dữ liệu của gói \\'{0}\\'',\n  ERR_PACKAGE_LOAD: 'Tải gói \\'{0}\\' thất bại: {1}',\n  ERR_PACKAGE_NO_RUNTIME: 'Không tìm thấy Runtime của gói \\'{0}\\'',\n  ERR_PACKAGE_NO_METADATA: 'Không tìm thấy siêu dữ liệu cho \\'{0}\\'. Bạn có chắc nó đã được báo cáo trong manifest không?',\n  ERR_PACKAGE_EXCEPTION: 'Đã xảy ra lỗi trong \\'{0}\\'',\n  ERR_WINDOW_ID_EXISTS: 'Cửa sổ với ID \\'{0}\\' đã tồn tại',\n  ERR_INVALID_LOCALE: 'Ngôn ngữ không hợp lệ \\'{0}\\'',\n  LBL_CONNECTION_LOST: 'Mất kết nối',\n  LBL_CONNECTION_LOST_MESSAGE: 'Kết nối với OS.js đã bị mất. Đang kết nối lại....',\n  LBL_CONNECTION_RESTORED: 'Đã khôi phục kết nối',\n  LBL_CONNECTION_RESTORED_MESSAGE: 'Kết nối với máy chủ OS.js đã được khôi phục.',\n  LBL_CONNECTION_FAILED: 'Kết nối thất bại',\n  LBL_CONNECTION_FAILED_MESSAGE: 'Không thể kết nối đến máy chủ OS.js. Một số tính năng có thể không hoạt động ổn định.',\n\n  // Application categories\n  LBL_APP_CAT_DEVELOPMENT: 'Phát triển',\n  LBL_APP_CAT_SCIENCE: 'Khoa học',\n  LBL_APP_CAT_GAMES: 'Trò chơi',\n  LBL_APP_CAT_GRAPHICS: 'Đồ họa',\n  LBL_APP_CAT_NETWORK: 'Mạng',\n  LBL_APP_CAT_MULTIMEDIA: 'Đa phương tiện',\n  LBL_APP_CAT_OFFICE: 'Văn phòng',\n  LBL_APP_CAT_SYSTEM: 'Hệ thống',\n  LBL_APP_CAT_UTILITIES: 'Tiện ích',\n  LBL_APP_CAT_OTHER: 'Ứng dụng khác',\n\n  // UI\n  LBL_LAUNCH_SELECT: 'Chọn ứng dụng',\n  LBL_LAUNCH_SELECT_MESSAGE: 'Chọn ứng dụng để mở tập tin \\'{0}\\'',\n  LBL_DESKTOP_SELECT_WALLPAPER: 'Thay đổi hình nền',\n  LBL_DESKTOP_SELECT_THEME: 'Thay đổi chủ đề',\n  LBL_SEARCH_TOOLTOP: 'Tìm kiếm dữ liệu ({0})',\n  LBL_SEARCH_PLACEHOLDER: 'Tìm kiếm...',\n  LBL_SEARCH_WAIT: 'Đang tìm kiếm...',\n  LBL_SEARCH_RESULT: 'Đang hiển thị {0} kết quả',\n\n  // FS\n  LBL_FS_B: 'B',\n  LBL_FS_M: 'M',\n  LBL_FS_G: 'G',\n  LBL_FS_KIB: 'KiB',\n  LBL_FS_MIB: 'MiB',\n  LBL_FS_GIB: 'GiB',\n\n  // Generic\n  LBL_TOP: 'Phía trên',\n  LBL_LEFT: 'Trái',\n  LBL_RIGHT: 'Phải',\n  LBL_BOTTOM: 'Phía dưới',\n  LBL_MENU: 'Menu',\n  LBL_ERROR: 'Lỗi',\n  LBL_INFO: 'Thông tin',\n  LBL_MESSAGE: 'Thông báo',\n  LBL_WARNINIG: 'Cảnh báo',\n  LBL_SUCCESS: 'Thành công',\n  LBL_FAILURE: 'Thất bại',\n  LBL_WINDOW: 'Cửa sổ',\n  LBL_WINDOWS: 'Các cửa sổ',\n  LBL_NOTIFICATION: 'Thông báo',\n  LBL_NOTIFICATIONS: 'Các thông báo',\n  LBL_TRAY: 'Mục khay hệ thống',\n  LBL_NAME: 'Tên',\n  LBL_TYPE: 'Kiểu',\n  LBL_SIZE: 'Kích thước',\n  LBL_FILE: 'Tập tin',\n  LBL_NEW: 'Mới',\n  LBL_OPEN: 'Mở',\n  LBL_SAVE: 'Lưu',\n  LBL_SAVEAS: 'Lưu như',\n  LBL_OK: 'OK',\n  LBL_ABORT: 'Hủy thao tác',\n  LBL_CANCEL: 'Hủy bỏ',\n  LBL_CLOSE: 'Đóng',\n  LBL_QUIT: 'Thoát',\n  LBL_YES: 'Có',\n  LBL_NO: 'Không',\n  LBL_GO: 'Đi',\n  LBL_MKDIR: 'Tạo thư mục mới',\n  LBL_MKFILE: 'Tạo tệp mới',\n  LBL_COPY: 'Sao chép',\n  LBL_PASTE: 'Dán',\n  LBL_CUT: 'Cắt',\n  LBL_MOVE: 'Di chuyển',\n  LBL_RENAME: 'Đổi tên',\n  LBL_DELETE: 'Xóa',\n  LBL_DOWNLOAD: 'Tải về',\n  LBL_REFRESH: 'Làm mới',\n  LBL_RELOAD: 'Tải lại',\n  LBL_HOME: 'Trang chủ',\n  LBL_VIEW: 'Xem',\n  LBL_HELP: 'Hướng dẫn',\n  LBL_ABOUT: 'Thông tin',\n  LBL_APPLICATION: 'Ứng dụng',\n  LBL_APPLICATIONS: 'Các ứng dụng',\n  LBL_KILL: 'Đóng',\n  LBL_KILL_ALL: 'Đóng tất cả',\n  LBL_MINIMIZE: 'Thu nhỏ',\n  LBL_MAXIMIZE: 'Tối đa',\n  LBL_RESTORE: 'Phục hồi',\n  LBL_RAISE: 'Nâng lên',\n  LBL_SHADE: 'Làm mở',\n  LBL_UNSHADE: 'Bỏ làm mờ',\n  LBL_ONTOP: 'Ở trên cùng',\n  LBL_RESIZE: 'Thay đổi kích thước',\n  LBL_BACK: 'Lùi',\n  LBL_FORWARD: 'Tiến',\n  LBL_UPLOAD: 'Tải lên',\n  LBL_IMAGE: 'Ảnh'\n};\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2020, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Julien Gomes Dias <abld@abld.info\n * @licence Simplified BSD License\n */\n\nexport const de_DE = {\n  // Core\n  ERR_REQUEST_STANDALONE: 'Cannot make requests in standalone mode.',\n  ERR_REQUEST_NOT_OK: 'An error occured while performing a request: {0}',\n  ERR_VFS_MOUNT_NOT_FOUND: 'Filesystem \\'{0}\\' nicht gefunden',\n  ERR_VFS_MOUNT_NOT_FOUND_FOR: 'Filesystem für \\'{0}\\' nicht gefunden',\n  ERR_VFS_MOUNT_NOT_MOUNTED: 'Filesystem \\'{0}\\' nicht gemountet',\n  ERR_VFS_MOUNT_ALREADY_MOUNTED: 'Filesystem \\'{0}\\' schon gemountet',\n  ERR_VFS_PATH_FORMAT_INVALID: 'Given path \\'{0}\\' does not match \\'name:/path\\'',\n  ERR_PACKAGE_NOT_FOUND: 'Paket-Metadaten  \\'{0}\\' nicht gefunden',\n  ERR_PACKAGE_LOAD: 'Paket Laden \\'{0}\\' ist fehlgeschlagen: {1}',\n  ERR_PACKAGE_NO_RUNTIME: 'Paketlaufzeit \\'{0}\\' nicht gefunden',\n  ERR_PACKAGE_NO_METADATA: 'Metadaten für \\'{0}\\' nicht gefunden. Ist es in der Manifest?',\n  ERR_PACKAGE_EXCEPTION: 'Eine Ausnahme trat in \\'{0}\\' auf.',\n  ERR_WINDOW_ID_EXISTS: 'Fenster mit der ID \\'{0}\\' existiert schon',\n  ERR_INVALID_LOCALE: 'Invalid locale \\'{0}\\'',\n  LBL_CONNECTION_LOST: 'Verbindung unterbrochen',\n  LBL_CONNECTION_LOST_MESSAGE: 'Die Verbindung zu OS.js wurde unterbrochen. Wiederverbinden... ',\n  LBL_CONNECTION_RESTORED: 'Verbindung wiederhergestellt',\n  LBL_CONNECTION_RESTORED_MESSAGE: 'Die Verbindung OS.js server was restored.',\n\n  // Application categories\n  LBL_APP_CAT_DEVELOPMENT: 'IT-Entwicklung',\n  LBL_APP_CAT_SCIENCE: 'Wissenschaft',\n  LBL_APP_CAT_GAMES: 'Spiels',\n  LBL_APP_CAT_GRAPHICS: 'Grafiken',\n  LBL_APP_CAT_NETWORK: 'Netzwerk',\n  LBL_APP_CAT_MULTIMEDIA: 'Multimedia',\n  LBL_APP_CAT_OFFICE: 'Office',\n  LBL_APP_CAT_SYSTEM: 'System',\n  LBL_APP_CAT_UTILITIES: 'Dienstprogramme',\n  LBL_APP_CAT_OTHER: 'Andere',\n\n  // UI\n  LBL_LAUNCH_SELECT: 'Applikation auswählen',\n  LBL_LAUNCH_SELECT_MESSAGE: 'Applikation für \\'{0}\\' auswählen',\n  LBL_DESKTOP_SELECT_WALLPAPER: 'Wallpaper auswählen',\n  LBL_DESKTOP_SELECT_THEME: 'Theme auswählen',\n  LBL_SEARCH_TOOLTOP: 'Dateisysteme ({0}) finden',\n  LBL_SEARCH_PLACEHOLDER: 'Dateisysteme finden...',\n  LBL_SEARCH_WAIT: 'Suche...',\n  LBL_SEARCH_RESULT: 'Anzeige von {0} Ergebnissen',\n\n  // FS\n  LBL_FS_B: 'B',\n  LBL_FS_M: 'M',\n  LBL_FS_G: 'G',\n  LBL_FS_KIB: 'KiB',\n  LBL_FS_MIB: 'MiB',\n  LBL_FS_GIB: 'GiB',\n\n  // Generic\n  LBL_TOP: 'Oben',\n  LBL_LEFT: 'Links',\n  LBL_RIGHT: 'Rechts',\n  LBL_BOTTOM: 'Unten',\n  LBL_MENU: 'Menü',\n  LBL_ERROR: 'Error',\n  LBL_INFO: 'Info',\n  LBL_MESSAGE: 'Message',\n  LBL_WARNINIG: 'Warnung',\n  LBL_SUCCESS: 'Success',\n  LBL_FAILURE: 'Failure',\n  LBL_WINDOW: 'Fenster',\n  LBL_WINDOWS: 'Fenster',\n  LBL_NOTIFICATION: 'Benachrichtigung',\n  LBL_NOTIFICATIONS: 'Benachrichtigungen',\n  LBL_TRAY: 'Infobereich-Eintrag',\n  LBL_NAME: 'Name',\n  LBL_TYPE: 'Typ',\n  LBL_SIZE: 'Größe',\n  LBL_FILE: 'Datei',\n  LBL_NEW: 'Neue',\n  LBL_OPEN: 'Öffnen',\n  LBL_SAVE: 'Speichern',\n  LBL_SAVEAS: 'Speichern als',\n  LBL_OK: 'OK',\n  LBL_ABORT: 'Abbrechen',\n  LBL_CANCEL: 'Beenden',\n  LBL_CLOSE: 'Schließen',\n  LBL_QUIT: 'Verlassen',\n  LBL_YES: 'Ja',\n  LBL_NO: 'Nein',\n  LBL_GO: 'Los',\n  LBL_MKDIR: 'Neues Verzeichnis erstellen',\n  LBL_MKFILE: 'Neue Datei erstellen',\n  LBL_COPY: 'Kopieren',\n  LBL_PASTE: 'Einfügen',\n  LBL_CUT: 'Ausschneiden',\n  LBL_MOVE: 'Verschieben',\n  LBL_RENAME: 'Umbenennen',\n  LBL_DELETE: 'Löschen',\n  LBL_DOWNLOAD: 'Herunterladen',\n  LBL_REFRESH: 'Aktualisieren',\n  LBL_RELOAD: 'Neu laden',\n  LBL_HOME: 'Startseite',\n  LBL_VIEW: 'Ansicht',\n  LBL_HELP: 'Hilfe',\n  LBL_ABOUT: 'Über',\n  LBL_APPLICATION: 'Anwendungsprogramme',\n  LBL_APPLICATIONS: 'Anwendungsprogrammen',\n  LBL_KILL: 'Beenden',\n  LBL_KILL_ALL: 'Beenden alle'\n};\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2020, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  lijun <lijun_ay@126.com>\n * @licence Simplified BSD License\n */\n\nexport const zh_CN = {\n  // Core\n  ERR_REQUEST_STANDALONE: '无法在独立模式下发出请求。',\n  ERR_REQUEST_NOT_OK: '执行请求时发生错误：{0}',\n  ERR_VFS_MOUNT_NOT_FOUND: '找不到文件系统 \\'{0}\\' ',\n  ERR_VFS_MOUNT_NOT_FOUND_FOR: '找不到\\'{0}\\'的文件系统',\n  ERR_VFS_MOUNT_NOT_MOUNTED: '文件系统 \\'{0}\\' 未挂载',\n  ERR_VFS_MOUNT_ALREADY_MOUNTED: '文件系统 \\'{0}\\' 已挂载',\n  ERR_VFS_PATH_FORMAT_INVALID: '给定路径\\'{0}\\'与\\'name:/path\\'不匹配',\n  ERR_PACKAGE_NOT_FOUND: '未找到包的元数据\\'{0}\\'',\n  ERR_PACKAGE_LOAD: '加载包 \\'{0}\\' 失败： {1}',\n  ERR_PACKAGE_NO_RUNTIME: '未找到运行包 \\'{0}\\' ',\n  ERR_PACKAGE_NO_METADATA: '找不到 \\'{0}\\' 的元数据。它在清单（manifest）中吗？',\n  ERR_PACKAGE_EXCEPTION: '\\'{0}\\'发生异常',\n  ERR_WINDOW_ID_EXISTS: 'ID为\\'{0}\\'的窗口已存在',\n  ERR_INVALID_LOCALE: '无效的区域设置 \\'{0}\\'',\n  LBL_CONNECTION_LOST: '连接丢失',\n  LBL_CONNECTION_LOST_MESSAGE: '与OS.js的连接丢失了。重新连接....',\n  LBL_CONNECTION_RESTORED: '连接已恢复',\n  LBL_CONNECTION_RESTORED_MESSAGE: '已恢复与OS.js服务器的连接。',\n  LBL_CONNECTION_FAILED: '连接失败',\n  LBL_CONNECTION_FAILED_MESSAGE: '无法建立与OS.js的连接。 某些功能可能无法正常工作。',\n\n  // Application categories\n  LBL_APP_CAT_DEVELOPMENT: '开发',\n  LBL_APP_CAT_SCIENCE: '科学',\n  LBL_APP_CAT_GAMES: '游戏',\n  LBL_APP_CAT_GRAPHICS: '图像',\n  LBL_APP_CAT_NETWORK: '网络',\n  LBL_APP_CAT_MULTIMEDIA: '媒体',\n  LBL_APP_CAT_OFFICE: '办公',\n  LBL_APP_CAT_SYSTEM: '系统',\n  LBL_APP_CAT_UTILITIES: '工具',\n  LBL_APP_CAT_OTHER: '其他',\n\n  // UI\n  LBL_LAUNCH_SELECT: '选择应用程序',\n  LBL_LAUNCH_SELECT_MESSAGE: '选择\\'{0}\\'的应用程序',\n  LBL_DESKTOP_SELECT_WALLPAPER: '选择壁纸',\n  LBL_DESKTOP_SELECT_THEME: '选择主题',\n  LBL_SEARCH_TOOLTOP: '搜索文件系统 ({0})',\n  LBL_SEARCH_PLACEHOLDER: '搜索文件系统...',\n  LBL_SEARCH_WAIT: '搜索...',\n  LBL_SEARCH_RESULT: '显示{0}个结果',\n\n  // FS\n  LBL_FS_B: 'B',\n  LBL_FS_M: 'M',\n  LBL_FS_G: 'G',\n  LBL_FS_KIB: 'KB',\n  LBL_FS_MIB: 'MB',\n  LBL_FS_GIB: 'GB',\n\n  // Generic\n  LBL_TOP: '上',\n  LBL_LEFT: '左',\n  LBL_RIGHT: '右',\n  LBL_BOTTOM: '下',\n  LBL_MENU: '菜单',\n  LBL_ERROR: '错误',\n  LBL_INFO: '信息',\n  LBL_MESSAGE: '消息',\n  LBL_WARNINIG: '警告',\n  LBL_SUCCESS: '成功',\n  LBL_FAILURE: '失败',\n  LBL_WINDOW: '窗口',\n  LBL_WINDOWS: '窗口',\n  LBL_NOTIFICATION: '通知',\n  LBL_NOTIFICATIONS: '通知',\n  LBL_TRAY: '托盘',\n  LBL_NAME: '名称',\n  LBL_TYPE: '类型',\n  LBL_SIZE: '大小',\n  LBL_FILE: '文件',\n  LBL_NEW: '新建',\n  LBL_OPEN: '打开',\n  LBL_SAVE: '保存',\n  LBL_SAVEAS: '另存为',\n  LBL_OK: '确定',\n  LBL_ABORT: '中止',\n  LBL_CANCEL: '取消',\n  LBL_CLOSE: '关闭',\n  LBL_QUIT: '退出',\n  LBL_YES: '是',\n  LBL_NO: '否',\n  LBL_GO: '进行',\n  LBL_MKDIR: '创建新目录',\n  LBL_MKFILE: '创建新文件',\n  LBL_COPY: '复制',\n  LBL_PASTE: '粘贴',\n  LBL_CUT: '剪切',\n  LBL_MOVE: '移动',\n  LBL_RENAME: '重命名',\n  LBL_DELETE: '删除',\n  LBL_DOWNLOAD: '下载',\n  LBL_REFRESH: '刷新',\n  LBL_RELOAD: '刷新',\n  LBL_HOME: '主页',\n  LBL_VIEW: '视图',\n  LBL_HELP: '帮助',\n  LBL_ABOUT: '关于',\n  LBL_APPLICATION: '应用程序',\n  LBL_APPLICATIONS: '应用程序',\n  LBL_KILL: '杀死',\n  LBL_KILL_ALL: '全部杀死',\n  LBL_MINIMIZE: '最小化',\n  LBL_MAXIMIZE: '最大化',\n  LBL_RESTORE: '恢复',\n  LBL_RAISE: '上浮',\n  LBL_SHADE: '置后',\n  LBL_UNSHADE: '置前',\n  LBL_ONTOP: '顶端',\n  LBL_RESIZE: '调整',\n  LBL_BACK: '后退',\n  LBL_FORWARD: '前进',\n  LBL_UPLOAD: '上传',\n  LBL_IMAGE: '图像'\n};\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2020, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n *\n * @author  Morteza Javan <javan.it@gmail.com>\n * @licence Simplified BSD License\n */\n\nexport const fa_FA = {\n  // Core\n  ERR_REQUEST_STANDALONE: 'امکان اجرای درخواست در حالت واحد وجود ندارد.',\n  ERR_REQUEST_NOT_OK: 'خطایی در حال انجام این درخواست رخ داد: {0}',\n  ERR_VFS_MOUNT_NOT_FOUND: 'سیستم فایل \\'{0}\\' پیدا نشد',\n  ERR_VFS_MOUNT_NOT_FOUND_FOR: 'سیستم فایل برای \\'{0}\\' پیدا نشد',\n  ERR_VFS_MOUNT_NOT_MOUNTED: 'سیستم فایل \\'{0}\\' متصل نیست',\n  ERR_VFS_MOUNT_ALREADY_MOUNTED: 'سیستم فایل \\'{0}\\' از قبل متصل شده است',\n  ERR_VFS_PATH_FORMAT_INVALID: 'آدرس \\'{0}\\' با الگو مطابقت ندارد \\'name:/path\\'',\n  ERR_PACKAGE_NOT_FOUND: 'فراداده بسته \\'{0}\\' پیدا نشد',\n  ERR_PACKAGE_LOAD: 'بارگزاری بسته \\'{0}\\' دچار خطا شد: {1}',\n  ERR_PACKAGE_NO_RUNTIME: 'فایل های اجرایی \\'{0}\\' پیدا نشد',\n  ERR_PACKAGE_NO_METADATA: 'فراداده برای \\'{0}\\' پیدا نشد. ممکن است در مانیفست باشد؟?',\n  ERR_PACKAGE_EXCEPTION: 'بروز شرایط استثنا \\'{0}\\'',\n  ERR_WINDOW_ID_EXISTS: 'پنجره با شناسه \\'{0}\\' قبلا وجود دارد',\n  ERR_INVALID_LOCALE: 'زبان نامعتبر \\'{0}\\'',\n  LBL_CONNECTION_LOST: 'از دست رفتن ارتباط',\n  LBL_CONNECTION_LOST_MESSAGE: 'ارتباط با سرور قطع شد. در حال تلاش ....',\n  LBL_CONNECTION_RESTORED: 'ارتباط بازیابی شد',\n  LBL_CONNECTION_RESTORED_MESSAGE: 'ارتباط با سرور مجدد برقرار شد.',\n  LBL_CONNECTION_FAILED: 'ارتباط با خطا مواجه شد',\n  LBL_CONNECTION_FAILED_MESSAGE: 'ارتباط نمیتواند با سرور برقرار شود.',\n\n  // Application categories\n  LBL_APP_CAT_DEVELOPMENT: 'توسعه',\n  LBL_APP_CAT_SCIENCE: 'علمی',\n  LBL_APP_CAT_GAMES: 'بازی',\n  LBL_APP_CAT_GRAPHICS: 'گرافیک',\n  LBL_APP_CAT_NETWORK: 'شبکه',\n  LBL_APP_CAT_MULTIMEDIA: 'چندرسانه ای',\n  LBL_APP_CAT_OFFICE: 'اداری',\n  LBL_APP_CAT_SYSTEM: 'سیستمی',\n  LBL_APP_CAT_UTILITIES: 'ابزارها',\n  LBL_APP_CAT_OTHER: 'سایر',\n\n  // UI\n  LBL_LAUNCH_SELECT: 'انتخاب برنامه کاربردی',\n  LBL_LAUNCH_SELECT_MESSAGE: 'انتخاب برنامه کاربردی برای \\'{0}\\'',\n  LBL_DESKTOP_SELECT_WALLPAPER: 'انتخاب کاغذ دیواری',\n  LBL_DESKTOP_SELECT_THEME: 'انتخاب الگو',\n  LBL_SEARCH_TOOLTOP: 'جستجوی سیستم فایل ({0})',\n  LBL_SEARCH_PLACEHOLDER: 'جستجوی سیستم فایل...',\n  LBL_SEARCH_WAIT: 'در جال جستجو...',\n  LBL_SEARCH_RESULT: 'نمایش {0} نتیجه',\n\n  // FS\n  LBL_FS_B: 'B',\n  LBL_FS_M: 'M',\n  LBL_FS_G: 'G',\n  LBL_FS_KIB: 'کیلوبایت',\n  LBL_FS_MIB: 'مگابایت',\n  LBL_FS_GIB: 'گیگابایت',\n\n  // Generic\n  LBL_TOP: 'بالا',\n  LBL_LEFT: 'چپ',\n  LBL_RIGHT: 'راست',\n  LBL_BOTTOM: 'پایین',\n  LBL_MENU: 'منوی اصلی',\n  LBL_ERROR: 'خطا',\n  LBL_INFO: 'نکته',\n  LBL_MESSAGE: 'پیام',\n  LBL_WARNINIG: 'هشدار',\n  LBL_SUCCESS: 'موفق',\n  LBL_FAILURE: 'شکست',\n  LBL_WINDOW: 'پنجره',\n  LBL_WINDOWS: 'پنجره ها',\n  LBL_NOTIFICATION: 'اطلاعیه',\n  LBL_NOTIFICATIONS: 'اطلاعیه ها',\n  LBL_TRAY: 'سینی ابزار',\n  LBL_NAME: 'نام',\n  LBL_TYPE: 'نوع',\n  LBL_SIZE: 'اندازه',\n  LBL_FILE: 'فایل',\n  LBL_NEW: 'جدید',\n  LBL_OPEN: 'بازکردن',\n  LBL_OPEN_WITH: 'باز کردن با...',\n  LBL_SAVE: 'ذخیره',\n  LBL_SAVEAS: 'ذخیره جدید',\n  LBL_OK: 'تایید',\n  LBL_ABORT: 'بیخیال',\n  LBL_CANCEL: 'رد',\n  LBL_CLOSE: 'بستن',\n  LBL_QUIT: 'خروج',\n  LBL_YES: 'بله',\n  LBL_NO: 'خیر',\n  LBL_GO: 'برو',\n  LBL_MKDIR: 'ایجاد پوشه جدید',\n  LBL_MKFILE: 'ایجاد فایل جدید',\n  LBL_COPY: 'کپی',\n  LBL_PASTE: 'الصاق',\n  LBL_CUT: 'برداشتن',\n  LBL_MOVE: 'انتقال',\n  LBL_RENAME: 'تغییرنام',\n  LBL_DELETE: 'حذف',\n  LBL_DOWNLOAD: 'دانلود',\n  LBL_REFRESH: 'نوسازی',\n  LBL_RELOAD: 'بارگزاری مجدد',\n  LBL_HOME: 'خانه',\n  LBL_VIEW: 'نمایش',\n  LBL_HELP: 'کمک',\n  LBL_ABOUT: 'درباره',\n  LBL_APPLICATION: 'برنامه کاربردی',\n  LBL_APPLICATIONS: 'برنامه های کاربردی',\n  LBL_KILL: 'از بین بردن',\n  LBL_KILL_ALL: 'از بین بردن همه',\n  LBL_MINIMIZE: 'کمینه',\n  LBL_MAXIMIZE: 'بیشینه',\n  LBL_RESTORE: 'عادی',\n  LBL_RAISE: 'شناور',\n  LBL_SHADE: 'بالا بردن',\n  LBL_UNSHADE: 'پایین آوردن',\n  LBL_ONTOP: 'در بالا',\n  LBL_RESIZE: 'تغییراندازه',\n  LBL_BACK: 'عقب',\n  LBL_FORWARD: 'جلو',\n  LBL_UPLOAD: 'آپلود',\n  LBL_IMAGE: 'تصویر',\n  LBL_CREATE_SHORTCUT: 'ایجاد میانبر',\n  LBL_REMOVE_SHORTCUT: 'حذف میانبر',\n  LBL_EDIT: 'ویرایش'\n};\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2020, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Matheus Felipe <matheusfelipeog@gmail.com>\n * @licence Simplified BSD License\n */\n\nexport const pt_BR = {\n  // Core\n  ERR_REQUEST_STANDALONE: 'Não é possível fazer solicitações autônomas.',\n  ERR_REQUEST_NOT_OK: 'Ocorreu um erro ao executar a solicitação: {0}',\n  ERR_VFS_MOUNT_NOT_FOUND: 'Sistema de arquivo \\'{0}\\' não encontrado',\n  ERR_VFS_MOUNT_NOT_FOUND_FOR: 'Sistema de arquivo não encontrado para \\'{0}\\'',\n  ERR_VFS_MOUNT_NOT_MOUNTED: 'Sistema de arquivo \\'{0}\\' não montado',\n  ERR_VFS_MOUNT_ALREADY_MOUNTED: 'Sistema de arquivo \\'{0}\\' já montado',\n  ERR_VFS_PATH_FORMAT_INVALID: 'O caminho especificado \\'{0}\\' não corresponde \\'name:/path\\'',\n  ERR_PACKAGE_NOT_FOUND: 'Metadados do pacote \\'{0}\\' não encontrados',\n  ERR_PACKAGE_LOAD: 'Carregamento do pacote \\'{0}\\' falhou: {1}',\n  ERR_PACKAGE_NO_RUNTIME: 'Tempo de execução do pacote \\'{0}\\' não encontrado',\n  ERR_PACKAGE_NO_METADATA: 'Metadados não encontrado para \\'{0}\\'. Está no manifesto?',\n  ERR_PACKAGE_EXCEPTION: 'Ocorreu uma exceção em \\'{0}\\'',\n  ERR_WINDOW_ID_EXISTS: 'Janela com ID \\'{0}\\' Já existe',\n  ERR_INVALID_LOCALE: 'Código de idioma inválido \\'{0}\\'',\n  LBL_CONNECTION_LOST: 'Conexão perdida',\n  LBL_CONNECTION_LOST_MESSAGE: 'A conexão com OS.js foi perdida. Reconectando....',\n  LBL_CONNECTION_RESTORED: 'Conexão restaurada',\n  LBL_CONNECTION_RESTORED_MESSAGE: 'A conexão com o servidor OS.js foi restaurada.',\n  LBL_CONNECTION_FAILED: 'Falha na conexão',\n  LBL_CONNECTION_FAILED_MESSAGE: 'A conexão com OS.js não pode ser estabelecida. Alguns recursos podem não funcionar corretamente.',\n\n  // Application categories\n  LBL_APP_CAT_DEVELOPMENT: 'Desenvolvimento',\n  LBL_APP_CAT_SCIENCE: 'Ciência',\n  LBL_APP_CAT_GAMES: 'Jogos',\n  LBL_APP_CAT_GRAPHICS: 'Grâfico',\n  LBL_APP_CAT_NETWORK: 'Rede',\n  LBL_APP_CAT_MULTIMEDIA: 'Multimedia',\n  LBL_APP_CAT_OFFICE: 'Escritório',\n  LBL_APP_CAT_SYSTEM: 'Sistema',\n  LBL_APP_CAT_UTILITIES: 'Utilidades',\n  LBL_APP_CAT_OTHER: 'Outros',\n\n  // UI\n  LBL_LAUNCH_SELECT: 'Selecionar aplicativo',\n  LBL_LAUNCH_SELECT_MESSAGE: 'Selecionar aplicativo para \\'{0}\\'',\n  LBL_DESKTOP_SELECT_WALLPAPER: 'Selecionar papel de parede',\n  LBL_DESKTOP_SELECT_THEME: 'Selecionar tema',\n  LBL_SEARCH_TOOLTOP: 'Pesquisar no sistema de arquivos ({0})',\n  LBL_SEARCH_PLACEHOLDER: 'Pesquisar...',\n  LBL_SEARCH_WAIT: 'Buscando...',\n  LBL_SEARCH_RESULT: 'Mostrando {0} resultados',\n\n  // FS\n  LBL_FS_B: 'B',\n  LBL_FS_M: 'M',\n  LBL_FS_G: 'G',\n  LBL_FS_KIB: 'KiB',\n  LBL_FS_MIB: 'MiB',\n  LBL_FS_GIB: 'GiB',\n\n  // Generic\n  LBL_TOP: 'Topo',\n  LBL_LEFT: 'Esquerda',\n  LBL_RIGHT: 'Direita',\n  LBL_BOTTOM: 'Inferior',\n  LBL_MENU: 'Menu',\n  LBL_ERROR: 'Erro',\n  LBL_INFO: 'Informação',\n  LBL_MESSAGE: 'Mensagem',\n  LBL_WARNINIG: 'Atenção',\n  LBL_SUCCESS: 'Sucesso',\n  LBL_FAILURE: 'Falha',\n  LBL_WINDOW: 'Janela',\n  LBL_WINDOWS: 'Janelas',\n  LBL_NOTIFICATION: 'Notificação',\n  LBL_NOTIFICATIONS: 'Notificações',\n  LBL_TRAY: 'Entrada',\n  LBL_NAME: 'Nome',\n  LBL_TYPE: 'Tipo',\n  LBL_SIZE: 'Tamanho',\n  LBL_FILE: 'Arquivo',\n  LBL_NEW: 'Novo',\n  LBL_OPEN: 'Abrir',\n  LBL_OPEN_WITH: 'Abrir com...',\n  LBL_SAVE: 'Salvar',\n  LBL_SAVEAS: 'Salvar como',\n  LBL_OK: 'OK',\n  LBL_ABORT: 'Abortar',\n  LBL_CANCEL: 'Cancelar',\n  LBL_CLOSE: 'Fechar',\n  LBL_QUIT: 'Sair',\n  LBL_YES: 'Sim',\n  LBL_NO: 'Não',\n  LBL_GO: 'Ir',\n  LBL_MKDIR: 'Criar novo diretório',\n  LBL_MKFILE: 'Criar novo arquivo',\n  LBL_COPY: 'Copiar',\n  LBL_PASTE: 'Colar',\n  LBL_CUT: 'Recortar',\n  LBL_MOVE: 'Mover',\n  LBL_RENAME: 'Renomear',\n  LBL_DELETE: 'Deletar',\n  LBL_DOWNLOAD: 'Download',\n  LBL_REFRESH: 'Atualizar',\n  LBL_RELOAD: 'Recarregar',\n  LBL_HOME: 'Home',\n  LBL_VIEW: 'Visualização',\n  LBL_HELP: 'Ajuda',\n  LBL_ABOUT: 'Sobre',\n  LBL_APPLICATION: 'Aplicativo',\n  LBL_APPLICATIONS: 'Aplicativos',\n  LBL_KILL: 'Finalizar',\n  LBL_KILL_ALL: 'Finalizar tudo',\n  LBL_MINIMIZE: 'Minimizar',\n  LBL_MAXIMIZE: 'Maximizar',\n  LBL_RESTORE: 'Restaurar',\n  LBL_RAISE: 'Levantar',\n  LBL_SHADE: 'Sombra',\n  LBL_UNSHADE: 'Tirar sombra',\n  LBL_ONTOP: 'No topo',\n  LBL_RESIZE: 'Redimensionar',\n  LBL_BACK: 'Voltar',\n  LBL_FORWARD: 'Avançar',\n  LBL_UPLOAD: 'Enviar',\n  LBL_IMAGE: 'Imagem',\n  LBL_CREATE_SHORTCUT: 'Criar atalho',\n  LBL_REMOVE_SHORTCUT: 'Remover atalho',\n  LBL_EDIT: 'Editar'\n};\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2020, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\nimport {EventEmitter} from '@osjs/event-emitter';\nimport {basename, pathname} from './utils/vfs';\n\n\n/**\n * Basic Application Helper\n *\n * @desc A class for helping creating basic applications with open/load/create functionality.\n * Also sets the internal proc args for sessions.\n */\nexport class BasicApplication extends EventEmitter {\n\n  /**\n   * Basic Application Constructor\n   * @param {Core} core OS.js Core API\n   * @param {Application} proc The application process\n   * @param {Window} win The main application window\n   * @param {object} [options] Basic application options\n   * @param {string[]} [options.mimeTypes] What MIME types to support (all/fallback)\n   * @param {string[]} [options.loadMimeTypes] What MIME types to support on load\n   * @param {string[]} [options.saveMimeTypes] What MIME types to support on save\n   * @param {string} [options.defaultFilename] Default filename of a new file\n   */\n  constructor(core, proc, win, options = {}) {\n    super('BasicApplication<' + proc.name + '>');\n\n    this.core = core;\n    this.proc = proc;\n    this.win = win;\n\n    this.options = {\n      mimeTypes: proc.metadata.mimes || [],\n      loadMimeTypes: [],\n      saveMimeTypes: [],\n      defaultFilename: 'New File',\n      ...options\n    };\n  }\n\n  /**\n   * Destroys all Basic Application internals\n   */\n  destroy() {\n    this.off();\n  }\n\n  /**\n   * Initializes the application\n   */\n  init() {\n    if (this.proc.args.file) {\n      this.open(this.proc.args.file);\n    } else {\n      this.create();\n    }\n\n    return Promise.resolve(true);\n  }\n\n  /**\n   * Gets options for a dialog\n   * @param {string} type Dialog type\n   * @return {object}\n   */\n  getDialogOptions(type, options = {}) {\n    const {\n      defaultFilename,\n      mimeTypes,\n      loadMimeTypes,\n      saveMimeTypes\n    } = this.options;\n\n    const currentFile = options.file ? options.file : this.proc.args.file;\n    const defaultPath = this.core.config('vfs.defaultPath');\n    const path = currentFile ? currentFile.path : null;\n\n    let mime = type === 'open' ? loadMimeTypes : saveMimeTypes;\n    if (!mime.length) {\n      mime = mimeTypes;\n    }\n\n    return [{\n      type,\n      mime,\n      filename: path ? basename(path) : defaultFilename,\n      path: path ? pathname(path) : defaultPath\n    }, {\n      parent: this.win,\n      attributes: {\n        modal: true\n      }\n    }];\n  }\n\n  /**\n   * Updates the window title to match open file\n   */\n  updateWindowTitle() {\n    if (this.win) {\n      const {translatableFlat} = this.core.make('osjs/locale');\n      const prefix = translatableFlat(this.proc.metadata.title);\n      const title = this._createTitle(prefix);\n\n      this.win.setTitle(title);\n    }\n  }\n\n  /**\n   * Creates a new dialog of a type\n   * @param {string} type Dialog type\n   * @param {Function} cb Callback\n   * @param {object} [options] Override options\n   */\n  createDialog(type, cb, options = {}) {\n    const [args, opts] = this.getDialogOptions(type, options);\n\n    if (this.core.has('osjs/dialog')) {\n      this.core.make('osjs/dialog', 'file', args, opts, (btn, item) => {\n        if (btn === 'ok') {\n          cb(item);\n        }\n      });\n    }\n  }\n\n  /**\n   * Opens given file\n   * @desc Does not do any actual VFS operation\n   * @param {object} file A file object\n   */\n  open(item) {\n    this._setFile(item, 'open-file');\n  }\n\n  /**\n   * Saves given file\n   * @desc Does not do any actual VFS operation\n   * @param {object} file A file object\n   */\n  save(item) {\n    this._setFile(item, 'save-file');\n  }\n\n  /**\n   * Create new file\n   * @desc Does not do any actual VFS operation\n   */\n  create() {\n    this.proc.args.file = null;\n\n    this.emit('new-file');\n\n    this.updateWindowTitle();\n  }\n\n  /**\n   * Create new file\n   * @see BasicApplication#create\n   */\n  createNew() {\n    this.create();\n  }\n\n  /**\n   * Creates a new save dialog\n   * @param {object} [options] Dialog options\n   */\n  createSaveDialog(options = {}) {\n    this.createDialog('save', item => this.save(item), options);\n  }\n\n  /**\n   * Creates a new load dialog\n   * @param {object} [options] Dialog options\n   */\n  createOpenDialog(options = {}) {\n    this.createDialog('open', item => this.open(item), options);\n  }\n\n  /**\n   * Sets file from open/save action\n   * @param {object} item File\n   * @param {string} eventName Event to fire\n   */\n  _setFile(item, eventName) {\n    this.proc.args.file = {...item};\n    this.emit(eventName, item);\n    this.updateWindowTitle();\n  }\n\n  /**\n   * Creates the window title\n   * @param {string} prefix Title prefix\n   * @return {string}\n   */\n  _createTitle(prefix) {\n    const title = this.proc.args.file\n      ? basename(this.proc.args.file.path)\n      : this.options.defaultFilename;\n\n    return title\n      ? `${prefix} - ${title}`\n      : prefix;\n  }\n}\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2020, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\nimport Application from '../application';\nimport Window from '../window';\nimport WindowBehavior from '../window-behavior';\nimport Session from '../session';\nimport Packages from '../packages';\nimport Tray from '../tray';\nimport Websocket from '../websocket';\nimport Clipboard from '../clipboard';\nimport * as translations from '../locale';\nimport {format, translatable, translatableFlat, getLocale} from '../utils/locale';\nimport {style, script, supportedMedia, playSound} from '../utils/dom';\nimport * as dnd from '../utils/dnd';\nimport {BasicApplication} from '../basic-application.js';\nimport {ServiceProvider} from '@osjs/common';\nimport {EventEmitter} from '@osjs/event-emitter';\nimport logger from '../logger';\n\n\n/*\n * Resolves various resources\n * TODO: Move all of this (and related) stuff to a Theme class\n */\nconst resourceResolver = (core) => {\n  const media = supportedMedia();\n\n  const getThemeName = (type) => {\n    const defaultTheme = core.config('desktop.settings.' + type);\n    return core.make('osjs/settings').get('osjs/desktop', type, defaultTheme);\n  };\n\n  const themeResource = path => {\n    const theme = getThemeName('theme');\n\n    return core.url(`themes/${theme}/${path}`); // FIXME: Use metadata ?\n  };\n\n  const getSoundThemeName = () => getThemeName('sounds');\n\n  const soundResource = path => {\n    if (!path.match(/\\.([a-z]+)$/)) {\n      const defaultExtension = 'mp3';\n      const checkExtensions = ['oga', 'mp3'];\n      const found = checkExtensions.find(str => media.audio[str] === true);\n      const use = found || defaultExtension;\n\n      path += '.' + use;\n    }\n\n    const theme = getSoundThemeName();\n\n    return theme ? core.url(`sounds/${theme}/${path}`) : null; // FIXME: Use metadata ?\n  };\n\n  const soundsEnabled = () => !!getSoundThemeName();\n\n  const icon = path => {\n    const theme = getThemeName('icons');\n    return core.url(`icons/${theme}/icons/${path}`); // FIXME: Use metadata ?\n  };\n\n  return {themeResource, soundResource, soundsEnabled, icon};\n};\n\n/*\n * Provides localization\n * TODO: Move to a Locale class\n */\nconst localeContract = core => {\n  const translate = translatable(core)(translations);\n\n  return {\n    format: format(core),\n    translate,\n    translatable: translatable(core),\n    translatableFlat: translatableFlat(core),\n    getLocale: (key = 'language') => {\n      const ref = getLocale(core, key);\n      return ref.userLocale || ref.defaultLocale;\n    },\n    setLocale: name => name in translations\n      ? core.make('osjs/settings')\n        .set('osjs/locale', 'language', name)\n        .save()\n        .then(() => core.emit('osjs/locale:change', name))\n      : Promise.reject(translate('ERR_INVALID_LOCALE', name))\n  };\n};\n\n/*\n * Provides window contract\n */\nconst windowContract = core => ({\n  create: (options = {}) => new Window(core, options),\n  list: () => Window.getWindows(),\n  last: () => Window.lastWindow()\n});\n\n/**\n * OS.js Core Service Provider\n *\n * @desc Provides base services\n */\nexport default class CoreServiceProvider extends ServiceProvider {\n\n  /**\n   * @param {Object} core OS.js Core\n   * @param {Object} [args] Arguments\n   * @param {Function} [args.windowBehavior] Custom Window Behavior\n   */\n  constructor(core, args = {}) {\n    super(core);\n\n    this.session = new Session(core);\n    this.tray = new Tray(core);\n    this.pm = new Packages(core);\n    this.clipboard = new Clipboard();\n\n    window.OSjs = this.createGlobalApi();\n  }\n\n  /**\n   * Get a list of services this provider registers\n   */\n  provides() {\n    return [\n      'osjs/application',\n      'osjs/basic-application',\n      'osjs/window',\n      'osjs/windows',\n      'osjs/event-handler',\n      'osjs/window-behaviour',\n      'osjs/dnd',\n      'osjs/dom',\n      'osjs/clipboard',\n      'osjs/tray',\n      'osjs/locale',\n      'osjs/packages',\n      'osjs/websocket',\n      'osjs/session',\n      'osjs/theme',\n      'osjs/sounds'\n    ];\n  }\n\n  destroy() {\n    this.tray.destroy();\n    this.pm.destroy();\n    this.clipboard.destroy();\n    this.session.destroy();\n\n    super.destroy();\n  }\n\n  init() {\n    this.initBaseProviders();\n    this.initResourceProviders();\n\n    this.core.on('osjs/core:started', () => {\n      this.session.load();\n    });\n\n    // FIXME: deprecated\n    this.core.instance('osjs/event-handler', (...args) => {\n      logger.warn('osjs/event-handler is deprecated, use osjs/event-emitter');\n      return new EventEmitter(...args);\n    });\n\n    return this.pm.init();\n  }\n\n  initBaseProviders() {\n    this.core.instance('osjs/window', (options = {}) => new Window(this.core, options));\n    this.core.instance('osjs/application', (data = {}) => new Application(this.core, data));\n    this.core.instance('osjs/basic-application', (...args) => new BasicApplication(this.core, ...args));\n    this.core.instance('osjs/websocket', (...args) => new Websocket(...args));\n    this.core.instance('osjs/event-emitter', (...args) => new EventEmitter(...args));\n\n    this.core.instance('osjs/tray', (options) => typeof options !== 'undefined'\n      ? this.tray.create(options)\n      : this.tray);\n\n    this.core.singleton('osjs/windows', () => windowContract(this.core));\n    this.core.singleton('osjs/locale', () => localeContract(this.core));\n    this.core.singleton('osjs/session', () => this.session);\n    this.core.singleton('osjs/packages', () => this.pm);\n    this.core.singleton('osjs/clipboard', () => this.clipboard);\n    this.core.singleton('osjs/dnd', () => dnd);\n    this.core.singleton('osjs/dom', () => ({script, style}));\n\n    this.core.singleton('osjs/window-behavior', () => typeof this.options.windowBehavior === 'function'\n      ? this.options.windowBehavior(this.core)\n      : new WindowBehavior(this.core));\n  }\n\n  initResourceProviders() {\n    const {themeResource, soundResource, soundsEnabled, icon} = resourceResolver(this.core);\n\n    this.core.singleton('osjs/theme', () => ({\n      resource: themeResource,\n      icon: name => icon(name.replace(/(\\.png)?$/, '.png'))\n    }));\n\n    this.core.singleton('osjs/sounds', () => ({\n      resource: soundResource,\n      play: (src, options = {}) => {\n        if (soundsEnabled()) {\n          const absoluteSrc = src.match(/^(\\/|https?:)/)\n            ? src\n            : soundResource(src);\n\n          if (absoluteSrc) {\n            return playSound(absoluteSrc, options);\n          }\n        }\n\n        return false;\n      }\n    }));\n  }\n\n  createGlobalApi() {\n    const globalBlacklist = this.core.config('providers.globalBlacklist', []);\n    const globalWhitelist = this.core.config('providers.globalWhitelist', []);\n\n    const make = (...args) => {\n      const [name] = args;\n\n      if (this.core.has(name)) {\n        const blacklisted = globalBlacklist.length > 0 && globalBlacklist.indexOf(name) !== -1;\n        const notWhitelisted = globalWhitelist.length > 0 && globalWhitelist.indexOf(name) === -1;\n\n        if (blacklisted || notWhitelisted) {\n          throw new Error(`The provider '${name}' cannot be used via global scope`);\n        }\n      }\n\n      return this.core.make(...args);\n    };\n\n    return Object.freeze({\n      make,\n      register: (...args) => this.pm.register(...args),\n      url: (...args) => this.core.url(...args),\n      run: (...args) => this.core.run(...args),\n      open: (...args) => this.core.open(...args),\n      request: (...args) => this.core.request(...args)\n    });\n  }\n\n  start() {\n    if (this.core.config('development')) {\n      this.core.on('osjs/dist:changed', filename => {\n        this.onDistChanged(filename);\n      });\n\n      this.core.on('osjs/packages:package:changed', name => {\n        this.onPackageChanged(name);\n      });\n    }\n\n    this.core.on('osjs/packages:metadata:changed', () => {\n      this.pm.init();\n    });\n  }\n\n  onDistChanged(filename) {\n    const url = this.core.url(filename).replace(/^\\//, '');\n    const found = this.core.$resourceRoot.querySelectorAll('link[rel=stylesheet]');\n    const map = Array.from(found).reduce((result, item) => {\n      const src = item.getAttribute('href').split('?')[0].replace(/^\\//, '');\n      return {\n        [src]: item,\n        ...result\n      };\n    }, {});\n\n    if (map[url]) {\n      logger.debug('Hot-reloading', url);\n\n      setTimeout(() => {\n        map[url].setAttribute('href', url);\n      }, 100);\n    }\n  }\n\n  onPackageChanged(name) {\n    // TODO: Reload themes as well\n    Application.getApplications()\n      .filter(proc => proc.metadata.name === name)\n      .forEach(proc => proc.relaunch());\n  }\n}\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2020, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\nimport {ServiceProvider} from '@osjs/common';\nimport Desktop from '../desktop';\n\n/**\n * OS.js Desktop Service Provider\n *\n * @desc Provides desktop features\n */\nexport default class DesktopServiceProvider extends ServiceProvider {\n\n  constructor(core, options = {}) {\n    super(core, options || {});\n\n    this.desktop = null;\n  }\n\n  destroy() {\n    this.desktop = this.desktop.destroy();\n  }\n\n  /**\n   * Get a list of services this provider registers\n   */\n  provides() {\n    return [\n      'osjs/desktop'\n    ];\n  }\n\n  init() {\n    this.desktop = new Desktop(this.core, this.options);\n    this.desktop.init();\n\n    this.core.singleton('osjs/desktop', () => ({\n      setKeyboardContext: ctx => this.desktop.setKeyboardContext(ctx),\n      openContextMenu: ev => this.desktop.onContextMenu(ev),\n      addContextMenuEntries: entries => this.desktop.addContextMenu(entries),\n      applySettings: settings => this.desktop.applySettings(settings),\n      getRect: () => this.desktop.getRect()\n    }));\n\n    this.core.on('osjs/core:started', () => {\n      this.desktop.applySettings();\n    });\n  }\n\n  start() {\n    this.desktop.start();\n  }\n}\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2020, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\nimport Notifications from '../notifications';\nimport {ServiceProvider} from '@osjs/common';\n\n/**\n * OS.js Notification Service Provider\n *\n * @desc Provides methods to create notifications\n */\nexport default class NotificationServiceProvider extends ServiceProvider {\n\n  constructor(core) {\n    super(core);\n\n    this.notifications = new Notifications(core);\n  }\n\n  destroy() {\n    this.notifications.destroy();\n  }\n\n  provides() {\n    return [\n      'osjs/notification'\n    ];\n  }\n\n  init() {\n    this.notifications.init();\n\n    this.core.instance('osjs/notification', (options) => {\n      return this.notifications.create(options);\n    });\n  }\n}\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2020, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\nimport {\n  transformReaddir,\n  transformArrayBuffer,\n  createFileIter\n} from './utils/vfs';\n\n// Makes sure our input paths are object(s)\nconst pathToObject = path => ({\n  id: null,\n  ...typeof path === 'string' ? {path} : path\n});\n\n// Handles directory listing result(s)\nconst handleDirectoryList = (path, options) => result =>\n  Promise.resolve(result.map(stat => createFileIter(stat)))\n    .then(result => transformReaddir(pathToObject(path), result, {\n      showHiddenFiles: options.showHiddenFiles !== false,\n      filter: options.filter\n    }));\n\n/**\n * Read a directory\n *\n * @param {object|string} path The path to read\n * @param {object} [options] Options\n * @return {Promise<object[], Error>} A list of files\n */\nexport const readdir = (adapter, mount) => (path, options = {}) =>\n  adapter.readdir(pathToObject(path), options, mount)\n    .then(handleDirectoryList(path, options));\n\n/**\n * Reads a file\n *\n * Available types are 'arraybuffer', 'blob', 'uri' and 'string'\n *\n * @param {object|string} path The path to read\n * @param {string} [type=string] Return this content type\n * @param {object} [options] Options\n * @return {Promise<ArrayBuffer, Error>}\n */\nexport const readfile = (adapter, mount) => (path, type = 'string', options = {}) =>\n  adapter.readfile(pathToObject(path), type, options, mount)\n    .then(response => transformArrayBuffer(response.body, response.mime, type));\n\n/**\n * Writes a file\n * @param {object|string} path The path to write\n * @param {ArrayBuffer|Blob|string} data The data\n * @param {object} [options] Options\n * @return {Promise<number, Error>} File size\n */\nexport const writefile = (adapter, mount) => (path, data, options = {}) => {\n  const binary = (data instanceof ArrayBuffer || data instanceof Blob)\n    ? data\n    : new Blob([data], {type: 'application/octet-stream'});\n\n  return adapter.writefile(pathToObject(path), binary, options, mount);\n};\n\n/**\n * Copies a file or directory (move)\n * @param {object|string} from The source (from)\n * @param {object|string} to The destination (to)\n * @param {object} [options] Options\n * @return {Promise<boolean, Error>}\n */\nexport const copy = (adapter, mount) => (from, to, options = {}) =>\n  adapter.copy(pathToObject(from), pathToObject(to), options, mount);\n\n/**\n * Renames a file or directory (move)\n * @param {object|string} from The source (from)\n * @param {object|string} to The destination (to)\n * @param {object} [options] Options\n * @return {Promise<boolean, Error>}\n */\nexport const rename = (adapter, mount) => (from, to, options = {}) =>\n  adapter.rename(pathToObject(from), pathToObject(to), options, mount);\n\n/**\n * Alias of 'readme'\n * @param {object|string} from The source (from)\n * @param {object|string} to The destination (to)\n * @param {object} [options] Options\n * @return {Promise<boolean, Error>}\n */\nexport const move = rename;\n\n/**\n * Creates a directory\n * @param {object|string} path The path to new directory\n * @param {object} [options] Options\n * @return {Promise<boolean, Error>}\n */\nexport const mkdir = (adapter, mount) => (path, options = {}) =>\n  adapter.mkdir(pathToObject(path), options, mount);\n\n/**\n * Removes a file or directory\n * @param {object|string} path The path to remove\n * @param {object} [options] Options\n * @return {Promise<boolean, Error>}\n */\nexport const unlink = (adapter, mount) => (path, options = {}) =>\n  adapter.unlink(pathToObject(path), options, mount);\n\n/**\n * Checks if path exists\n * @param {object|string} path The path to check\n * @param {object} [options] Options\n * @return {Promise<boolean, Error>}\n */\nexport const exists = (adapter, mount) => (path, options = {}) =>\n  adapter.exists(pathToObject(path), options, mount);\n\n/**\n * Gets the stats of the file or directory\n * @param {object|string} path The path to check\n * @param {object} [options] Options\n * @return {Promise<object, Error>}\n */\nexport const stat = (adapter, mount) => (path, options = {}) =>\n  adapter.stat(pathToObject(path), options, mount)\n    .then(stat => createFileIter(stat));\n\n/**\n * Gets an URL to a resource defined by file\n * @param {object|string} path The file\n * @param {object} [options] Options\n * @return {Promise<string, Error>}\n */\nexport const url = (adapter, mount) => (path, options = {}) =>\n  adapter.url(pathToObject(path), options, mount);\n\n/**\n * Initiates a native browser download of the file\n * @param {object|string} path The file\n * @param {object} [options] Options\n * @return {Promise<any>}\n */\nexport const download = (adapter, mount) => (path, options = {}) =>\n  typeof adapter.download === 'function' && options.readfile !== true\n    ? adapter.download(pathToObject(path), options, mount)\n    : readfile(adapter)(path, 'blob')\n      .then(body => {\n        const filename = pathToObject(path).path.split('/').splice(-1)[0];\n        const url = window.URL.createObjectURL(body);\n\n        const a = document.createElement('a');\n        a.style.display = 'none';\n        a.href = url;\n        a.download = filename;\n        document.body.appendChild(a);\n\n        a.click();\n\n        setTimeout(() => {\n          window.URL.revokeObjectURL(url);\n          a.remove();\n        }, 1);\n      });\n\n/**\n * Searches for files and folders\n * @param {object|string} root The root\n * @param {string} pattern Search pattern\n * @param {object} [options] Options\n * @return {Promise<object[], Error>} A list of files\n */\nexport const search = (adapter, mount) => (root, pattern, options = {}) => {\n  if (mount.attributes && mount.attributes.searchable === false) {\n    return Promise.resolve([]);\n  }\n\n  return adapter.search(pathToObject(root), pattern, options, mount)\n    .then(handleDirectoryList(root, options));\n};\n\n/**\n * Touches a file\n * @param {object|string} path File path\n * @return {Promise<boolean, Error>}\n */\nexport const touch = (adapter, mount) => (path, options = {}) =>\n  adapter.touch(pathToObject(path), options, mount);\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2020, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\n/**\n * Null VFS adapter\n * @param {Core} core Core reference\n * @param {object} [options] Adapter options\n */\nconst nullAdapter = ({\n  readdir: (path, options) => Promise.resolve([]),\n  readfile: (path, type, options) => Promise.resolve({body: new ArrayBuffer(), mime: 'application/octet-stream'}),\n  writefile: (path, data, options) => Promise.resolve(-1),\n  copy: (from, to, options) => Promise.resolve(false),\n  rename: (from, to, options) => Promise.resolve(false),\n  mkdir: (path, options) => Promise.resolve(false),\n  unlink: (path, options) => Promise.resolve(false),\n  exists: (path, options) => Promise.resolve(false),\n  stat: (path, options) => Promise.resolve({}),\n  url: (path, options) => Promise.resolve(null),\n  mount: options => Promise.resolve(true),\n  unmount: options => Promise.resolve(true),\n  search: (root, pattern, options) => Promise.resolve([]),\n  touch: (path, options) => Promise.resolve(false)\n});\n\nexport default nullAdapter;\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2020, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\nconst getters = ['exists', 'stat', 'readdir', 'readfile'];\n\nconst requester = core => (fn, body, type) =>\n  core.request(`/vfs/${fn}`, {\n    body,\n    method: getters.indexOf(fn) !== -1 ? 'get' : 'post'\n  }, type)\n    .then(response => {\n      if (type === 'json') {\n        return {mime: 'application/json', body: response};\n      } else if (fn === 'writefile') {\n        return response.json();\n      }\n\n      const contentType = response.headers.get('content-type') || 'application/octet-stream';\n\n      return response.arrayBuffer().then(result => ({\n        mime: contentType,\n        body: result\n      }));\n    });\n\nconst methods = (core, request) => {\n  const passthrough = (name) => ({path}, options) =>\n    request(name, {path, options}, 'json')\n      .then(({body}) => body);\n\n  return {\n    readdir: ({path}, options) => request('readdir', {\n      path,\n      options: {}\n    }, 'json').then(({body}) => body),\n\n    readfile: ({path}, type, options) =>\n      request('readfile', {path, options}),\n\n    writefile: ({path}, data, options) => {\n      const formData = new FormData();\n      formData.append('upload', data);\n      formData.append('path', path);\n      formData.append('options', options);\n\n      return request('writefile', formData);\n    },\n\n    copy: (from, to, options) =>\n      request('copy', {from: from.path, to: to.path, options}, 'json').then(({body}) => body),\n\n    rename: (from, to, options) =>\n      request('rename', {from: from.path, to: to.path, options}, 'json').then(({body}) => body),\n\n    mkdir: passthrough('mkdir'),\n    unlink: passthrough('unlink'),\n    exists: passthrough('exists'),\n    stat: passthrough('stat'),\n\n    url: ({path}, options) => Promise.resolve(\n      core.url(`/vfs/readfile?path=${encodeURIComponent(path)}`)\n    ),\n\n    search: ({path}, pattern, options) =>\n      request('search', {root: path, pattern, options}, 'json')\n        .then(({body}) => body),\n\n    touch: ({path}, options) =>\n      request('touch', {path, options}, 'json').then(({body}) => body),\n\n    download: ({path}, options = {}) => {\n      const json = encodeURIComponent(JSON.stringify({download: true}));\n\n      return Promise.resolve(`/vfs/readfile?options=${json}&path=` + encodeURIComponent(path))\n        .then(url => {\n          return (options.target || window).open(url);\n        });\n    }\n  };\n};\n\n/**\n * System VFS adapter\n * @param {Core} core Core reference\n * @param {object} [options] Adapter options\n */\nconst adapter = (core) => {\n  const request = requester(core);\n\n  return methods(core, request);\n};\n\nexport default adapter;\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2020, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\n/**\n * Application VFS adapter\n * @param {Core} core Core reference\n * @param {object} [options] Adapter options\n */\nconst adapter = (core) => {\n  const pkgs = core.make('osjs/packages');\n\n  return {\n    readdir: ({path}, options) => {\n      return Promise.resolve(pkgs.getPackages())\n        .then(pkgs => pkgs.map(pkg => ({\n          isDirectory: false,\n          isFile: true,\n          filename: pkg.name,\n          mime: 'osjs/application',\n          path: `${path.replace(/(\\/+)?$/, '/')}${pkg.name}`,\n          size: 0,\n          stat: {},\n          icon: pkg.icon ? core.url(pkg.icon, {}, pkg) : null\n        })));\n    }\n  };\n};\n\nexport default adapter;\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2020, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\nimport * as VFS from './vfs';\nimport {EventEmitter} from '@osjs/event-emitter';\nimport {parseMontpointPrefix, filterMountByGroups} from './utils/vfs';\nimport defaultAdapter from './adapters/vfs/null';\nimport systemAdapter from './adapters/vfs/system';\nimport appsAdapter from './adapters/vfs/apps';\nimport logger from './logger';\nimport merge from 'deepmerge';\n\n/**\n * VFS Mountpoint\n * @param {string} name Name\n * @param {string} label Label\n * @param {string} adapter Adater name\n * @param {boolean} [enabled=true] Enabled state\n * @param {object} [attributes] Attributes\n * @param {string} [attributes.visibility='global'] Visibility in UI\n * @param {boolean} [attributes.local=true] Local filesystem ?\n * @param {boolean} [attributes.searchable=true] If can be searched\n * @param {boolean} [attributes.readOnly=false] Readonly\n * @typedef Mountpoint\n */\n\n/**\n * Filesystem Manager\n *\n * @desc Class that manages filesystems\n */\nexport default class Filesystem extends EventEmitter {\n\n  /**\n   * Create filesystem manager\n   *\n   * @param {Core} core Core reference\n   * @param {object} [options] Options\n   * @param {Map<string,Adapter>} [options.adapters] Adapter registry\n   * @param {Mountpoint[]} [options.mounts] Mountpoints\n   */\n  constructor(core, options = {}) {\n    options = {\n      adapters: {},\n      mounts: [],\n      ...options\n    };\n\n    super('Filesystem');\n\n    /**\n     * Core instance reference\n     * @type {Core}\n     */\n    this.core = core;\n\n    /**\n     * Adapter registry\n     * @type {Map<string, Adapter>}\n     */\n    this.adapters = {\n      system: systemAdapter,\n      apps: appsAdapter,\n      ...this.core.config('vfs.adapters', {}),\n      ...options.adapters\n    };\n\n    /**\n     * Mountpoints\n     * @type {Mountpoint[]}\n     */\n    this.mounts = [];\n\n    /**\n     * Options\n     * @type {Object}\n     */\n    this.options = {};\n\n    /**\n     * A wrapper for VFS method requests\n     * @type {Map<string, Function>}\n     */\n    this.proxy = Object.keys(VFS).reduce((result, method) => {\n      return {\n        [method]: (...args) => this._request(method, ...args),\n        ...result\n      };\n    }, {});\n  }\n\n  /**\n   * Mounts all configured mountpoints\n   */\n  mountAll(stopOnError = true) {\n    this.mounts = this.core.config('vfs.mountpoints')\n      .concat(this.options.mounts || [])\n      .map(mount => {\n        try {\n          return this.createMountpoint(mount);\n        } catch (e) {\n          logger.warn('Error while creating mountpoint', e);\n        }\n\n        return null;\n      })\n      .filter((mount, pos, arr) => {\n        const index = arr.findIndex(item => item.label === mount.label || item.root === mount.label);\n        if (index === pos) {\n          return true;\n        }\n\n        logger.warn('Removed duplicate mountpoint', mount);\n        return false;\n      })\n      .filter(mount => mount !== null);\n\n    const fn = m => stopOnError\n      ? this._mountpointAction(m)\n      : this._mountpointAction(m).catch(err => logger.warn('Error while mounting', m, err));\n\n    return Promise.all(this.mounts.map(fn));\n  }\n\n  /**\n   * Mount given filesystem\n   * @param {string} name Filesystem name\n   * @throws {Error} On invalid name or if already mounted\n   */\n  mount(name) {\n    return this._mountAction(name, false);\n  }\n\n  /**\n   * Unmount given filesystem\n   * @param {string} name Filesystem name\n   * @throws {Error} On invalid name or if already unmounted\n   */\n  unmount(name) {\n    return this._mountAction(name, true);\n  }\n\n  /**\n   * Internal wrapper for mounting/unmounting\n   *\n   * @param {Mountpoint} mountpoint The mountpoint\n   * @param {boolean} [unmount=false] If action is unmounting\n   * @return {Promise<boolean, Error>}\n   */\n  _mountpointAction(mountpoint, unmount = false) {\n    const eventName = unmount ? 'unmounted' : 'mounted';\n    const coreEventName = unmount ? 'unmount' : 'mount';\n\n    return mountpoint._adapter[coreEventName]({}, mountpoint)\n      .then(result => {\n        if (result) {\n          mountpoint.mounted = !unmount;\n\n          this.emit(eventName, mountpoint);\n          this.core.emit('osjs/fs:' + coreEventName);\n        }\n\n        return result;\n      });\n  }\n\n  /**\n   * Internal wrapper for mounting/unmounting by name\n   *\n   * @param {string} name Mountpoint name\n   * @param {boolean} [unmount=false] If action is unmounting\n   * @return {Promise<boolean, Error>}\n   */\n  _mountAction(name, unmount) {\n    return Promise.resolve(this.mounts.find(m => m.name === name))\n      .then(found => {\n        const _ = this.core.make('osjs/locale').translate;\n\n        // FIXME: Add already mounting state\n        if (!found) {\n          throw new Error(_('ERR_VFS_MOUNT_NOT_FOUND', name));\n        } else if (unmount && !found.mounted) {\n          throw new Error(_('ERR_VFS_MOUNT_NOT_MOUNTED', name));\n        } else if (!unmount && found.mounted) {\n          throw new Error(_('ERR_VFS_MOUNT_ALREADY_MOUNTED', name));\n        }\n\n        return this._mountpointAction(found, unmount);\n      });\n  }\n\n  /**\n   * Gets the proxy for VFS methods\n   * @return {Map<String, Function>} A map of VFS functions\n   */\n  request() {\n    return this.proxy;\n  }\n\n  /**\n   * Perform a VFS method request\n   * @param {string} method VFS method name\n   * @param {*} ...args Arguments\n   * @return {*}\n   */\n  _request(method, ...args) {\n    this.core.emit(`osjs/vfs:${method}`, ...args);\n\n    if (['rename', 'move', 'copy'].indexOf(method) !== -1) {\n      const [src, dest] = args;\n      const srcMount = this.getMountpointFromPath(src);\n      const destMount = this.getMountpointFromPath(dest);\n      const sameAdapter = srcMount.adapter === destMount.adapter;\n\n      if (!sameAdapter) {\n        return VFS.readfile(srcMount._adapter, srcMount)(src)\n          .then(ab => VFS.writefile(destMount._adapter, destMount)(dest, ab))\n          .then(result => {\n            return method === 'rename'\n              ? VFS.unlink(srcMount._adapter, srcMount)(src).then(() => result)\n              : result;\n          });\n      }\n    }\n\n    const [file] = args;\n    const mount = this.getMountpointFromPath(file);\n\n    return VFS[method](mount._adapter, mount)(...args);\n  }\n\n  /**\n   * Creates a new mountpoint based on given properties\n   * @param {object} props Properties (see Mountpoint)\n   * @return {Mountpoint}\n   */\n  createMountpoint(props) {\n    const name = props.adapter || this.core.config('vfs.defaultAdapter');\n    const adapter = {...defaultAdapter, ...this.adapters[name](this.core)};\n\n    const result = merge({\n      enabled: true,\n      mounted: false,\n      adapter: name,\n      attributes: {\n        visibility: 'global',\n        local: true,\n        searchable: true,\n        readOnly: false\n      }\n    }, props);\n\n    return {\n      _adapter: adapter,\n      label: name,\n      root: `${result.name || name}:/`,\n      ...result\n    };\n  }\n\n  /**\n   * Gets mountpoint from given path\n   * @param {string|object} file The file object\n   * @return {Mountpoint|null}\n   */\n  getMountpointFromPath(file) {\n    const path = typeof file === 'string' ? file : file.path;\n    const prefix = parseMontpointPrefix(path);\n    const _ = this.core.make('osjs/locale').translate;\n\n    if (!prefix) {\n      throw new Error(_('ERR_VFS_PATH_FORMAT_INVALID', path));\n    }\n\n    const found = this.mounts.find(m => m.name === prefix);\n\n    if (!found) {\n      throw new Error(_('ERR_VFS_MOUNT_NOT_FOUND_FOR', `${prefix}:`));\n    }\n\n    return found;\n  }\n\n  /**\n   * Gets all mountpoints\n   * @return {object[]}\n   */\n  getMounts(all = false) {\n    const user = this.core.getUser();\n    const theme = this.core.make('osjs/theme');\n    const icon = str => str\n      ? (typeof str === 'string' ? str : theme.icon(str.name))\n      : theme.icon('drive-harddisk');\n\n    return this.mounts\n      .filter(m => all || m.mounted)\n      .filter(m => m.enabled !== false)\n      .filter(m => {\n        const mg = m.attributes ? m.attributes.groups : [];\n        const ms = m.attributes ? m.attributes.strictGroups !== false : true;\n        return filterMountByGroups(user.groups)(mg, ms);\n      })\n      .map(m => ({\n        attributes: {...m.attributes},\n        icon: icon(m.icon),\n        name: m.name,\n        label: m.label,\n        root: m.root\n      }));\n  }\n}\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2020, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\nimport {ServiceProvider} from '@osjs/common';\nimport Filesystem from '../filesystem';\nimport * as utils from '../utils/vfs';\n\n/**\n * OS.js Virtual Filesystem Service Provider\n *\n * @desc Provides methods to interact with filesystems\n */\nexport default class VFSServiceProvider extends ServiceProvider {\n  constructor(core, args = {}) {\n    super(core);\n\n    this.fs = new Filesystem(core, {\n      adapters: args.adapters || {},\n      mounts: args.mounts || []\n    });\n  }\n\n  /**\n   * Get a list of services this provider registers\n   */\n  provides() {\n    return [\n      'osjs/vfs',\n      'osjs/fs'\n    ];\n  }\n\n  init() {\n    this.core.singleton('osjs/vfs', () => this.fs.request());\n\n    const iconMap = this.core.config('vfs.icons', {});\n    const icon = utils.getFileIcon(iconMap);\n\n    this.core.singleton('osjs/fs', () => ({\n      pathJoin: (...args) => utils.pathJoin(...args),\n      icon: icon,\n      mountpoints: (...args) => this.fs.getMounts(...args),\n      mount: (...args) => this.fs.mount(...args),\n      unmount: (...args) => this.fs.unmount(...args)\n    }));\n\n    return this.fs.mountAll(false);\n  }\n}\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2020, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\nimport {ServiceProvider} from '@osjs/common';\nimport Auth from '../auth';\n\n/**\n * OS.js Auth Service Provider\n *\n * @desc Creates the login prompt and handles authentication flow\n */\nexport default class AuthServiceProvider extends ServiceProvider {\n\n  /**\n   * @param {Object} core OS.js Core\n   * @param {Object} [args] Arguments\n   * @see Auth\n   */\n  constructor(core, args = {}) {\n    super(core);\n\n    this.auth = new Auth(core, args);\n  }\n\n  /**\n   * Initializes authentication\n   */\n  init() {\n    this.core.singleton('osjs/auth', () => ({\n      show: (cb) => this.auth.show(cb),\n      login: (values) => this.auth.login(values),\n      logout: (reload) => this.auth.logout(reload),\n      user: () => this.core.getUser()\n    }));\n\n    return this.auth.init();\n  }\n\n  /**\n   * Destroys authentication\n   */\n  destroy() {\n    this.auth.destroy();\n\n    return super.destroy();\n  }\n\n  /**\n   * Get a list of services this provider registers\n   */\n  provides() {\n    return [\n      'osjs/auth'\n    ];\n  }\n}\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2020, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\nimport logger from '../../logger';\n\n/**\n * LocalStorage Settings adapter\n * @param {Core} core Core reference\n * @param {object} [options] Adapter options\n */\nconst localStorageSettings = core => ({\n  clear: ns => {\n    if (ns) {\n      localStorage.removeItem(ns);\n    } else {\n      localStorage.clear();\n    }\n\n    return Promise.resolve(true);\n  },\n\n  save: settings => {\n    Object.keys(settings).forEach((k) => {\n      localStorage.setItem(k, JSON.stringify(settings[k]));\n    });\n\n    return Promise.resolve(true);\n  },\n\n  load: () => Promise.resolve(Object.keys(localStorage).reduce((o, v) => {\n    let value = localStorage.getItem(v);\n    try {\n      value = JSON.parse(value);\n    } catch (e) {\n      logger.warn('localStorageAdapter parse error', e);\n    }\n\n    return Object.assign(o, {[v]: value});\n  }, {}))\n});\n\n\nexport default localStorageSettings;\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2020, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\nimport merge from 'deepmerge';\nimport simplejsonconf from 'simplejsonconf';\nimport localStorageSettings from './adapters/settings/localstorage';\nimport serverSettings from './adapters/settings/server';\nimport logger from './logger';\n\nconst defaultAdapters = {\n  server: serverSettings,\n  localStorage: localStorageSettings\n};\n\n/**\n * OS.js Settings Manager\n */\nexport default class Settings {\n\n  constructor(core, args) {\n    const adapter = core.config('standalone')\n      ? localStorageSettings\n      : typeof args.adapter === 'function'\n        ? args.adapter\n        : defaultAdapters[args.adapter || 'localStorage'];\n\n    this.adapter = {\n      load: () => Promise.reject(new Error('Not implemented')),\n      save: () => Promise.reject(new Error('Not implemented')),\n      init: () => Promise.resolve(true),\n      clear: () => Promise.resolve(true),\n      destroy: () => {},\n      ...adapter(core, args.config)\n    };\n\n    /**\n     * Internal timeout reference used for debouncing\n     * @type {object}\n     */\n    this.debounce = null;\n\n    /**\n     * The settings tree\n     * @type {Map<string, any>}\n     */\n    this.settings = {};\n\n    this.core = core;\n  }\n\n  init() {\n    return this.adapter.init();\n  }\n\n  /**\n   * Saves settings\n   * @return {Promise<boolean,  Error>}\n   */\n  save() {\n    return new Promise((resolve, reject) => {\n      if (this.debounce) {\n        const [promise, timer] = this.debounce;\n        promise.resolve(false);\n        this.debounce = clearTimeout(timer);\n      }\n\n      this.debounce = [\n        {resolve, reject},\n        setTimeout(() => {\n          this.adapter.save(this.settings)\n            .then((...args) => {\n              this.core.emit('osjs/settings:save');\n\n              resolve(...args);\n            }).catch(reject);\n        }, 100)\n      ];\n    });\n  }\n\n  /**\n   * Loads settings\n   * @return {Promise<boolean,  Error>}\n   */\n  load() {\n    const defaults = this.core.config('settings.defaults', {});\n\n    return this.adapter.load()\n      .then(settings => {\n        this.settings = merge(defaults, settings, {\n          arrayMerge: (dest, source) => source\n        });\n\n        this.core.emit('osjs/settings:load');\n\n        return true;\n      }).catch(e => {\n        logger.warn('Failed to set settings', e);\n        this.settings = defaults;\n\n        return false;\n      });\n  }\n\n  /**\n   * Gets a settings entry by key\n   *\n   * @desc Gets a setting (from cache)\n   * @param {string} [ns] The namespace\n   * @param {string} [key] The key to get the value from\n   * @param {*} [defaultValue] If result is undefined, return this instead\n   * @return {*}\n   */\n  get(ns, key, defaultValue) {\n    if (typeof ns === 'undefined') {\n      return {...this.settings};\n    } else if (typeof this.settings[ns] === 'undefined') {\n      return key ? defaultValue : {};\n    }\n\n    const tree = simplejsonconf(this.settings[ns]);\n\n    return key\n      ? tree.get(key, defaultValue)\n      : tree.get() || defaultValue;\n  }\n\n  /**\n   * Sets a settings entry by root key.\n   * @desc Sets a setting, but does not save.\n   * @param {string} ns The namespace\n   * @param {string} [key] The key to set\n   * @param {*} value The value to set\n   * @return {Settings} This\n   */\n  set(ns, key, value) {\n    const lock = this.core.config('settings.lock', []);\n    if (lock.indexOf(ns) !== -1) {\n      return this;\n    }\n\n    if (typeof this.settings[ns] === 'undefined') {\n      this.settings[ns] = {};\n    }\n\n    if (key) {\n      try {\n        const sjc = simplejsonconf(this.settings[ns]);\n        sjc.set(key, value);\n        this.settings[ns] = sjc.get();\n      } catch (e) {\n        logger.warn('Error while setting settings for', key, e);\n      }\n    } else {\n      this.settings[ns] = {...value};\n    }\n\n    return this;\n  }\n\n  /**\n   * Clears a namespace by root key\n   * @param {string} ns The namespace\n   * @return {Promise<boolean, Error>}\n   */\n  clear(ns) {\n    return this.adapter.clear(ns)\n      .then(result => {\n        if (result && this.settings[ns]) {\n          delete this.settings[ns];\n        }\n\n        return result;\n      });\n  }\n\n}\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2020, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\n/**\n * Server Settings adapter\n * @param {Core} core Core reference\n * @param {object} [options] Adapter options\n */\nconst serverSettings = core => ({\n  save: settings => core.request(core.url('/settings'), {\n    method: 'post',\n    body: settings\n  }, 'json'),\n\n  load: () => core.request(core.url('/settings'), {\n    method: 'get'\n  }, 'json')\n});\n\nexport default serverSettings;\n","/*\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-2020, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\nimport {ServiceProvider} from '@osjs/common';\nimport Settings from '../settings';\n\n/**\n * OS.js Settings Service Provider\n *\n * @desc Provides services for settings\n */\nexport default class SettingsServiceProvider extends ServiceProvider {\n\n  constructor(core, args = {}) {\n    super(core);\n\n    this.settings = new Settings(core, {\n      config: {},\n      ...args\n    });\n  }\n\n  /**\n   * Get a list of services this provider registers\n   */\n  provides() {\n    return [\n      'osjs/settings'\n    ];\n  }\n\n  init() {\n    this.core.singleton('osjs/settings', () => ({\n      save: () => this.settings.save(),\n      load: () => this.settings.load(),\n      clear: (...args) => this.settings.clear(...args),\n      get: (...args) => this.settings.get(...args),\n      set: (...args) => this.settings.set(...args)\n    }));\n\n    return this.settings.init();\n  }\n}\n"],"sourceRoot":""}